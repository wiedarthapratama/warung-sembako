(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Eh(r){const e=Object.create(null);for(const t of r.split(","))e[t]=1;return t=>t in e}const Ze={},ko=[],_n=()=>{},nv=()=>!1,Lu=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),Ah=r=>r.startsWith("onUpdate:"),ar=Object.assign,Ih=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},O_=Object.prototype.hasOwnProperty,We=(r,e)=>O_.call(r,e),_e=Array.isArray,Lo=r=>Bu(r)==="[object Map]",iv=r=>Bu(r)==="[object Set]",Ee=r=>typeof r=="function",It=r=>typeof r=="string",ki=r=>typeof r=="symbol",ut=r=>r!==null&&typeof r=="object",ov=r=>(ut(r)||Ee(r))&&Ee(r.then)&&Ee(r.catch),sv=Object.prototype.toString,Bu=r=>sv.call(r),D_=r=>Bu(r).slice(8,-1),av=r=>Bu(r)==="[object Object]",Ch=r=>It(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,Ys=Eh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fu=r=>{const e=Object.create(null);return(t=>e[t]||(e[t]=r(t)))},N_=/-\w/g,Yr=Fu(r=>r.replace(N_,e=>e.slice(1).toUpperCase())),M_=/\B([A-Z])/g,lo=Fu(r=>r.replace(M_,"-$1").toLowerCase()),Vu=Fu(r=>r.charAt(0).toUpperCase()+r.slice(1)),Fl=Fu(r=>r?`on${Vu(r)}`:""),yi=(r,e)=>!Object.is(r,e),Sc=(r,...e)=>{for(let t=0;t<r.length;t++)r[t](...e)},cv=(r,e,t,n=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:n,value:t})},If=r=>{const e=parseFloat(r);return isNaN(e)?r:e};let z0;const Uu=()=>z0||(z0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bh(r){if(_e(r)){const e={};for(let t=0;t<r.length;t++){const n=r[t],i=It(n)?F_(n):bh(n);if(i)for(const o in i)e[o]=i[o]}return e}else if(It(r)||ut(r))return r}const k_=/;(?![^(]*\))/g,L_=/:([^]+)/,B_=/\/\*[^]*?\*\//g;function F_(r){const e={};return r.replace(B_,"").split(k_).forEach(t=>{if(t){const n=t.split(L_);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Th(r){let e="";if(It(r))e=r;else if(_e(r))for(let t=0;t<r.length;t++){const n=Th(r[t]);n&&(e+=n+" ")}else if(ut(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}const V_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",U_=Eh(V_);function uv(r){return!!r||r===""}const lv=r=>!!(r&&r.__v_isRef===!0),Tt=r=>It(r)?r:r==null?"":_e(r)||ut(r)&&(r.toString===sv||!Ee(r.toString))?lv(r)?Tt(r.value):JSON.stringify(r,fv,2):String(r),fv=(r,e)=>lv(e)?fv(r,e.value):Lo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],o)=>(t[Vl(n,o)+" =>"]=i,t),{})}:iv(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Vl(t))}:ki(e)?Vl(e):ut(e)&&!_e(e)&&!av(e)?String(e):e,Vl=(r,e="")=>{var t;return ki(r)?`Symbol(${(t=r.description)!=null?t:e})`:r};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Er;class H_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Er,!e&&Er&&(this.index=(Er.scopes||(Er.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Er;try{return Er=this,e()}finally{Er=t}}}on(){++this._on===1&&(this.prevScope=Er,Er=this)}off(){this._on>0&&--this._on===0&&(Er=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function $_(){return Er}let Je;const Ul=new WeakSet;class hv{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Er&&Er.active&&Er.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ul.has(this)&&(Ul.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||pv(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,q0(this),gv(this);const e=Je,t=cn;Je=this,cn=!0;try{return this.fn()}finally{vv(this),Je=e,cn=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ph(e);this.deps=this.depsTail=void 0,q0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ul.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cf(this)&&this.run()}get dirty(){return Cf(this)}}let dv=0,Qs,Zs;function pv(r,e=!1){if(r.flags|=8,e){r.next=Zs,Zs=r;return}r.next=Qs,Qs=r}function Sh(){dv++}function Rh(){if(--dv>0)return;if(Zs){let e=Zs;for(Zs=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let r;for(;Qs;){let e=Qs;for(Qs=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){r||(r=n)}e=t}}if(r)throw r}function gv(r){for(let e=r.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function vv(r){let e,t=r.depsTail,n=t;for(;n;){const i=n.prevDep;n.version===-1?(n===t&&(t=i),Ph(n),j_(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}r.deps=e,r.depsTail=t}function Cf(r){for(let e=r.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(mv(e.dep.computed)||e.dep.version!==e.version))return!0;return!!r._dirty}function mv(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===da)||(r.globalVersion=da,!r.isSSR&&r.flags&128&&(!r.deps&&!r._dirty||!Cf(r))))return;r.flags|=2;const e=r.dep,t=Je,n=cn;Je=r,cn=!0;try{gv(r);const i=r.fn(r._value);(e.version===0||yi(i,r._value))&&(r.flags|=128,r._value=i,e.version++)}catch(i){throw e.version++,i}finally{Je=t,cn=n,vv(r),r.flags&=-3}}function Ph(r,e=!1){const{dep:t,prevSub:n,nextSub:i}=r;if(n&&(n.nextSub=i,r.prevSub=void 0),i&&(i.prevSub=n,r.nextSub=void 0),t.subs===r&&(t.subs=n,!n&&t.computed)){t.computed.flags&=-5;for(let o=t.computed.deps;o;o=o.nextDep)Ph(o,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function j_(r){const{prevDep:e,nextDep:t}=r;e&&(e.nextDep=t,r.prevDep=void 0),t&&(t.prevDep=e,r.nextDep=void 0)}let cn=!0;const yv=[];function jn(){yv.push(cn),cn=!1}function Gn(){const r=yv.pop();cn=r===void 0?!0:r}function q0(r){const{cleanup:e}=r;if(r.cleanup=void 0,e){const t=Je;Je=void 0;try{e()}finally{Je=t}}}let da=0;class G_{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Oh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Je||!cn||Je===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==Je)t=this.activeLink=new G_(Je,this),Je.deps?(t.prevDep=Je.depsTail,Je.depsTail.nextDep=t,Je.depsTail=t):Je.deps=Je.depsTail=t,wv(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const n=t.nextDep;n.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=n),t.prevDep=Je.depsTail,t.nextDep=void 0,Je.depsTail.nextDep=t,Je.depsTail=t,Je.deps===t&&(Je.deps=n)}return t}trigger(e){this.version++,da++,this.notify(e)}notify(e){Sh();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Rh()}}}function wv(r){if(r.dep.sc++,r.sub.flags&4){const e=r.dep.computed;if(e&&!r.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)wv(n)}const t=r.dep.subs;t!==r&&(r.prevSub=t,t&&(t.nextSub=r)),r.dep.subs=r}}const bf=new WeakMap,Zi=Symbol(""),Tf=Symbol(""),pa=Symbol("");function nr(r,e,t){if(cn&&Je){let n=bf.get(r);n||bf.set(r,n=new Map);let i=n.get(t);i||(n.set(t,i=new Oh),i.map=n,i.key=t),i.track()}}function Bn(r,e,t,n,i,o){const s=bf.get(r);if(!s){da++;return}const a=c=>{c&&c.trigger()};if(Sh(),e==="clear")s.forEach(a);else{const c=_e(r),u=c&&Ch(t);if(c&&t==="length"){const l=Number(n);s.forEach((h,d)=>{(d==="length"||d===pa||!ki(d)&&d>=l)&&a(h)})}else switch((t!==void 0||s.has(void 0))&&a(s.get(t)),u&&a(s.get(pa)),e){case"add":c?u&&a(s.get("length")):(a(s.get(Zi)),Lo(r)&&a(s.get(Tf)));break;case"delete":c||(a(s.get(Zi)),Lo(r)&&a(s.get(Tf)));break;case"set":Lo(r)&&a(s.get(Zi));break}}Rh()}function xo(r){const e=Ge(r);return e===r?e:(nr(e,"iterate",pa),Xr(r)?e:e.map(qt))}function Hu(r){return nr(r=Ge(r),"iterate",pa),r}const W_={__proto__:null,[Symbol.iterator](){return Hl(this,Symbol.iterator,qt)},concat(...r){return xo(this).concat(...r.map(e=>_e(e)?xo(e):e))},entries(){return Hl(this,"entries",r=>(r[1]=qt(r[1]),r))},every(r,e){return Mn(this,"every",r,e,void 0,arguments)},filter(r,e){return Mn(this,"filter",r,e,t=>t.map(qt),arguments)},find(r,e){return Mn(this,"find",r,e,qt,arguments)},findIndex(r,e){return Mn(this,"findIndex",r,e,void 0,arguments)},findLast(r,e){return Mn(this,"findLast",r,e,qt,arguments)},findLastIndex(r,e){return Mn(this,"findLastIndex",r,e,void 0,arguments)},forEach(r,e){return Mn(this,"forEach",r,e,void 0,arguments)},includes(...r){return $l(this,"includes",r)},indexOf(...r){return $l(this,"indexOf",r)},join(r){return xo(this).join(r)},lastIndexOf(...r){return $l(this,"lastIndexOf",r)},map(r,e){return Mn(this,"map",r,e,void 0,arguments)},pop(){return Bs(this,"pop")},push(...r){return Bs(this,"push",r)},reduce(r,...e){return X0(this,"reduce",r,e)},reduceRight(r,...e){return X0(this,"reduceRight",r,e)},shift(){return Bs(this,"shift")},some(r,e){return Mn(this,"some",r,e,void 0,arguments)},splice(...r){return Bs(this,"splice",r)},toReversed(){return xo(this).toReversed()},toSorted(r){return xo(this).toSorted(r)},toSpliced(...r){return xo(this).toSpliced(...r)},unshift(...r){return Bs(this,"unshift",r)},values(){return Hl(this,"values",qt)}};function Hl(r,e,t){const n=Hu(r),i=n[e]();return n!==r&&!Xr(r)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=t(o.value)),o}),i}const z_=Array.prototype;function Mn(r,e,t,n,i,o){const s=Hu(r),a=s!==r&&!Xr(r),c=s[e];if(c!==z_[e]){const h=c.apply(r,o);return a?qt(h):h}let u=t;s!==r&&(a?u=function(h,d){return t.call(this,qt(h),d,r)}:t.length>2&&(u=function(h,d){return t.call(this,h,d,r)}));const l=c.call(s,u,n);return a&&i?i(l):l}function X0(r,e,t,n){const i=Hu(r);let o=t;return i!==r&&(Xr(r)?t.length>3&&(o=function(s,a,c){return t.call(this,s,a,c,r)}):o=function(s,a,c){return t.call(this,s,qt(a),c,r)}),i[e](o,...n)}function $l(r,e,t){const n=Ge(r);nr(n,"iterate",pa);const i=n[e](...t);return(i===-1||i===!1)&&Mh(t[0])?(t[0]=Ge(t[0]),n[e](...t)):i}function Bs(r,e,t=[]){jn(),Sh();const n=Ge(r)[e].apply(r,t);return Rh(),Gn(),n}const q_=Eh("__proto__,__v_isRef,__isVue"),_v=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(ki));function X_(r){ki(r)||(r=String(r));const e=Ge(this);return nr(e,"has",r),e.hasOwnProperty(r)}class xv{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t==="__v_skip")return e.__v_skip;const i=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return o;if(t==="__v_raw")return n===(i?o?ix:Cv:o?Iv:Av).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const s=_e(e);if(!i){let c;if(s&&(c=W_[t]))return c;if(t==="hasOwnProperty")return X_}const a=Reflect.get(e,t,sr(e)?e:n);return(ki(t)?_v.has(t):q_(t))||(i||nr(e,"get",t),o)?a:sr(a)?s&&Ch(t)?a:a.value:ut(a)?i?Tv(a):$u(a):a}}class Ev extends xv{constructor(e=!1){super(!1,e)}set(e,t,n,i){let o=e[t];if(!this._isShallow){const c=Ti(o);if(!Xr(n)&&!Ti(n)&&(o=Ge(o),n=Ge(n)),!_e(e)&&sr(o)&&!sr(n))return c||(o.value=n),!0}const s=_e(e)&&Ch(t)?Number(t)<e.length:We(e,t),a=Reflect.set(e,t,n,sr(e)?e:i);return e===Ge(i)&&(s?yi(n,o)&&Bn(e,"set",t,n):Bn(e,"add",t,n)),a}deleteProperty(e,t){const n=We(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Bn(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!ki(t)||!_v.has(t))&&nr(e,"has",t),n}ownKeys(e){return nr(e,"iterate",_e(e)?"length":Zi),Reflect.ownKeys(e)}}class K_ extends xv{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Y_=new Ev,Q_=new K_,Z_=new Ev(!0);const Sf=r=>r,hc=r=>Reflect.getPrototypeOf(r);function J_(r,e,t){return function(...n){const i=this.__v_raw,o=Ge(i),s=Lo(o),a=r==="entries"||r===Symbol.iterator&&s,c=r==="keys"&&s,u=i[r](...n),l=t?Sf:e?zc:qt;return!e&&nr(o,"iterate",c?Tf:Zi),{next(){const{value:h,done:d}=u.next();return d?{value:h,done:d}:{value:a?[l(h[0]),l(h[1])]:l(h),done:d}},[Symbol.iterator](){return this}}}}function dc(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function ex(r,e){const t={get(i){const o=this.__v_raw,s=Ge(o),a=Ge(i);r||(yi(i,a)&&nr(s,"get",i),nr(s,"get",a));const{has:c}=hc(s),u=e?Sf:r?zc:qt;if(c.call(s,i))return u(o.get(i));if(c.call(s,a))return u(o.get(a));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!r&&nr(Ge(i),"iterate",Zi),i.size},has(i){const o=this.__v_raw,s=Ge(o),a=Ge(i);return r||(yi(i,a)&&nr(s,"has",i),nr(s,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const s=this,a=s.__v_raw,c=Ge(a),u=e?Sf:r?zc:qt;return!r&&nr(c,"iterate",Zi),a.forEach((l,h)=>i.call(o,u(l),u(h),s))}};return ar(t,r?{add:dc("add"),set:dc("set"),delete:dc("delete"),clear:dc("clear")}:{add(i){!e&&!Xr(i)&&!Ti(i)&&(i=Ge(i));const o=Ge(this);return hc(o).has.call(o,i)||(o.add(i),Bn(o,"add",i,i)),this},set(i,o){!e&&!Xr(o)&&!Ti(o)&&(o=Ge(o));const s=Ge(this),{has:a,get:c}=hc(s);let u=a.call(s,i);u||(i=Ge(i),u=a.call(s,i));const l=c.call(s,i);return s.set(i,o),u?yi(o,l)&&Bn(s,"set",i,o):Bn(s,"add",i,o),this},delete(i){const o=Ge(this),{has:s,get:a}=hc(o);let c=s.call(o,i);c||(i=Ge(i),c=s.call(o,i)),a&&a.call(o,i);const u=o.delete(i);return c&&Bn(o,"delete",i,void 0),u},clear(){const i=Ge(this),o=i.size!==0,s=i.clear();return o&&Bn(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=J_(i,r,e)}),t}function Dh(r,e){const t=ex(r,e);return(n,i,o)=>i==="__v_isReactive"?!r:i==="__v_isReadonly"?r:i==="__v_raw"?n:Reflect.get(We(t,i)&&i in n?t:n,i,o)}const tx={get:Dh(!1,!1)},rx={get:Dh(!1,!0)},nx={get:Dh(!0,!1)};const Av=new WeakMap,Iv=new WeakMap,Cv=new WeakMap,ix=new WeakMap;function ox(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function sx(r){return r.__v_skip||!Object.isExtensible(r)?0:ox(D_(r))}function $u(r){return Ti(r)?r:Nh(r,!1,Y_,tx,Av)}function bv(r){return Nh(r,!1,Z_,rx,Iv)}function Tv(r){return Nh(r,!0,Q_,nx,Cv)}function Nh(r,e,t,n,i){if(!ut(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const o=sx(r);if(o===0)return r;const s=i.get(r);if(s)return s;const a=new Proxy(r,o===2?n:t);return i.set(r,a),a}function Bo(r){return Ti(r)?Bo(r.__v_raw):!!(r&&r.__v_isReactive)}function Ti(r){return!!(r&&r.__v_isReadonly)}function Xr(r){return!!(r&&r.__v_isShallow)}function Mh(r){return r?!!r.__v_raw:!1}function Ge(r){const e=r&&r.__v_raw;return e?Ge(e):r}function ax(r){return!We(r,"__v_skip")&&Object.isExtensible(r)&&cv(r,"__v_skip",!0),r}const qt=r=>ut(r)?$u(r):r,zc=r=>ut(r)?Tv(r):r;function sr(r){return r?r.__v_isRef===!0:!1}function sn(r){return Sv(r,!1)}function cx(r){return Sv(r,!0)}function Sv(r,e){return sr(r)?r:new ux(r,e)}class ux{constructor(e,t){this.dep=new Oh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Ge(e),this._value=t?e:qt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,n=this.__v_isShallow||Xr(e)||Ti(e);e=n?e:Ge(e),yi(e,t)&&(this._rawValue=e,this._value=n?e:qt(e),this.dep.trigger())}}function yn(r){return sr(r)?r.value:r}const lx={get:(r,e,t)=>e==="__v_raw"?r:yn(Reflect.get(r,e,t)),set:(r,e,t,n)=>{const i=r[e];return sr(i)&&!sr(t)?(i.value=t,!0):Reflect.set(r,e,t,n)}};function Rv(r){return Bo(r)?r:new Proxy(r,lx)}class fx{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Oh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=da-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Je!==this)return pv(this,!0),!0}get value(){const e=this.dep.track();return mv(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function hx(r,e,t=!1){let n,i;return Ee(r)?n=r:(n=r.get,i=r.set),new fx(n,i,t)}const pc={},qc=new WeakMap;let qi;function dx(r,e=!1,t=qi){if(t){let n=qc.get(t);n||qc.set(t,n=[]),n.push(r)}}function px(r,e,t=Ze){const{immediate:n,deep:i,once:o,scheduler:s,augmentJob:a,call:c}=t,u=D=>i?D:Xr(D)||i===!1||i===0?Fn(D,1):Fn(D);let l,h,d,p,v=!1,y=!1;if(sr(r)?(h=()=>r.value,v=Xr(r)):Bo(r)?(h=()=>u(r),v=!0):_e(r)?(y=!0,v=r.some(D=>Bo(D)||Xr(D)),h=()=>r.map(D=>{if(sr(D))return D.value;if(Bo(D))return u(D);if(Ee(D))return c?c(D,2):D()})):Ee(r)?e?h=c?()=>c(r,2):r:h=()=>{if(d){jn();try{d()}finally{Gn()}}const D=qi;qi=l;try{return c?c(r,3,[p]):r(p)}finally{qi=D}}:h=_n,e&&i){const D=h,F=i===!0?1/0:i;h=()=>Fn(D(),F)}const w=$_(),_=()=>{l.stop(),w&&w.active&&Ih(w.effects,l)};if(o&&e){const D=e;e=(...F)=>{D(...F),_()}}let x=y?new Array(r.length).fill(pc):pc;const T=D=>{if(!(!(l.flags&1)||!l.dirty&&!D))if(e){const F=l.run();if(i||v||(y?F.some((H,C)=>yi(H,x[C])):yi(F,x))){d&&d();const H=qi;qi=l;try{const C=[F,x===pc?void 0:y&&x[0]===pc?[]:x,p];x=F,c?c(e,3,C):e(...C)}finally{qi=H}}}else l.run()};return a&&a(T),l=new hv(h),l.scheduler=s?()=>s(T,!1):T,p=D=>dx(D,!1,l),d=l.onStop=()=>{const D=qc.get(l);if(D){if(c)c(D,4);else for(const F of D)F();qc.delete(l)}},e?n?T(!0):x=l.run():s?s(T.bind(null,!0),!0):l.run(),_.pause=l.pause.bind(l),_.resume=l.resume.bind(l),_.stop=_,_}function Fn(r,e=1/0,t){if(e<=0||!ut(r)||r.__v_skip||(t=t||new Map,(t.get(r)||0)>=e))return r;if(t.set(r,e),e--,sr(r))Fn(r.value,e,t);else if(_e(r))for(let n=0;n<r.length;n++)Fn(r[n],e,t);else if(iv(r)||Lo(r))r.forEach(n=>{Fn(n,e,t)});else if(av(r)){for(const n in r)Fn(r[n],e,t);for(const n of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,n)&&Fn(r[n],e,t)}return r}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ra(r,e,t,n){try{return n?r(...n):r()}catch(i){ju(i,e,t)}}function Tn(r,e,t,n){if(Ee(r)){const i=Ra(r,e,t,n);return i&&ov(i)&&i.catch(o=>{ju(o,e,t)}),i}if(_e(r)){const i=[];for(let o=0;o<r.length;o++)i.push(Tn(r[o],e,t,n));return i}}function ju(r,e,t,n=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||Ze;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const l=a.ec;if(l){for(let h=0;h<l.length;h++)if(l[h](r,c,u)===!1)return}a=a.parent}if(o){jn(),Ra(o,null,10,[r,c,u]),Gn();return}}gx(r,t,i,n,s)}function gx(r,e,t,n=!0,i=!1){if(i)throw r;console.error(r)}const vr=[];let dn=-1;const Fo=[];let ai=null,Ao=0;const Pv=Promise.resolve();let Xc=null;function Ov(r){const e=Xc||Pv;return r?e.then(this?r.bind(this):r):e}function vx(r){let e=dn+1,t=vr.length;for(;e<t;){const n=e+t>>>1,i=vr[n],o=ga(i);o<r||o===r&&i.flags&2?e=n+1:t=n}return e}function kh(r){if(!(r.flags&1)){const e=ga(r),t=vr[vr.length-1];!t||!(r.flags&2)&&e>=ga(t)?vr.push(r):vr.splice(vx(e),0,r),r.flags|=1,Dv()}}function Dv(){Xc||(Xc=Pv.then(Mv))}function mx(r){_e(r)?Fo.push(...r):ai&&r.id===-1?ai.splice(Ao+1,0,r):r.flags&1||(Fo.push(r),r.flags|=1),Dv()}function K0(r,e,t=dn+1){for(;t<vr.length;t++){const n=vr[t];if(n&&n.flags&2){if(r&&n.id!==r.uid)continue;vr.splice(t,1),t--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Nv(r){if(Fo.length){const e=[...new Set(Fo)].sort((t,n)=>ga(t)-ga(n));if(Fo.length=0,ai){ai.push(...e);return}for(ai=e,Ao=0;Ao<ai.length;Ao++){const t=ai[Ao];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}ai=null,Ao=0}}const ga=r=>r.id==null?r.flags&2?-1:1/0:r.id;function Mv(r){try{for(dn=0;dn<vr.length;dn++){const e=vr[dn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ra(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;dn<vr.length;dn++){const e=vr[dn];e&&(e.flags&=-2)}dn=-1,vr.length=0,Nv(),Xc=null,(vr.length||Fo.length)&&Mv()}}let Nr=null,kv=null;function Kc(r){const e=Nr;return Nr=r,kv=r&&r.type.__scopeId||null,e}function Js(r,e=Nr,t){if(!e||r._n)return r;const n=(...i)=>{n._d&&Zc(-1);const o=Kc(e);let s;try{s=r(...i)}finally{Kc(o),n._d&&Zc(1)}return s};return n._n=!0,n._c=!0,n._d=!0,n}function jr(r,e){if(Nr===null)return r;const t=Xu(Nr),n=r.dirs||(r.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,a,c=Ze]=e[i];o&&(Ee(o)&&(o={mounted:o,updated:o}),o.deep&&Fn(s),n.push({dir:o,instance:t,value:s,oldValue:void 0,arg:a,modifiers:c}))}return r}function $i(r,e,t,n){const i=r.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let c=a.dir[n];c&&(jn(),Tn(c,t,8,[r.el,a,r,e]),Gn())}}const yx=Symbol("_vte"),wx=r=>r.__isTeleport,_x=Symbol("_leaveCb");function Lh(r,e){r.shapeFlag&6&&r.component?(r.transition=e,Lh(r.component.subTree,e)):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function ls(r,e){return Ee(r)?ar({name:r.name},e,{setup:r}):r}function Lv(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}const Yc=new WeakMap;function ea(r,e,t,n,i=!1){if(_e(r)){r.forEach((v,y)=>ea(v,e&&(_e(e)?e[y]:e),t,n,i));return}if(ta(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ea(r,e,t,n.component.subTree);return}const o=n.shapeFlag&4?Xu(n.component):n.el,s=i?null:o,{i:a,r:c}=r,u=e&&e.r,l=a.refs===Ze?a.refs={}:a.refs,h=a.setupState,d=Ge(h),p=h===Ze?nv:v=>We(d,v);if(u!=null&&u!==c){if(Y0(e),It(u))l[u]=null,p(u)&&(h[u]=null);else if(sr(u)){u.value=null;const v=e;v.k&&(l[v.k]=null)}}if(Ee(c))Ra(c,a,12,[s,l]);else{const v=It(c),y=sr(c);if(v||y){const w=()=>{if(r.f){const _=v?p(c)?h[c]:l[c]:c.value;if(i)_e(_)&&Ih(_,o);else if(_e(_))_.includes(o)||_.push(o);else if(v)l[c]=[o],p(c)&&(h[c]=l[c]);else{const x=[o];c.value=x,r.k&&(l[r.k]=x)}}else v?(l[c]=s,p(c)&&(h[c]=s)):y&&(c.value=s,r.k&&(l[r.k]=s))};if(s){const _=()=>{w(),Yc.delete(r)};_.id=-1,Yc.set(r,_),Dr(_,t)}else Y0(r),w()}}}function Y0(r){const e=Yc.get(r);e&&(e.flags|=8,Yc.delete(r))}Uu().requestIdleCallback;Uu().cancelIdleCallback;const ta=r=>!!r.type.__asyncLoader,Bv=r=>r.type.__isKeepAlive;function xx(r,e){Fv(r,"a",e)}function Ex(r,e){Fv(r,"da",e)}function Fv(r,e,t=or){const n=r.__wdc||(r.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return r()});if(Gu(e,n,t),t){let i=t.parent;for(;i&&i.parent;)Bv(i.parent.vnode)&&Ax(n,e,t,i),i=i.parent}}function Ax(r,e,t,n){const i=Gu(e,r,n,!0);Vv(()=>{Ih(n[e],i)},t)}function Gu(r,e,t=or,n=!1){if(t){const i=t[r]||(t[r]=[]),o=e.__weh||(e.__weh=(...s)=>{jn();const a=Pa(t),c=Tn(e,t,r,s);return a(),Gn(),c});return n?i.unshift(o):i.push(o),o}}const Yn=r=>(e,t=or)=>{(!ma||r==="sp")&&Gu(r,(...n)=>e(...n),t)},Ix=Yn("bm"),Wu=Yn("m"),Cx=Yn("bu"),bx=Yn("u"),Tx=Yn("bum"),Vv=Yn("um"),Sx=Yn("sp"),Rx=Yn("rtg"),Px=Yn("rtc");function Ox(r,e=or){Gu("ec",r,e)}const Dx="components";function Nx(r,e){return kx(Dx,r,!0,e)||r}const Mx=Symbol.for("v-ndc");function kx(r,e,t=!0,n=!1){const i=Nr||or;if(i){const o=i.type;{const a=AE(o,!1);if(a&&(a===e||a===Yr(e)||a===Vu(Yr(e))))return o}const s=Q0(i[r]||o[r],e)||Q0(i.appContext[r],e);return!s&&n?o:s}}function Q0(r,e){return r&&(r[e]||r[Yr(e)]||r[Vu(Yr(e))])}function Uv(r,e,t,n){let i;const o=t,s=_e(r);if(s||It(r)){const a=s&&Bo(r);let c=!1,u=!1;a&&(c=!Xr(r),u=Ti(r),r=Hu(r)),i=new Array(r.length);for(let l=0,h=r.length;l<h;l++)i[l]=e(c?u?zc(qt(r[l])):qt(r[l]):r[l],l,void 0,o)}else if(typeof r=="number"){i=new Array(r);for(let a=0;a<r;a++)i[a]=e(a+1,a,void 0,o)}else if(ut(r))if(r[Symbol.iterator])i=Array.from(r,(a,c)=>e(a,c,void 0,o));else{const a=Object.keys(r);i=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const l=a[c];i[c]=e(r[l],l,c,o)}}else i=[];return i}const Rf=r=>r?cm(r)?Xu(r):Rf(r.parent):null,ra=ar(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>Rf(r.parent),$root:r=>Rf(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>$v(r),$forceUpdate:r=>r.f||(r.f=()=>{kh(r.update)}),$nextTick:r=>r.n||(r.n=Ov.bind(r.proxy)),$watch:r=>rE.bind(r)}),jl=(r,e)=>r!==Ze&&!r.__isScriptSetup&&We(r,e),Lx={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:o,accessCache:s,type:a,appContext:c}=r;let u;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return o[e]}else{if(jl(n,e))return s[e]=1,n[e];if(i!==Ze&&We(i,e))return s[e]=2,i[e];if((u=r.propsOptions[0])&&We(u,e))return s[e]=3,o[e];if(t!==Ze&&We(t,e))return s[e]=4,t[e];Pf&&(s[e]=0)}}const l=ra[e];let h,d;if(l)return e==="$attrs"&&nr(r.attrs,"get",""),l(r);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Ze&&We(t,e))return s[e]=4,t[e];if(d=c.config.globalProperties,We(d,e))return d[e]},set({_:r},e,t){const{data:n,setupState:i,ctx:o}=r;return jl(i,e)?(i[e]=t,!0):n!==Ze&&We(n,e)?(n[e]=t,!0):We(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(o[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:o,type:s}},a){let c,u;return!!(t[a]||r!==Ze&&a[0]!=="$"&&We(r,a)||jl(e,a)||(c=o[0])&&We(c,a)||We(n,a)||We(ra,a)||We(i.config.globalProperties,a)||(u=s.__cssModules)&&u[a])},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:We(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function Z0(r){return _e(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let Pf=!0;function Bx(r){const e=$v(r),t=r.proxy,n=r.ctx;Pf=!1,e.beforeCreate&&J0(e.beforeCreate,r,"bc");const{data:i,computed:o,methods:s,watch:a,provide:c,inject:u,created:l,beforeMount:h,mounted:d,beforeUpdate:p,updated:v,activated:y,deactivated:w,beforeDestroy:_,beforeUnmount:x,destroyed:T,unmounted:D,render:F,renderTracked:H,renderTriggered:C,errorCaptured:A,serverPrefetch:b,expose:P,inheritAttrs:N,components:M,directives:S,filters:Ke}=e;if(u&&Fx(u,n,null),s)for(const be in s){const Ie=s[be];Ee(Ie)&&(n[be]=Ie.bind(t))}if(i){const be=i.call(t,t);ut(be)&&(r.data=$u(be))}if(Pf=!0,o)for(const be in o){const Ie=o[be],Pr=Ee(Ie)?Ie.bind(t,t):Ee(Ie.get)?Ie.get.bind(t,t):_n,Zr=!Ee(Ie)&&Ee(Ie.set)?Ie.set.bind(t):_n,Vr=rn({get:Pr,set:Zr});Object.defineProperty(n,be,{enumerable:!0,configurable:!0,get:()=>Vr.value,set:lt=>Vr.value=lt})}if(a)for(const be in a)Hv(a[be],n,t,be);if(c){const be=Ee(c)?c.call(t):c;Reflect.ownKeys(be).forEach(Ie=>{Rc(Ie,be[Ie])})}l&&J0(l,r,"c");function ct(be,Ie){_e(Ie)?Ie.forEach(Pr=>be(Pr.bind(t))):Ie&&be(Ie.bind(t))}if(ct(Ix,h),ct(Wu,d),ct(Cx,p),ct(bx,v),ct(xx,y),ct(Ex,w),ct(Ox,A),ct(Px,H),ct(Rx,C),ct(Tx,x),ct(Vv,D),ct(Sx,b),_e(P))if(P.length){const be=r.exposed||(r.exposed={});P.forEach(Ie=>{Object.defineProperty(be,Ie,{get:()=>t[Ie],set:Pr=>t[Ie]=Pr,enumerable:!0})})}else r.exposed||(r.exposed={});F&&r.render===_n&&(r.render=F),N!=null&&(r.inheritAttrs=N),M&&(r.components=M),S&&(r.directives=S),b&&Lv(r)}function Fx(r,e,t=_n){_e(r)&&(r=Of(r));for(const n in r){const i=r[n];let o;ut(i)?"default"in i?o=Hn(i.from||n,i.default,!0):o=Hn(i.from||n):o=Hn(i),sr(o)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[n]=o}}function J0(r,e,t){Tn(_e(r)?r.map(n=>n.bind(e.proxy)):r.bind(e.proxy),e,t)}function Hv(r,e,t,n){let i=n.includes(".")?tm(t,n):()=>t[n];if(It(r)){const o=e[r];Ee(o)&&Uo(i,o)}else if(Ee(r))Uo(i,r.bind(t));else if(ut(r))if(_e(r))r.forEach(o=>Hv(o,e,t,n));else{const o=Ee(r.handler)?r.handler.bind(t):e[r.handler];Ee(o)&&Uo(i,o,r)}}function $v(r){const e=r.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=r.appContext,a=o.get(e);let c;return a?c=a:!i.length&&!t&&!n?c=e:(c={},i.length&&i.forEach(u=>Qc(c,u,s,!0)),Qc(c,e,s)),ut(e)&&o.set(e,c),c}function Qc(r,e,t,n=!1){const{mixins:i,extends:o}=e;o&&Qc(r,o,t,!0),i&&i.forEach(s=>Qc(r,s,t,!0));for(const s in e)if(!(n&&s==="expose")){const a=Vx[s]||t&&t[s];r[s]=a?a(r[s],e[s]):e[s]}return r}const Vx={data:e1,props:t1,emits:t1,methods:js,computed:js,beforeCreate:pr,created:pr,beforeMount:pr,mounted:pr,beforeUpdate:pr,updated:pr,beforeDestroy:pr,beforeUnmount:pr,destroyed:pr,unmounted:pr,activated:pr,deactivated:pr,errorCaptured:pr,serverPrefetch:pr,components:js,directives:js,watch:Hx,provide:e1,inject:Ux};function e1(r,e){return e?r?function(){return ar(Ee(r)?r.call(this,this):r,Ee(e)?e.call(this,this):e)}:e:r}function Ux(r,e){return js(Of(r),Of(e))}function Of(r){if(_e(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function pr(r,e){return r?[...new Set([].concat(r,e))]:e}function js(r,e){return r?ar(Object.create(null),r,e):e}function t1(r,e){return r?_e(r)&&_e(e)?[...new Set([...r,...e])]:ar(Object.create(null),Z0(r),Z0(e??{})):e}function Hx(r,e){if(!r)return e;if(!e)return r;const t=ar(Object.create(null),r);for(const n in e)t[n]=pr(r[n],e[n]);return t}function jv(){return{app:null,config:{isNativeTag:nv,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $x=0;function jx(r,e){return function(n,i=null){Ee(n)||(n=ar({},n)),i!=null&&!ut(i)&&(i=null);const o=jv(),s=new WeakSet,a=[];let c=!1;const u=o.app={_uid:$x++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:CE,get config(){return o.config},set config(l){},use(l,...h){return s.has(l)||(l&&Ee(l.install)?(s.add(l),l.install(u,...h)):Ee(l)&&(s.add(l),l(u,...h))),u},mixin(l){return o.mixins.includes(l)||o.mixins.push(l),u},component(l,h){return h?(o.components[l]=h,u):o.components[l]},directive(l,h){return h?(o.directives[l]=h,u):o.directives[l]},mount(l,h,d){if(!c){const p=u._ceVNode||mr(n,i);return p.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),r(p,l,d),c=!0,u._container=l,l.__vue_app__=u,Xu(p.component)}},onUnmount(l){a.push(l)},unmount(){c&&(Tn(a,u._instance,16),r(null,u._container),delete u._container.__vue_app__)},provide(l,h){return o.provides[l]=h,u},runWithContext(l){const h=Vo;Vo=u;try{return l()}finally{Vo=h}}};return u}}let Vo=null;function Rc(r,e){if(or){let t=or.provides;const n=or.parent&&or.parent.provides;n===t&&(t=or.provides=Object.create(n)),t[r]=e}}function Hn(r,e,t=!1){const n=yE();if(n||Vo){let i=Vo?Vo._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&r in i)return i[r];if(arguments.length>1)return t&&Ee(e)?e.call(n&&n.proxy):e}}const Gv={},Wv=()=>Object.create(Gv),zv=r=>Object.getPrototypeOf(r)===Gv;function Gx(r,e,t,n=!1){const i={},o=Wv();r.propsDefaults=Object.create(null),qv(r,e,i,o);for(const s in r.propsOptions[0])s in i||(i[s]=void 0);t?r.props=n?i:bv(i):r.type.props?r.props=i:r.props=o,r.attrs=o}function Wx(r,e,t,n){const{props:i,attrs:o,vnode:{patchFlag:s}}=r,a=Ge(i),[c]=r.propsOptions;let u=!1;if((n||s>0)&&!(s&16)){if(s&8){const l=r.vnode.dynamicProps;for(let h=0;h<l.length;h++){let d=l[h];if(zu(r.emitsOptions,d))continue;const p=e[d];if(c)if(We(o,d))p!==o[d]&&(o[d]=p,u=!0);else{const v=Yr(d);i[v]=Df(c,a,v,p,r,!1)}else p!==o[d]&&(o[d]=p,u=!0)}}}else{qv(r,e,i,o)&&(u=!0);let l;for(const h in a)(!e||!We(e,h)&&((l=lo(h))===h||!We(e,l)))&&(c?t&&(t[h]!==void 0||t[l]!==void 0)&&(i[h]=Df(c,a,h,void 0,r,!0)):delete i[h]);if(o!==a)for(const h in o)(!e||!We(e,h))&&(delete o[h],u=!0)}u&&Bn(r.attrs,"set","")}function qv(r,e,t,n){const[i,o]=r.propsOptions;let s=!1,a;if(e)for(let c in e){if(Ys(c))continue;const u=e[c];let l;i&&We(i,l=Yr(c))?!o||!o.includes(l)?t[l]=u:(a||(a={}))[l]=u:zu(r.emitsOptions,c)||(!(c in n)||u!==n[c])&&(n[c]=u,s=!0)}if(o){const c=Ge(t),u=a||Ze;for(let l=0;l<o.length;l++){const h=o[l];t[h]=Df(i,c,h,u[h],r,!We(u,h))}}return s}function Df(r,e,t,n,i,o){const s=r[t];if(s!=null){const a=We(s,"default");if(a&&n===void 0){const c=s.default;if(s.type!==Function&&!s.skipFactory&&Ee(c)){const{propsDefaults:u}=i;if(t in u)n=u[t];else{const l=Pa(i);n=u[t]=c.call(null,e),l()}}else n=c;i.ce&&i.ce._setProp(t,n)}s[0]&&(o&&!a?n=!1:s[1]&&(n===""||n===lo(t))&&(n=!0))}return n}const zx=new WeakMap;function Xv(r,e,t=!1){const n=t?zx:e.propsCache,i=n.get(r);if(i)return i;const o=r.props,s={},a=[];let c=!1;if(!Ee(r)){const l=h=>{c=!0;const[d,p]=Xv(h,e,!0);ar(s,d),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}if(!o&&!c)return ut(r)&&n.set(r,ko),ko;if(_e(o))for(let l=0;l<o.length;l++){const h=Yr(o[l]);r1(h)&&(s[h]=Ze)}else if(o)for(const l in o){const h=Yr(l);if(r1(h)){const d=o[l],p=s[h]=_e(d)||Ee(d)?{type:d}:ar({},d),v=p.type;let y=!1,w=!0;if(_e(v))for(let _=0;_<v.length;++_){const x=v[_],T=Ee(x)&&x.name;if(T==="Boolean"){y=!0;break}else T==="String"&&(w=!1)}else y=Ee(v)&&v.name==="Boolean";p[0]=y,p[1]=w,(y||We(p,"default"))&&a.push(h)}}const u=[s,a];return ut(r)&&n.set(r,u),u}function r1(r){return r[0]!=="$"&&!Ys(r)}const Bh=r=>r==="_"||r==="_ctx"||r==="$stable",Fh=r=>_e(r)?r.map(vn):[vn(r)],qx=(r,e,t)=>{if(e._n)return e;const n=Js((...i)=>Fh(e(...i)),t);return n._c=!1,n},Kv=(r,e,t)=>{const n=r._ctx;for(const i in r){if(Bh(i))continue;const o=r[i];if(Ee(o))e[i]=qx(i,o,n);else if(o!=null){const s=Fh(o);e[i]=()=>s}}},Yv=(r,e)=>{const t=Fh(e);r.slots.default=()=>t},Qv=(r,e,t)=>{for(const n in e)(t||!Bh(n))&&(r[n]=e[n])},Xx=(r,e,t)=>{const n=r.slots=Wv();if(r.vnode.shapeFlag&32){const i=e._;i?(Qv(n,e,t),t&&cv(n,"_",i,!0)):Kv(e,n)}else e&&Yv(r,e)},Kx=(r,e,t)=>{const{vnode:n,slots:i}=r;let o=!0,s=Ze;if(n.shapeFlag&32){const a=e._;a?t&&a===1?o=!1:Qv(i,e,t):(o=!e.$stable,Kv(e,i)),s=e}else e&&(Yv(r,e),s={default:1});if(o)for(const a in i)!Bh(a)&&s[a]==null&&delete i[a]},Dr=lE;function Yx(r){return Qx(r)}function Qx(r,e){const t=Uu();t.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:s,createText:a,createComment:c,setText:u,setElementText:l,parentNode:h,nextSibling:d,setScopeId:p=_n,insertStaticContent:v}=r,y=(R,O,k,G=null,q=null,W=null,te=void 0,J=null,Q=!!O.dynamicChildren)=>{if(R===O)return;R&&!Fs(R,O)&&(G=j(R),lt(R,q,W,!0),R=null),O.patchFlag===-2&&(Q=!1,O.dynamicChildren=null);const{type:Y,ref:de,shapeFlag:ne}=O;switch(Y){case qu:w(R,O,k,G);break;case Si:_(R,O,k,G);break;case Wl:R==null&&x(O,k,G,te);break;case tn:M(R,O,k,G,q,W,te,J,Q);break;default:ne&1?F(R,O,k,G,q,W,te,J,Q):ne&6?S(R,O,k,G,q,W,te,J,Q):(ne&64||ne&128)&&Y.process(R,O,k,G,q,W,te,J,Q,se)}de!=null&&q?ea(de,R&&R.ref,W,O||R,!O):de==null&&R&&R.ref!=null&&ea(R.ref,null,W,R,!0)},w=(R,O,k,G)=>{if(R==null)n(O.el=a(O.children),k,G);else{const q=O.el=R.el;O.children!==R.children&&u(q,O.children)}},_=(R,O,k,G)=>{R==null?n(O.el=c(O.children||""),k,G):O.el=R.el},x=(R,O,k,G)=>{[R.el,R.anchor]=v(R.children,O,k,G,R.el,R.anchor)},T=({el:R,anchor:O},k,G)=>{let q;for(;R&&R!==O;)q=d(R),n(R,k,G),R=q;n(O,k,G)},D=({el:R,anchor:O})=>{let k;for(;R&&R!==O;)k=d(R),i(R),R=k;i(O)},F=(R,O,k,G,q,W,te,J,Q)=>{O.type==="svg"?te="svg":O.type==="math"&&(te="mathml"),R==null?H(O,k,G,q,W,te,J,Q):b(R,O,q,W,te,J,Q)},H=(R,O,k,G,q,W,te,J)=>{let Q,Y;const{props:de,shapeFlag:ne,transition:ue,dirs:me}=R;if(Q=R.el=s(R.type,W,de&&de.is,de),ne&8?l(Q,R.children):ne&16&&A(R.children,Q,null,G,q,Gl(R,W),te,J),me&&$i(R,null,G,"created"),C(Q,R,R.scopeId,te,G),de){for(const Ae in de)Ae!=="value"&&!Ys(Ae)&&o(Q,Ae,null,de[Ae],W,G);"value"in de&&o(Q,"value",null,de.value,W),(Y=de.onVnodeBeforeMount)&&hn(Y,G,R)}me&&$i(R,null,G,"beforeMount");const ge=Zx(q,ue);ge&&ue.beforeEnter(Q),n(Q,O,k),((Y=de&&de.onVnodeMounted)||ge||me)&&Dr(()=>{Y&&hn(Y,G,R),ge&&ue.enter(Q),me&&$i(R,null,G,"mounted")},q)},C=(R,O,k,G,q)=>{if(k&&p(R,k),G)for(let W=0;W<G.length;W++)p(R,G[W]);if(q){let W=q.subTree;if(O===W||nm(W.type)&&(W.ssContent===O||W.ssFallback===O)){const te=q.vnode;C(R,te,te.scopeId,te.slotScopeIds,q.parent)}}},A=(R,O,k,G,q,W,te,J,Q=0)=>{for(let Y=Q;Y<R.length;Y++){const de=R[Y]=J?ci(R[Y]):vn(R[Y]);y(null,de,O,k,G,q,W,te,J)}},b=(R,O,k,G,q,W,te)=>{const J=O.el=R.el;let{patchFlag:Q,dynamicChildren:Y,dirs:de}=O;Q|=R.patchFlag&16;const ne=R.props||Ze,ue=O.props||Ze;let me;if(k&&ji(k,!1),(me=ue.onVnodeBeforeUpdate)&&hn(me,k,O,R),de&&$i(O,R,k,"beforeUpdate"),k&&ji(k,!0),(ne.innerHTML&&ue.innerHTML==null||ne.textContent&&ue.textContent==null)&&l(J,""),Y?P(R.dynamicChildren,Y,J,k,G,Gl(O,q),W):te||Ie(R,O,J,null,k,G,Gl(O,q),W,!1),Q>0){if(Q&16)N(J,ne,ue,k,q);else if(Q&2&&ne.class!==ue.class&&o(J,"class",null,ue.class,q),Q&4&&o(J,"style",ne.style,ue.style,q),Q&8){const ge=O.dynamicProps;for(let Ae=0;Ae<ge.length;Ae++){const Oe=ge[Ae],Ut=ne[Oe],Ht=ue[Oe];(Ht!==Ut||Oe==="value")&&o(J,Oe,Ut,Ht,q,k)}}Q&1&&R.children!==O.children&&l(J,O.children)}else!te&&Y==null&&N(J,ne,ue,k,q);((me=ue.onVnodeUpdated)||de)&&Dr(()=>{me&&hn(me,k,O,R),de&&$i(O,R,k,"updated")},G)},P=(R,O,k,G,q,W,te)=>{for(let J=0;J<O.length;J++){const Q=R[J],Y=O[J],de=Q.el&&(Q.type===tn||!Fs(Q,Y)||Q.shapeFlag&198)?h(Q.el):k;y(Q,Y,de,null,G,q,W,te,!0)}},N=(R,O,k,G,q)=>{if(O!==k){if(O!==Ze)for(const W in O)!Ys(W)&&!(W in k)&&o(R,W,O[W],null,q,G);for(const W in k){if(Ys(W))continue;const te=k[W],J=O[W];te!==J&&W!=="value"&&o(R,W,J,te,q,G)}"value"in k&&o(R,"value",O.value,k.value,q)}},M=(R,O,k,G,q,W,te,J,Q)=>{const Y=O.el=R?R.el:a(""),de=O.anchor=R?R.anchor:a("");let{patchFlag:ne,dynamicChildren:ue,slotScopeIds:me}=O;me&&(J=J?J.concat(me):me),R==null?(n(Y,k,G),n(de,k,G),A(O.children||[],k,de,q,W,te,J,Q)):ne>0&&ne&64&&ue&&R.dynamicChildren?(P(R.dynamicChildren,ue,k,q,W,te,J),(O.key!=null||q&&O===q.subTree)&&Zv(R,O,!0)):Ie(R,O,k,de,q,W,te,J,Q)},S=(R,O,k,G,q,W,te,J,Q)=>{O.slotScopeIds=J,R==null?O.shapeFlag&512?q.ctx.activate(O,k,G,te,Q):Ke(O,k,G,q,W,te,Q):vt(R,O,Q)},Ke=(R,O,k,G,q,W,te)=>{const J=R.component=mE(R,G,q);if(Bv(R)&&(J.ctx.renderer=se),wE(J,!1,te),J.asyncDep){if(q&&q.registerDep(J,ct,te),!R.el){const Q=J.subTree=mr(Si);_(null,Q,O,k),R.placeholder=Q.el}}else ct(J,R,O,k,q,W,te)},vt=(R,O,k)=>{const G=O.component=R.component;if(cE(R,O,k))if(G.asyncDep&&!G.asyncResolved){be(G,O,k);return}else G.next=O,G.update();else O.el=R.el,G.vnode=O},ct=(R,O,k,G,q,W,te)=>{const J=()=>{if(R.isMounted){let{next:ne,bu:ue,u:me,parent:ge,vnode:Ae}=R;{const Qt=Jv(R);if(Qt){ne&&(ne.el=Ae.el,be(R,ne,te)),Qt.asyncDep.then(()=>{R.isUnmounted||J()});return}}let Oe=ne,Ut;ji(R,!1),ne?(ne.el=Ae.el,be(R,ne,te)):ne=Ae,ue&&Sc(ue),(Ut=ne.props&&ne.props.onVnodeBeforeUpdate)&&hn(Ut,ge,ne,Ae),ji(R,!0);const Ht=i1(R),Ur=R.subTree;R.subTree=Ht,y(Ur,Ht,h(Ur.el),j(Ur),R,q,W),ne.el=Ht.el,Oe===null&&uE(R,Ht.el),me&&Dr(me,q),(Ut=ne.props&&ne.props.onVnodeUpdated)&&Dr(()=>hn(Ut,ge,ne,Ae),q)}else{let ne;const{el:ue,props:me}=O,{bm:ge,m:Ae,parent:Oe,root:Ut,type:Ht}=R,Ur=ta(O);ji(R,!1),ge&&Sc(ge),!Ur&&(ne=me&&me.onVnodeBeforeMount)&&hn(ne,Oe,O),ji(R,!0);{Ut.ce&&Ut.ce._def.shadowRoot!==!1&&Ut.ce._injectChildStyle(Ht);const Qt=R.subTree=i1(R);y(null,Qt,k,G,R,q,W),O.el=Qt.el}if(Ae&&Dr(Ae,q),!Ur&&(ne=me&&me.onVnodeMounted)){const Qt=O;Dr(()=>hn(ne,Oe,Qt),q)}(O.shapeFlag&256||Oe&&ta(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&R.a&&Dr(R.a,q),R.isMounted=!0,O=k=G=null}};R.scope.on();const Q=R.effect=new hv(J);R.scope.off();const Y=R.update=Q.run.bind(Q),de=R.job=Q.runIfDirty.bind(Q);de.i=R,de.id=R.uid,Q.scheduler=()=>kh(de),ji(R,!0),Y()},be=(R,O,k)=>{O.component=R;const G=R.vnode.props;R.vnode=O,R.next=null,Wx(R,O.props,G,k),Kx(R,O.children,k),jn(),K0(R),Gn()},Ie=(R,O,k,G,q,W,te,J,Q=!1)=>{const Y=R&&R.children,de=R?R.shapeFlag:0,ne=O.children,{patchFlag:ue,shapeFlag:me}=O;if(ue>0){if(ue&128){Zr(Y,ne,k,G,q,W,te,J,Q);return}else if(ue&256){Pr(Y,ne,k,G,q,W,te,J,Q);return}}me&8?(de&16&&_r(Y,q,W),ne!==Y&&l(k,ne)):de&16?me&16?Zr(Y,ne,k,G,q,W,te,J,Q):_r(Y,q,W,!0):(de&8&&l(k,""),me&16&&A(ne,k,G,q,W,te,J,Q))},Pr=(R,O,k,G,q,W,te,J,Q)=>{R=R||ko,O=O||ko;const Y=R.length,de=O.length,ne=Math.min(Y,de);let ue;for(ue=0;ue<ne;ue++){const me=O[ue]=Q?ci(O[ue]):vn(O[ue]);y(R[ue],me,k,null,q,W,te,J,Q)}Y>de?_r(R,q,W,!0,!1,ne):A(O,k,G,q,W,te,J,Q,ne)},Zr=(R,O,k,G,q,W,te,J,Q)=>{let Y=0;const de=O.length;let ne=R.length-1,ue=de-1;for(;Y<=ne&&Y<=ue;){const me=R[Y],ge=O[Y]=Q?ci(O[Y]):vn(O[Y]);if(Fs(me,ge))y(me,ge,k,null,q,W,te,J,Q);else break;Y++}for(;Y<=ne&&Y<=ue;){const me=R[ne],ge=O[ue]=Q?ci(O[ue]):vn(O[ue]);if(Fs(me,ge))y(me,ge,k,null,q,W,te,J,Q);else break;ne--,ue--}if(Y>ne){if(Y<=ue){const me=ue+1,ge=me<de?O[me].el:G;for(;Y<=ue;)y(null,O[Y]=Q?ci(O[Y]):vn(O[Y]),k,ge,q,W,te,J,Q),Y++}}else if(Y>ue)for(;Y<=ne;)lt(R[Y],q,W,!0),Y++;else{const me=Y,ge=Y,Ae=new Map;for(Y=ge;Y<=ue;Y++){const $t=O[Y]=Q?ci(O[Y]):vn(O[Y]);$t.key!=null&&Ae.set($t.key,Y)}let Oe,Ut=0;const Ht=ue-ge+1;let Ur=!1,Qt=0;const Jn=new Array(Ht);for(Y=0;Y<Ht;Y++)Jn[Y]=0;for(Y=me;Y<=ne;Y++){const $t=R[Y];if(Ut>=Ht){lt($t,q,W,!0);continue}let Hr;if($t.key!=null)Hr=Ae.get($t.key);else for(Oe=ge;Oe<=ue;Oe++)if(Jn[Oe-ge]===0&&Fs($t,O[Oe])){Hr=Oe;break}Hr===void 0?lt($t,q,W,!0):(Jn[Hr-ge]=Y+1,Hr>=Qt?Qt=Hr:Ur=!0,y($t,O[Hr],k,null,q,W,te,J,Q),Ut++)}const Is=Ur?Jx(Jn):ko;for(Oe=Is.length-1,Y=Ht-1;Y>=0;Y--){const $t=ge+Y,Hr=O[$t],Ya=O[$t+1],vo=$t+1<de?Ya.el||Ya.placeholder:G;Jn[Y]===0?y(null,Hr,k,vo,q,W,te,J,Q):Ur&&(Oe<0||Y!==Is[Oe]?Vr(Hr,k,vo,2):Oe--)}}},Vr=(R,O,k,G,q=null)=>{const{el:W,type:te,transition:J,children:Q,shapeFlag:Y}=R;if(Y&6){Vr(R.component.subTree,O,k,G);return}if(Y&128){R.suspense.move(O,k,G);return}if(Y&64){te.move(R,O,k,se);return}if(te===tn){n(W,O,k);for(let ne=0;ne<Q.length;ne++)Vr(Q[ne],O,k,G);n(R.anchor,O,k);return}if(te===Wl){T(R,O,k);return}if(G!==2&&Y&1&&J)if(G===0)J.beforeEnter(W),n(W,O,k),Dr(()=>J.enter(W),q);else{const{leave:ne,delayLeave:ue,afterLeave:me}=J,ge=()=>{R.ctx.isUnmounted?i(W):n(W,O,k)},Ae=()=>{W._isLeaving&&W[_x](!0),ne(W,()=>{ge(),me&&me()})};ue?ue(W,ge,Ae):Ae()}else n(W,O,k)},lt=(R,O,k,G=!1,q=!1)=>{const{type:W,props:te,ref:J,children:Q,dynamicChildren:Y,shapeFlag:de,patchFlag:ne,dirs:ue,cacheIndex:me}=R;if(ne===-2&&(q=!1),J!=null&&(jn(),ea(J,null,k,R,!0),Gn()),me!=null&&(O.renderCache[me]=void 0),de&256){O.ctx.deactivate(R);return}const ge=de&1&&ue,Ae=!ta(R);let Oe;if(Ae&&(Oe=te&&te.onVnodeBeforeUnmount)&&hn(Oe,O,R),de&6)fn(R.component,k,G);else{if(de&128){R.suspense.unmount(k,G);return}ge&&$i(R,null,O,"beforeUnmount"),de&64?R.type.remove(R,O,k,se,G):Y&&!Y.hasOnce&&(W!==tn||ne>0&&ne&64)?_r(Y,O,k,!1,!0):(W===tn&&ne&384||!q&&de&16)&&_r(Q,O,k),G&&ft(R)}(Ae&&(Oe=te&&te.onVnodeUnmounted)||ge)&&Dr(()=>{Oe&&hn(Oe,O,R),ge&&$i(R,null,O,"unmounted")},k)},ft=R=>{const{type:O,el:k,anchor:G,transition:q}=R;if(O===tn){Zn(k,G);return}if(O===Wl){D(R);return}const W=()=>{i(k),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(R.shapeFlag&1&&q&&!q.persisted){const{leave:te,delayLeave:J}=q,Q=()=>te(k,W);J?J(R.el,W,Q):Q()}else W()},Zn=(R,O)=>{let k;for(;R!==O;)k=d(R),i(R),R=k;i(O)},fn=(R,O,k)=>{const{bum:G,scope:q,job:W,subTree:te,um:J,m:Q,a:Y}=R;n1(Q),n1(Y),G&&Sc(G),q.stop(),W&&(W.flags|=8,lt(te,R,O,k)),J&&Dr(J,O),Dr(()=>{R.isUnmounted=!0},O)},_r=(R,O,k,G=!1,q=!1,W=0)=>{for(let te=W;te<R.length;te++)lt(R[te],O,k,G,q)},j=R=>{if(R.shapeFlag&6)return j(R.component.subTree);if(R.shapeFlag&128)return R.suspense.next();const O=d(R.anchor||R.el),k=O&&O[yx];return k?d(k):O};let ie=!1;const re=(R,O,k)=>{R==null?O._vnode&&lt(O._vnode,null,null,!0):y(O._vnode||null,R,O,null,null,null,k),O._vnode=R,ie||(ie=!0,K0(),Nv(),ie=!1)},se={p:y,um:lt,m:Vr,r:ft,mt:Ke,mc:A,pc:Ie,pbc:P,n:j,o:r};return{render:re,hydrate:void 0,createApp:jx(re)}}function Gl({type:r,props:e},t){return t==="svg"&&r==="foreignObject"||t==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function ji({effect:r,job:e},t){t?(r.flags|=32,e.flags|=4):(r.flags&=-33,e.flags&=-5)}function Zx(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function Zv(r,e,t=!1){const n=r.children,i=e.children;if(_e(n)&&_e(i))for(let o=0;o<n.length;o++){const s=n[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=ci(i[o]),a.el=s.el),!t&&a.patchFlag!==-2&&Zv(s,a)),a.type===qu&&a.patchFlag!==-1&&(a.el=s.el),a.type===Si&&!a.el&&(a.el=s.el)}}function Jx(r){const e=r.slice(),t=[0];let n,i,o,s,a;const c=r.length;for(n=0;n<c;n++){const u=r[n];if(u!==0){if(i=t[t.length-1],r[i]<u){e[n]=i,t.push(n);continue}for(o=0,s=t.length-1;o<s;)a=o+s>>1,r[t[a]]<u?o=a+1:s=a;u<r[t[o]]&&(o>0&&(e[n]=t[o-1]),t[o]=n)}}for(o=t.length,s=t[o-1];o-- >0;)t[o]=s,s=e[s];return t}function Jv(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Jv(e)}function n1(r){if(r)for(let e=0;e<r.length;e++)r[e].flags|=8}const eE=Symbol.for("v-scx"),tE=()=>Hn(eE);function Uo(r,e,t){return em(r,e,t)}function em(r,e,t=Ze){const{immediate:n,deep:i,flush:o,once:s}=t,a=ar({},t),c=e&&n||!e&&o!=="post";let u;if(ma){if(o==="sync"){const p=tE();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!c){const p=()=>{};return p.stop=_n,p.resume=_n,p.pause=_n,p}}const l=or;a.call=(p,v,y)=>Tn(p,l,v,y);let h=!1;o==="post"?a.scheduler=p=>{Dr(p,l&&l.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(p,v)=>{v?p():kh(p)}),a.augmentJob=p=>{e&&(p.flags|=4),h&&(p.flags|=2,l&&(p.id=l.uid,p.i=l))};const d=px(r,e,a);return ma&&(u?u.push(d):c&&d()),d}function rE(r,e,t){const n=this.proxy,i=It(r)?r.includes(".")?tm(n,r):()=>n[r]:r.bind(n,n);let o;Ee(e)?o=e:(o=e.handler,t=e);const s=Pa(this),a=em(i,o.bind(n),t);return s(),a}function tm(r,e){const t=e.split(".");return()=>{let n=r;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}const nE=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${Yr(e)}Modifiers`]||r[`${lo(e)}Modifiers`];function iE(r,e,...t){if(r.isUnmounted)return;const n=r.vnode.props||Ze;let i=t;const o=e.startsWith("update:"),s=o&&nE(n,e.slice(7));s&&(s.trim&&(i=t.map(l=>It(l)?l.trim():l)),s.number&&(i=t.map(If)));let a,c=n[a=Fl(e)]||n[a=Fl(Yr(e))];!c&&o&&(c=n[a=Fl(lo(e))]),c&&Tn(c,r,6,i);const u=n[a+"Once"];if(u){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,Tn(u,r,6,i)}}const oE=new WeakMap;function rm(r,e,t=!1){const n=t?oE:e.emitsCache,i=n.get(r);if(i!==void 0)return i;const o=r.emits;let s={},a=!1;if(!Ee(r)){const c=u=>{const l=rm(u,e,!0);l&&(a=!0,ar(s,l))};!t&&e.mixins.length&&e.mixins.forEach(c),r.extends&&c(r.extends),r.mixins&&r.mixins.forEach(c)}return!o&&!a?(ut(r)&&n.set(r,null),null):(_e(o)?o.forEach(c=>s[c]=null):ar(s,o),ut(r)&&n.set(r,s),s)}function zu(r,e){return!r||!Lu(e)?!1:(e=e.slice(2).replace(/Once$/,""),We(r,e[0].toLowerCase()+e.slice(1))||We(r,lo(e))||We(r,e))}function i1(r){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[o],slots:s,attrs:a,emit:c,render:u,renderCache:l,props:h,data:d,setupState:p,ctx:v,inheritAttrs:y}=r,w=Kc(r);let _,x;try{if(t.shapeFlag&4){const D=i||n,F=D;_=vn(u.call(F,D,l,h,p,d,v)),x=a}else{const D=e;_=vn(D.length>1?D(h,{attrs:a,slots:s,emit:c}):D(h,null)),x=e.props?a:sE(a)}}catch(D){na.length=0,ju(D,r,1),_=mr(Si)}let T=_;if(x&&y!==!1){const D=Object.keys(x),{shapeFlag:F}=T;D.length&&F&7&&(o&&D.some(Ah)&&(x=aE(x,o)),T=Yo(T,x,!1,!0))}return t.dirs&&(T=Yo(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(t.dirs):t.dirs),t.transition&&Lh(T,t.transition),_=T,Kc(w),_}const sE=r=>{let e;for(const t in r)(t==="class"||t==="style"||Lu(t))&&((e||(e={}))[t]=r[t]);return e},aE=(r,e)=>{const t={};for(const n in r)(!Ah(n)||!(n.slice(9)in e))&&(t[n]=r[n]);return t};function cE(r,e,t){const{props:n,children:i,component:o}=r,{props:s,children:a,patchFlag:c}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return n?o1(n,s,u):!!s;if(c&8){const l=e.dynamicProps;for(let h=0;h<l.length;h++){const d=l[h];if(s[d]!==n[d]&&!zu(u,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===s?!1:n?s?o1(n,s,u):!0:!!s;return!1}function o1(r,e,t){const n=Object.keys(e);if(n.length!==Object.keys(r).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(e[o]!==r[o]&&!zu(t,o))return!0}return!1}function uE({vnode:r,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===r&&(n.el=r.el),n===r)(r=e.vnode).el=t,e=e.parent;else break}}const nm=r=>r.__isSuspense;function lE(r,e){e&&e.pendingBranch?_e(r)?e.effects.push(...r):e.effects.push(r):mx(r)}const tn=Symbol.for("v-fgt"),qu=Symbol.for("v-txt"),Si=Symbol.for("v-cmt"),Wl=Symbol.for("v-stc"),na=[];let Mr=null;function br(r=!1){na.push(Mr=r?null:[])}function fE(){na.pop(),Mr=na[na.length-1]||null}let va=1;function Zc(r,e=!1){va+=r,r<0&&Mr&&e&&(Mr.hasOnce=!0)}function im(r){return r.dynamicChildren=va>0?Mr||ko:null,fE(),va>0&&Mr&&Mr.push(r),r}function zr(r,e,t,n,i,o){return im(X(r,e,t,n,i,o,!0))}function om(r,e,t,n,i){return im(mr(r,e,t,n,i,!0))}function Jc(r){return r?r.__v_isVNode===!0:!1}function Fs(r,e){return r.type===e.type&&r.key===e.key}const sm=({key:r})=>r??null,Pc=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?It(r)||sr(r)||Ee(r)?{i:Nr,r,k:e,f:!!t}:r:null);function X(r,e=null,t=null,n=0,i=null,o=r===tn?0:1,s=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&sm(e),ref:e&&Pc(e),scopeId:kv,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Nr};return a?(Vh(c,t),o&128&&r.normalize(c)):t&&(c.shapeFlag|=It(t)?8:16),va>0&&!s&&Mr&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&Mr.push(c),c}const mr=hE;function hE(r,e=null,t=null,n=0,i=null,o=!1){if((!r||r===Mx)&&(r=Si),Jc(r)){const a=Yo(r,e,!0);return t&&Vh(a,t),va>0&&!o&&Mr&&(a.shapeFlag&6?Mr[Mr.indexOf(r)]=a:Mr.push(a)),a.patchFlag=-2,a}if(IE(r)&&(r=r.__vccOpts),e){e=dE(e);let{class:a,style:c}=e;a&&!It(a)&&(e.class=Th(a)),ut(c)&&(Mh(c)&&!_e(c)&&(c=ar({},c)),e.style=bh(c))}const s=It(r)?1:nm(r)?128:wx(r)?64:ut(r)?4:Ee(r)?2:0;return X(r,e,t,n,i,s,o,!0)}function dE(r){return r?Mh(r)||zv(r)?ar({},r):r:null}function Yo(r,e,t=!1,n=!1){const{props:i,ref:o,patchFlag:s,children:a,transition:c}=r,u=e?pE(i||{},e):i,l={__v_isVNode:!0,__v_skip:!0,type:r.type,props:u,key:u&&sm(u),ref:e&&e.ref?t&&o?_e(o)?o.concat(Pc(e)):[o,Pc(e)]:Pc(e):o,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:a,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==tn?s===-1?16:s|16:s,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:c,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Yo(r.ssContent),ssFallback:r.ssFallback&&Yo(r.ssFallback),placeholder:r.placeholder,el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return c&&n&&Lh(l,c.clone(l)),l}function ia(r=" ",e=0){return mr(qu,null,r,e)}function am(r="",e=!1){return e?(br(),om(Si,null,r)):mr(Si,null,r)}function vn(r){return r==null||typeof r=="boolean"?mr(Si):_e(r)?mr(tn,null,r.slice()):Jc(r)?ci(r):mr(qu,null,String(r))}function ci(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Yo(r)}function Vh(r,e){let t=0;const{shapeFlag:n}=r;if(e==null)e=null;else if(_e(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),Vh(r,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!zv(e)?e._ctx=Nr:i===3&&Nr&&(Nr.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:Nr},t=32):(e=String(e),n&64?(t=16,e=[ia(e)]):t=8);r.children=e,r.shapeFlag|=t}function pE(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=Th([e.class,n.class]));else if(i==="style")e.style=bh([e.style,n.style]);else if(Lu(i)){const o=e[i],s=n[i];s&&o!==s&&!(_e(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=n[i])}return e}function hn(r,e,t,n=null){Tn(r,e,7,[t,n])}const gE=jv();let vE=0;function mE(r,e,t){const n=r.type,i=(e?e.appContext:r.appContext)||gE,o={uid:vE++,vnode:r,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new H_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xv(n,i),emitsOptions:rm(n,i),emit:null,emitted:null,propsDefaults:Ze,inheritAttrs:n.inheritAttrs,ctx:Ze,data:Ze,props:Ze,attrs:Ze,slots:Ze,refs:Ze,setupState:Ze,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=iE.bind(null,o),r.ce&&r.ce(o),o}let or=null;const yE=()=>or||Nr;let eu,Nf;{const r=Uu(),e=(t,n)=>{let i;return(i=r[t])||(i=r[t]=[]),i.push(n),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};eu=e("__VUE_INSTANCE_SETTERS__",t=>or=t),Nf=e("__VUE_SSR_SETTERS__",t=>ma=t)}const Pa=r=>{const e=or;return eu(r),r.scope.on(),()=>{r.scope.off(),eu(e)}},s1=()=>{or&&or.scope.off(),eu(null)};function cm(r){return r.vnode.shapeFlag&4}let ma=!1;function wE(r,e=!1,t=!1){e&&Nf(e);const{props:n,children:i}=r.vnode,o=cm(r);Gx(r,n,o,e),Xx(r,i,t||e);const s=o?_E(r,e):void 0;return e&&Nf(!1),s}function _E(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,Lx);const{setup:n}=t;if(n){jn();const i=r.setupContext=n.length>1?EE(r):null,o=Pa(r),s=Ra(n,r,0,[r.props,i]),a=ov(s);if(Gn(),o(),(a||r.sp)&&!ta(r)&&Lv(r),a){if(s.then(s1,s1),e)return s.then(c=>{a1(r,c)}).catch(c=>{ju(c,r,0)});r.asyncDep=s}else a1(r,s)}else um(r)}function a1(r,e,t){Ee(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:ut(e)&&(r.setupState=Rv(e)),um(r)}function um(r,e,t){const n=r.type;r.render||(r.render=n.render||_n);{const i=Pa(r);jn();try{Bx(r)}finally{Gn(),i()}}}const xE={get(r,e){return nr(r,"get",""),r[e]}};function EE(r){const e=t=>{r.exposed=t||{}};return{attrs:new Proxy(r.attrs,xE),slots:r.slots,emit:r.emit,expose:e}}function Xu(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(Rv(ax(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in ra)return ra[t](r)},has(e,t){return t in e||t in ra}})):r.proxy}function AE(r,e=!0){return Ee(r)?r.displayName||r.name:r.name||e&&r.__name}function IE(r){return Ee(r)&&"__vccOpts"in r}const rn=(r,e)=>hx(r,e,ma);function lm(r,e,t){const n=(o,s,a)=>{Zc(-1);try{return mr(o,s,a)}finally{Zc(1)}},i=arguments.length;return i===2?ut(e)&&!_e(e)?Jc(e)?n(r,null,[e]):n(r,e):n(r,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Jc(t)&&(t=[t]),n(r,e,t))}const CE="3.5.21";/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mf;const c1=typeof window<"u"&&window.trustedTypes;if(c1)try{Mf=c1.createPolicy("vue",{createHTML:r=>r})}catch{}const fm=Mf?r=>Mf.createHTML(r):r=>r,bE="http://www.w3.org/2000/svg",TE="http://www.w3.org/1998/Math/MathML",Ln=typeof document<"u"?document:null,u1=Ln&&Ln.createElement("template"),SE={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,n)=>{const i=e==="svg"?Ln.createElementNS(bE,r):e==="mathml"?Ln.createElementNS(TE,r):t?Ln.createElement(r,{is:t}):Ln.createElement(r);return r==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:r=>Ln.createTextNode(r),createComment:r=>Ln.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Ln.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,n,i,o){const s=t?t.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===o||!(i=i.nextSibling)););else{u1.innerHTML=fm(n==="svg"?`<svg>${r}</svg>`:n==="mathml"?`<math>${r}</math>`:r);const a=u1.content;if(n==="svg"||n==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,t)}return[s?s.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},RE=Symbol("_vtc");function PE(r,e,t){const n=r[RE];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const l1=Symbol("_vod"),OE=Symbol("_vsh"),DE=Symbol(""),NE=/(?:^|;)\s*display\s*:/;function ME(r,e,t){const n=r.style,i=It(t);let o=!1;if(t&&!i){if(e)if(It(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();t[a]==null&&Oc(n,a,"")}else for(const s in e)t[s]==null&&Oc(n,s,"");for(const s in t)s==="display"&&(o=!0),Oc(n,s,t[s])}else if(i){if(e!==t){const s=n[DE];s&&(t+=";"+s),n.cssText=t,o=NE.test(t)}}else e&&r.removeAttribute("style");l1 in r&&(r[l1]=o?n.display:"",r[OE]&&(n.display="none"))}const f1=/\s*!important$/;function Oc(r,e,t){if(_e(t))t.forEach(n=>Oc(r,e,n));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const n=kE(r,e);f1.test(t)?r.setProperty(lo(n),t.replace(f1,""),"important"):r[n]=t}}const h1=["Webkit","Moz","ms"],zl={};function kE(r,e){const t=zl[e];if(t)return t;let n=Yr(e);if(n!=="filter"&&n in r)return zl[e]=n;n=Vu(n);for(let i=0;i<h1.length;i++){const o=h1[i]+n;if(o in r)return zl[e]=o}return e}const d1="http://www.w3.org/1999/xlink";function p1(r,e,t,n,i,o=U_(e)){n&&e.startsWith("xlink:")?t==null?r.removeAttributeNS(d1,e.slice(6,e.length)):r.setAttributeNS(d1,e,t):t==null||o&&!uv(t)?r.removeAttribute(e):r.setAttribute(e,o?"":ki(t)?String(t):t)}function g1(r,e,t,n,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(r[e]=e==="innerHTML"?fm(t):t);return}const o=r.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?r.getAttribute("value")||"":r.value,c=t==null?r.type==="checkbox"?"on":"":String(t);(a!==c||!("_value"in r))&&(r.value=c),t==null&&r.removeAttribute(e),r._value=t;return}let s=!1;if(t===""||t==null){const a=typeof r[e];a==="boolean"?t=uv(t):t==null&&a==="string"?(t="",s=!0):a==="number"&&(t=0,s=!0)}try{r[e]=t}catch{}s&&r.removeAttribute(i||e)}function Io(r,e,t,n){r.addEventListener(e,t,n)}function LE(r,e,t,n){r.removeEventListener(e,t,n)}const v1=Symbol("_vei");function BE(r,e,t,n,i=null){const o=r[v1]||(r[v1]={}),s=o[e];if(n&&s)s.value=n;else{const[a,c]=FE(e);if(n){const u=o[e]=HE(n,i);Io(r,a,u,c)}else s&&(LE(r,a,s,c),o[e]=void 0)}}const m1=/(?:Once|Passive|Capture)$/;function FE(r){let e;if(m1.test(r)){e={};let n;for(;n=r.match(m1);)r=r.slice(0,r.length-n[0].length),e[n[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):lo(r.slice(2)),e]}let ql=0;const VE=Promise.resolve(),UE=()=>ql||(VE.then(()=>ql=0),ql=Date.now());function HE(r,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;Tn($E(n,t.value),e,5,[n])};return t.value=r,t.attached=UE(),t}function $E(r,e){if(_e(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const y1=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,jE=(r,e,t,n,i,o)=>{const s=i==="svg";e==="class"?PE(r,n,s):e==="style"?ME(r,t,n):Lu(e)?Ah(e)||BE(r,e,t,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):GE(r,e,n,s))?(g1(r,e,n),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&p1(r,e,n,s,o,e!=="value")):r._isVueCE&&(/[A-Z]/.test(e)||!It(n))?g1(r,Yr(e),n,o,e):(e==="true-value"?r._trueValue=n:e==="false-value"&&(r._falseValue=n),p1(r,e,n,s))};function GE(r,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in r&&y1(e)&&Ee(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=r.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return y1(e)&&It(t)?!1:e in r}const w1=r=>{const e=r.props["onUpdate:modelValue"]||!1;return _e(e)?t=>Sc(e,t):e};function WE(r){r.target.composing=!0}function _1(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Xl=Symbol("_assign"),Gr={created(r,{modifiers:{lazy:e,trim:t,number:n}},i){r[Xl]=w1(i);const o=n||i.props&&i.props.type==="number";Io(r,e?"change":"input",s=>{if(s.target.composing)return;let a=r.value;t&&(a=a.trim()),o&&(a=If(a)),r[Xl](a)}),t&&Io(r,"change",()=>{r.value=r.value.trim()}),e||(Io(r,"compositionstart",WE),Io(r,"compositionend",_1),Io(r,"change",_1))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,oldValue:t,modifiers:{lazy:n,trim:i,number:o}},s){if(r[Xl]=w1(s),r.composing)return;const a=(o||r.type==="number")&&!/^0\d/.test(r.value)?If(r.value):r.value,c=e??"";a!==c&&(document.activeElement===r&&r.type!=="range"&&(n&&e===t||i&&r.value.trim()===c)||(r.value=c))}},zE=["ctrl","shift","alt","meta"],qE={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>zE.some(t=>r[`${t}Key`]&&!e.includes(t))},hm=(r,e)=>{const t=r._withMods||(r._withMods={}),n=e.join(".");return t[n]||(t[n]=((i,...o)=>{for(let s=0;s<e.length;s++){const a=qE[e[s]];if(a&&a(i,e))return}return r(i,...o)}))},XE=ar({patchProp:jE},SE);let x1;function KE(){return x1||(x1=Yx(XE))}const YE=((...r)=>{const e=KE().createApp(...r),{mount:t}=e;return e.mount=n=>{const i=ZE(n);if(!i)return;const o=e._component;!Ee(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=t(i,!1,QE(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e});function QE(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function ZE(r){return It(r)?document.querySelector(r):r}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Co=typeof document<"u";function dm(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function JE(r){return r.__esModule||r[Symbol.toStringTag]==="Module"||r.default&&dm(r.default)}const je=Object.assign;function Kl(r,e){const t={};for(const n in e){const i=e[n];t[n]=ln(i)?i.map(r):r(i)}return t}const oa=()=>{},ln=Array.isArray,pm=/#/g,eA=/&/g,tA=/\//g,rA=/=/g,nA=/\?/g,gm=/\+/g,iA=/%5B/g,oA=/%5D/g,vm=/%5E/g,sA=/%60/g,mm=/%7B/g,aA=/%7C/g,ym=/%7D/g,cA=/%20/g;function Uh(r){return encodeURI(""+r).replace(aA,"|").replace(iA,"[").replace(oA,"]")}function uA(r){return Uh(r).replace(mm,"{").replace(ym,"}").replace(vm,"^")}function kf(r){return Uh(r).replace(gm,"%2B").replace(cA,"+").replace(pm,"%23").replace(eA,"%26").replace(sA,"`").replace(mm,"{").replace(ym,"}").replace(vm,"^")}function lA(r){return kf(r).replace(rA,"%3D")}function fA(r){return Uh(r).replace(pm,"%23").replace(nA,"%3F")}function hA(r){return r==null?"":fA(r).replace(tA,"%2F")}function ya(r){try{return decodeURIComponent(""+r)}catch{}return""+r}const dA=/\/$/,pA=r=>r.replace(dA,"");function Yl(r,e,t="/"){let n,i={},o="",s="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(n=e.slice(0,c),o=e.slice(c+1,a>-1?a:e.length),i=r(o)),a>-1&&(n=n||e.slice(0,a),s=e.slice(a,e.length)),n=yA(n??e,t),{fullPath:n+(o&&"?")+o+s,path:n,query:i,hash:ya(s)}}function gA(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function E1(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function vA(r,e,t){const n=e.matched.length-1,i=t.matched.length-1;return n>-1&&n===i&&Qo(e.matched[n],t.matched[i])&&wm(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function Qo(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function wm(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!mA(r[t],e[t]))return!1;return!0}function mA(r,e){return ln(r)?A1(r,e):ln(e)?A1(e,r):r===e}function A1(r,e){return ln(e)?r.length===e.length&&r.every((t,n)=>t===e[n]):r.length===1&&r[0]===e}function yA(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),n=r.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let o=t.length-1,s,a;for(s=0;s<n.length;s++)if(a=n[s],a!==".")if(a==="..")o>1&&o--;else break;return t.slice(0,o).join("/")+"/"+n.slice(s).join("/")}const ni={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var wa;(function(r){r.pop="pop",r.push="push"})(wa||(wa={}));var sa;(function(r){r.back="back",r.forward="forward",r.unknown=""})(sa||(sa={}));function wA(r){if(!r)if(Co){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),pA(r)}const _A=/^[^#]+#/;function xA(r,e){return r.replace(_A,"#")+e}function EA(r,e){const t=document.documentElement.getBoundingClientRect(),n=r.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const Ku=()=>({left:window.scrollX,top:window.scrollY});function AA(r){let e;if("el"in r){const t=r.el,n=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=EA(i,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function I1(r,e){return(history.state?history.state.position-e:-1)+r}const Lf=new Map;function IA(r,e){Lf.set(r,e)}function CA(r){const e=Lf.get(r);return Lf.delete(r),e}let bA=()=>location.protocol+"//"+location.host;function _m(r,e){const{pathname:t,search:n,hash:i}=e,o=r.indexOf("#");if(o>-1){let a=i.includes(r.slice(o))?r.slice(o).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),E1(c,"")}return E1(t,r)+n+i}function TA(r,e,t,n){let i=[],o=[],s=null;const a=({state:d})=>{const p=_m(r,location),v=t.value,y=e.value;let w=0;if(d){if(t.value=p,e.value=d,s&&s===v){s=null;return}w=y?d.position-y.position:0}else n(p);i.forEach(_=>{_(t.value,v,{delta:w,type:wa.pop,direction:w?w>0?sa.forward:sa.back:sa.unknown})})};function c(){s=t.value}function u(d){i.push(d);const p=()=>{const v=i.indexOf(d);v>-1&&i.splice(v,1)};return o.push(p),p}function l(){const{history:d}=window;d.state&&d.replaceState(je({},d.state,{scroll:Ku()}),"")}function h(){for(const d of o)d();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",l)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:c,listen:u,destroy:h}}function C1(r,e,t,n=!1,i=!1){return{back:r,current:e,forward:t,replaced:n,position:window.history.length,scroll:i?Ku():null}}function SA(r){const{history:e,location:t}=window,n={value:_m(r,t)},i={value:e.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(c,u,l){const h=r.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?r:r.slice(h))+c:bA()+r+c;try{e[l?"replaceState":"pushState"](u,"",d),i.value=u}catch(p){console.error(p),t[l?"replace":"assign"](d)}}function s(c,u){const l=je({},e.state,C1(i.value.back,c,i.value.forward,!0),u,{position:i.value.position});o(c,l,!0),n.value=c}function a(c,u){const l=je({},i.value,e.state,{forward:c,scroll:Ku()});o(l.current,l,!0);const h=je({},C1(n.value,c,null),{position:l.position+1},u);o(c,h,!1),n.value=c}return{location:n,state:i,push:a,replace:s}}function RA(r){r=wA(r);const e=SA(r),t=TA(r,e.state,e.location,e.replace);function n(o,s=!0){s||t.pauseListeners(),history.go(o)}const i=je({location:"",base:r,go:n,createHref:xA.bind(null,r)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function PA(r){return typeof r=="string"||r&&typeof r=="object"}function xm(r){return typeof r=="string"||typeof r=="symbol"}const Em=Symbol("");var b1;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(b1||(b1={}));function Zo(r,e){return je(new Error,{type:r,[Em]:!0},e)}function kn(r,e){return r instanceof Error&&Em in r&&(e==null||!!(r.type&e))}const T1="[^/]+?",OA={sensitive:!1,strict:!1,start:!0,end:!0},DA=/[.+*?^${}()[\]/\\]/g;function NA(r,e){const t=je({},OA,e),n=[];let i=t.start?"^":"";const o=[];for(const u of r){const l=u.length?[]:[90];t.strict&&!u.length&&(i+="/");for(let h=0;h<u.length;h++){const d=u[h];let p=40+(t.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(DA,"\\$&"),p+=40;else if(d.type===1){const{value:v,repeatable:y,optional:w,regexp:_}=d;o.push({name:v,repeatable:y,optional:w});const x=_||T1;if(x!==T1){p+=10;try{new RegExp(`(${x})`)}catch(D){throw new Error(`Invalid custom RegExp for param "${v}" (${x}): `+D.message)}}let T=y?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;h||(T=w&&u.length<2?`(?:/${T})`:"/"+T),w&&(T+="?"),i+=T,p+=20,w&&(p+=-8),y&&(p+=-20),x===".*"&&(p+=-50)}l.push(p)}n.push(l)}if(t.strict&&t.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,t.sensitive?"":"i");function a(u){const l=u.match(s),h={};if(!l)return null;for(let d=1;d<l.length;d++){const p=l[d]||"",v=o[d-1];h[v.name]=p&&v.repeatable?p.split("/"):p}return h}function c(u){let l="",h=!1;for(const d of r){(!h||!l.endsWith("/"))&&(l+="/"),h=!1;for(const p of d)if(p.type===0)l+=p.value;else if(p.type===1){const{value:v,repeatable:y,optional:w}=p,_=v in u?u[v]:"";if(ln(_)&&!y)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const x=ln(_)?_.join("/"):_;if(!x)if(w)d.length<2&&(l.endsWith("/")?l=l.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);l+=x}}return l||"/"}return{re:s,score:n,keys:o,parse:a,stringify:c}}function MA(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=e[t]-r[t];if(n)return n;t++}return r.length<e.length?r.length===1&&r[0]===80?-1:1:r.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Am(r,e){let t=0;const n=r.score,i=e.score;for(;t<n.length&&t<i.length;){const o=MA(n[t],i[t]);if(o)return o;t++}if(Math.abs(i.length-n.length)===1){if(S1(n))return 1;if(S1(i))return-1}return i.length-n.length}function S1(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const kA={type:0,value:""},LA=/[a-zA-Z0-9_]/;function BA(r){if(!r)return[[]];if(r==="/")return[[kA]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(p){throw new Error(`ERR (${t})/"${u}": ${p}`)}let t=0,n=t;const i=[];let o;function s(){o&&i.push(o),o=[]}let a=0,c,u="",l="";function h(){u&&(t===0?o.push({type:0,value:u}):t===1||t===2||t===3?(o.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:l,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function d(){u+=c}for(;a<r.length;){if(c=r[a++],c==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:c==="/"?(u&&h(),s()):c===":"?(h(),t=1):d();break;case 4:d(),t=n;break;case 1:c==="("?t=2:LA.test(c)?d():(h(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+c:t=3:l+=c;break;case 3:h(),t=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,l="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${u}"`),h(),s(),i}function FA(r,e,t){const n=NA(BA(r.path),t),i=je(n,{record:r,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function VA(r,e){const t=[],n=new Map;e=D1({strict:!1,end:!0,sensitive:!1},e);function i(h){return n.get(h)}function o(h,d,p){const v=!p,y=P1(h);y.aliasOf=p&&p.record;const w=D1(e,h),_=[y];if("alias"in h){const D=typeof h.alias=="string"?[h.alias]:h.alias;for(const F of D)_.push(P1(je({},y,{components:p?p.record.components:y.components,path:F,aliasOf:p?p.record:y})))}let x,T;for(const D of _){const{path:F}=D;if(d&&F[0]!=="/"){const H=d.record.path,C=H[H.length-1]==="/"?"":"/";D.path=d.record.path+(F&&C+F)}if(x=FA(D,d,w),p?p.alias.push(x):(T=T||x,T!==x&&T.alias.push(x),v&&h.name&&!O1(x)&&s(h.name)),Im(x)&&c(x),y.children){const H=y.children;for(let C=0;C<H.length;C++)o(H[C],x,p&&p.children[C])}p=p||x}return T?()=>{s(T)}:oa}function s(h){if(xm(h)){const d=n.get(h);d&&(n.delete(h),t.splice(t.indexOf(d),1),d.children.forEach(s),d.alias.forEach(s))}else{const d=t.indexOf(h);d>-1&&(t.splice(d,1),h.record.name&&n.delete(h.record.name),h.children.forEach(s),h.alias.forEach(s))}}function a(){return t}function c(h){const d=$A(h,t);t.splice(d,0,h),h.record.name&&!O1(h)&&n.set(h.record.name,h)}function u(h,d){let p,v={},y,w;if("name"in h&&h.name){if(p=n.get(h.name),!p)throw Zo(1,{location:h});w=p.record.name,v=je(R1(d.params,p.keys.filter(T=>!T.optional).concat(p.parent?p.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),h.params&&R1(h.params,p.keys.map(T=>T.name))),y=p.stringify(v)}else if(h.path!=null)y=h.path,p=t.find(T=>T.re.test(y)),p&&(v=p.parse(y),w=p.record.name);else{if(p=d.name?n.get(d.name):t.find(T=>T.re.test(d.path)),!p)throw Zo(1,{location:h,currentLocation:d});w=p.record.name,v=je({},d.params,h.params),y=p.stringify(v)}const _=[];let x=p;for(;x;)_.unshift(x.record),x=x.parent;return{name:w,path:y,params:v,matched:_,meta:HA(_)}}r.forEach(h=>o(h));function l(){t.length=0,n.clear()}return{addRoute:o,resolve:u,removeRoute:s,clearRoutes:l,getRoutes:a,getRecordMatcher:i}}function R1(r,e){const t={};for(const n of e)n in r&&(t[n]=r[n]);return t}function P1(r){const e={path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:r.aliasOf,beforeEnter:r.beforeEnter,props:UA(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function UA(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const n in r.components)e[n]=typeof t=="object"?t[n]:t;return e}function O1(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function HA(r){return r.reduce((e,t)=>je(e,t.meta),{})}function D1(r,e){const t={};for(const n in r)t[n]=n in e?e[n]:r[n];return t}function $A(r,e){let t=0,n=e.length;for(;t!==n;){const o=t+n>>1;Am(r,e[o])<0?n=o:t=o+1}const i=jA(r);return i&&(n=e.lastIndexOf(i,n-1)),n}function jA(r){let e=r;for(;e=e.parent;)if(Im(e)&&Am(r,e)===0)return e}function Im({record:r}){return!!(r.name||r.components&&Object.keys(r.components).length||r.redirect)}function GA(r){const e={};if(r===""||r==="?")return e;const n=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(gm," "),s=o.indexOf("="),a=ya(s<0?o:o.slice(0,s)),c=s<0?null:ya(o.slice(s+1));if(a in e){let u=e[a];ln(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function N1(r){let e="";for(let t in r){const n=r[t];if(t=lA(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(ln(n)?n.map(o=>o&&kf(o)):[n&&kf(n)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+t,o!=null&&(e+="="+o))})}return e}function WA(r){const e={};for(const t in r){const n=r[t];n!==void 0&&(e[t]=ln(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const zA=Symbol(""),M1=Symbol(""),Hh=Symbol(""),Cm=Symbol(""),Bf=Symbol("");function Vs(){let r=[];function e(n){return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}function t(){r=[]}return{add:e,list:()=>r.slice(),reset:t}}function ui(r,e,t,n,i,o=s=>s()){const s=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const u=d=>{d===!1?c(Zo(4,{from:t,to:e})):d instanceof Error?c(d):PA(d)?c(Zo(2,{from:e,to:d})):(s&&n.enterCallbacks[i]===s&&typeof d=="function"&&s.push(d),a())},l=o(()=>r.call(n&&n.instances[i],e,t,u));let h=Promise.resolve(l);r.length<3&&(h=h.then(u)),h.catch(d=>c(d))})}function Ql(r,e,t,n,i=o=>o()){const o=[];for(const s of r)for(const a in s.components){let c=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(dm(c)){const l=(c.__vccOpts||c)[e];l&&o.push(ui(l,t,n,s,a,i))}else{let u=c();o.push(()=>u.then(l=>{if(!l)throw new Error(`Couldn't resolve component "${a}" at "${s.path}"`);const h=JE(l)?l.default:l;s.mods[a]=l,s.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&ui(p,t,n,s,a,i)()}))}}return o}function k1(r){const e=Hn(Hh),t=Hn(Cm),n=rn(()=>{const c=yn(r.to);return e.resolve(c)}),i=rn(()=>{const{matched:c}=n.value,{length:u}=c,l=c[u-1],h=t.matched;if(!l||!h.length)return-1;const d=h.findIndex(Qo.bind(null,l));if(d>-1)return d;const p=L1(c[u-2]);return u>1&&L1(l)===p&&h[h.length-1].path!==p?h.findIndex(Qo.bind(null,c[u-2])):d}),o=rn(()=>i.value>-1&&YA(t.params,n.value.params)),s=rn(()=>i.value>-1&&i.value===t.matched.length-1&&wm(t.params,n.value.params));function a(c={}){if(KA(c)){const u=e[yn(r.replace)?"replace":"push"](yn(r.to)).catch(oa);return r.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:n,href:rn(()=>n.value.href),isActive:o,isExactActive:s,navigate:a}}function qA(r){return r.length===1?r[0]:r}const XA=ls({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:k1,setup(r,{slots:e}){const t=$u(k1(r)),{options:n}=Hn(Hh),i=rn(()=>({[B1(r.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[B1(r.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const o=e.default&&qA(e.default(t));return r.custom?o:lm("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},o)}}}),Dc=XA;function KA(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function YA(r,e){for(const t in e){const n=e[t],i=r[t];if(typeof n=="string"){if(n!==i)return!1}else if(!ln(i)||i.length!==n.length||n.some((o,s)=>o!==i[s]))return!1}return!0}function L1(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const B1=(r,e,t)=>r??e??t,QA=ls({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const n=Hn(Bf),i=rn(()=>r.route||n.value),o=Hn(M1,0),s=rn(()=>{let u=yn(o);const{matched:l}=i.value;let h;for(;(h=l[u])&&!h.components;)u++;return u}),a=rn(()=>i.value.matched[s.value]);Rc(M1,rn(()=>s.value+1)),Rc(zA,a),Rc(Bf,i);const c=sn();return Uo(()=>[c.value,a.value,r.name],([u,l,h],[d,p,v])=>{l&&(l.instances[h]=u,p&&p!==l&&u&&u===d&&(l.leaveGuards.size||(l.leaveGuards=p.leaveGuards),l.updateGuards.size||(l.updateGuards=p.updateGuards))),u&&l&&(!p||!Qo(l,p)||!d)&&(l.enterCallbacks[h]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=i.value,l=r.name,h=a.value,d=h&&h.components[l];if(!d)return F1(t.default,{Component:d,route:u});const p=h.props[l],v=p?p===!0?u.params:typeof p=="function"?p(u):p:null,w=lm(d,je({},v,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(h.instances[l]=null)},ref:c}));return F1(t.default,{Component:w,route:u})||w}}});function F1(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const bm=QA;function ZA(r){const e=VA(r.routes,r),t=r.parseQuery||GA,n=r.stringifyQuery||N1,i=r.history,o=Vs(),s=Vs(),a=Vs(),c=cx(ni);let u=ni;Co&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=Kl.bind(null,j=>""+j),h=Kl.bind(null,hA),d=Kl.bind(null,ya);function p(j,ie){let re,se;return xm(j)?(re=e.getRecordMatcher(j),se=ie):se=j,e.addRoute(se,re)}function v(j){const ie=e.getRecordMatcher(j);ie&&e.removeRoute(ie)}function y(){return e.getRoutes().map(j=>j.record)}function w(j){return!!e.getRecordMatcher(j)}function _(j,ie){if(ie=je({},ie||c.value),typeof j=="string"){const k=Yl(t,j,ie.path),G=e.resolve({path:k.path},ie),q=i.createHref(k.fullPath);return je(k,G,{params:d(G.params),hash:ya(k.hash),redirectedFrom:void 0,href:q})}let re;if(j.path!=null)re=je({},j,{path:Yl(t,j.path,ie.path).path});else{const k=je({},j.params);for(const G in k)k[G]==null&&delete k[G];re=je({},j,{params:h(k)}),ie.params=h(ie.params)}const se=e.resolve(re,ie),ke=j.hash||"";se.params=l(d(se.params));const R=gA(n,je({},j,{hash:uA(ke),path:se.path})),O=i.createHref(R);return je({fullPath:R,hash:ke,query:n===N1?WA(j.query):j.query||{}},se,{redirectedFrom:void 0,href:O})}function x(j){return typeof j=="string"?Yl(t,j,c.value.path):je({},j)}function T(j,ie){if(u!==j)return Zo(8,{from:ie,to:j})}function D(j){return C(j)}function F(j){return D(je(x(j),{replace:!0}))}function H(j){const ie=j.matched[j.matched.length-1];if(ie&&ie.redirect){const{redirect:re}=ie;let se=typeof re=="function"?re(j):re;return typeof se=="string"&&(se=se.includes("?")||se.includes("#")?se=x(se):{path:se},se.params={}),je({query:j.query,hash:j.hash,params:se.path!=null?{}:j.params},se)}}function C(j,ie){const re=u=_(j),se=c.value,ke=j.state,R=j.force,O=j.replace===!0,k=H(re);if(k)return C(je(x(k),{state:typeof k=="object"?je({},ke,k.state):ke,force:R,replace:O}),ie||re);const G=re;G.redirectedFrom=ie;let q;return!R&&vA(n,se,re)&&(q=Zo(16,{to:G,from:se}),Vr(se,se,!0,!1)),(q?Promise.resolve(q):P(G,se)).catch(W=>kn(W)?kn(W,2)?W:Zr(W):Ie(W,G,se)).then(W=>{if(W){if(kn(W,2))return C(je({replace:O},x(W.to),{state:typeof W.to=="object"?je({},ke,W.to.state):ke,force:R}),ie||G)}else W=M(G,se,!0,O,ke);return N(G,se,W),W})}function A(j,ie){const re=T(j,ie);return re?Promise.reject(re):Promise.resolve()}function b(j){const ie=Zn.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(j):j()}function P(j,ie){let re;const[se,ke,R]=JA(j,ie);re=Ql(se.reverse(),"beforeRouteLeave",j,ie);for(const k of se)k.leaveGuards.forEach(G=>{re.push(ui(G,j,ie))});const O=A.bind(null,j,ie);return re.push(O),_r(re).then(()=>{re=[];for(const k of o.list())re.push(ui(k,j,ie));return re.push(O),_r(re)}).then(()=>{re=Ql(ke,"beforeRouteUpdate",j,ie);for(const k of ke)k.updateGuards.forEach(G=>{re.push(ui(G,j,ie))});return re.push(O),_r(re)}).then(()=>{re=[];for(const k of R)if(k.beforeEnter)if(ln(k.beforeEnter))for(const G of k.beforeEnter)re.push(ui(G,j,ie));else re.push(ui(k.beforeEnter,j,ie));return re.push(O),_r(re)}).then(()=>(j.matched.forEach(k=>k.enterCallbacks={}),re=Ql(R,"beforeRouteEnter",j,ie,b),re.push(O),_r(re))).then(()=>{re=[];for(const k of s.list())re.push(ui(k,j,ie));return re.push(O),_r(re)}).catch(k=>kn(k,8)?k:Promise.reject(k))}function N(j,ie,re){a.list().forEach(se=>b(()=>se(j,ie,re)))}function M(j,ie,re,se,ke){const R=T(j,ie);if(R)return R;const O=ie===ni,k=Co?history.state:{};re&&(se||O?i.replace(j.fullPath,je({scroll:O&&k&&k.scroll},ke)):i.push(j.fullPath,ke)),c.value=j,Vr(j,ie,re,O),Zr()}let S;function Ke(){S||(S=i.listen((j,ie,re)=>{if(!fn.listening)return;const se=_(j),ke=H(se);if(ke){C(je(ke,{replace:!0,force:!0}),se).catch(oa);return}u=se;const R=c.value;Co&&IA(I1(R.fullPath,re.delta),Ku()),P(se,R).catch(O=>kn(O,12)?O:kn(O,2)?(C(je(x(O.to),{force:!0}),se).then(k=>{kn(k,20)&&!re.delta&&re.type===wa.pop&&i.go(-1,!1)}).catch(oa),Promise.reject()):(re.delta&&i.go(-re.delta,!1),Ie(O,se,R))).then(O=>{O=O||M(se,R,!1),O&&(re.delta&&!kn(O,8)?i.go(-re.delta,!1):re.type===wa.pop&&kn(O,20)&&i.go(-1,!1)),N(se,R,O)}).catch(oa)}))}let vt=Vs(),ct=Vs(),be;function Ie(j,ie,re){Zr(j);const se=ct.list();return se.length?se.forEach(ke=>ke(j,ie,re)):console.error(j),Promise.reject(j)}function Pr(){return be&&c.value!==ni?Promise.resolve():new Promise((j,ie)=>{vt.add([j,ie])})}function Zr(j){return be||(be=!j,Ke(),vt.list().forEach(([ie,re])=>j?re(j):ie()),vt.reset()),j}function Vr(j,ie,re,se){const{scrollBehavior:ke}=r;if(!Co||!ke)return Promise.resolve();const R=!re&&CA(I1(j.fullPath,0))||(se||!re)&&history.state&&history.state.scroll||null;return Ov().then(()=>ke(j,ie,R)).then(O=>O&&AA(O)).catch(O=>Ie(O,j,ie))}const lt=j=>i.go(j);let ft;const Zn=new Set,fn={currentRoute:c,listening:!0,addRoute:p,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:y,resolve:_,options:r,push:D,replace:F,go:lt,back:()=>lt(-1),forward:()=>lt(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:ct.add,isReady:Pr,install(j){const ie=this;j.component("RouterLink",Dc),j.component("RouterView",bm),j.config.globalProperties.$router=ie,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>yn(c)}),Co&&!ft&&c.value===ni&&(ft=!0,D(i.location).catch(ke=>{}));const re={};for(const ke in ni)Object.defineProperty(re,ke,{get:()=>c.value[ke],enumerable:!0});j.provide(Hh,ie),j.provide(Cm,bv(re)),j.provide(Bf,c);const se=j.unmount;Zn.add(j),j.unmount=function(){Zn.delete(j),Zn.size<1&&(u=ni,S&&S(),S=null,c.value=ni,ft=!1,be=!1),se()}}};function _r(j){return j.reduce((ie,re)=>ie.then(()=>b(re)),Promise.resolve())}return fn}function JA(r,e){const t=[],n=[],i=[],o=Math.max(e.matched.length,r.matched.length);for(let s=0;s<o;s++){const a=e.matched[s];a&&(r.matched.find(u=>Qo(u,a))?n.push(a):t.push(a));const c=r.matched[s];c&&(e.matched.find(u=>Qo(u,c))||i.push(c))}return[t,n,i]}const eI={class:"min-h-screen bg-gray-100"},tI={class:"bg-blue-600 text-white p-4 shadow"},rI={class:"container mx-auto flex justify-between"},nI={class:"flex gap-4"},iI={class:"container mx-auto p-6"},oI=ls({__name:"App",setup(r){return(e,t)=>(br(),zr("div",eI,[X("nav",tI,[X("div",rI,[t[3]||(t[3]=X("h1",{class:"font-bold"},"Warung Sembako",-1)),X("ul",nI,[X("li",null,[mr(yn(Dc),{to:"/",class:"hover:underline","active-class":"font-bold underline"},{default:Js(()=>[...t[0]||(t[0]=[ia(" Home ",-1)])]),_:1})]),X("li",null,[mr(yn(Dc),{to:"/produk-view",class:"hover:underline","active-class":"font-bold underline"},{default:Js(()=>[...t[1]||(t[1]=[ia(" Produk View ",-1)])]),_:1})]),X("li",null,[mr(yn(Dc),{to:"/produk",class:"hover:underline","active-class":"font-bold underline"},{default:Js(()=>[...t[2]||(t[2]=[ia(" Produk ",-1)])]),_:1})])])])]),X("main",iI,[mr(yn(bm))])]))}}),$h=(r,e)=>{const t=r.__vccOpts||r;for(const[n,i]of e)t[n]=i;return t},sI={},aI={class:"flex items-center justify-center min-h-screen bg-gray-100"},cI={class:"bg-white shadow-lg rounded-2xl p-10 text-center"};function uI(r,e){const t=Nx("router-link");return br(),zr("div",aI,[X("div",cI,[e[1]||(e[1]=X("h1",{class:"text-3xl font-bold mb-4"},"Selamat Datang 👋",-1)),e[2]||(e[2]=X("p",{class:"text-gray-600 mb-6"}," Ini adalah aplikasi manajemen produk sederhana dengan Firebase Firestore. ",-1)),mr(t,{to:"/produk",class:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-lg transition cursor-pointer"},{default:Js(()=>[...e[0]||(e[0]=[ia(" ➡️ Kelola Produk ",-1)])]),_:1})])])}const V1=$h(sI,[["render",uI]]),lI=()=>{};var U1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},fI=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=r[t++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=r[t++],s=r[t++],a=r[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const o=r[t++],s=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Sm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const o=r[i],s=i+1<r.length,a=s?r[i+1]:0,c=i+2<r.length,u=c?r[i+2]:0,l=o>>2,h=(o&3)<<4|a>>4;let d=(a&15)<<2|u>>6,p=u&63;c||(p=64,s||(d=64)),n.push(t[l],t[h],t[d],t[p])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Tm(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):fI(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const o=t[r.charAt(i++)],a=i<r.length?t[r.charAt(i)]:0;++i;const u=i<r.length?t[r.charAt(i)]:64;++i;const h=i<r.length?t[r.charAt(i)]:64;if(++i,o==null||a==null||u==null||h==null)throw new hI;const d=o<<2|a>>4;if(n.push(d),u!==64){const p=a<<4&240|u>>2;if(n.push(p),h!==64){const v=u<<6&192|h;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class hI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dI=function(r){const e=Tm(r);return Sm.encodeByteArray(e,!0)},tu=function(r){return dI(r).replace(/\./g,"")},Rm=function(r){try{return Sm.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=()=>pI().__FIREBASE_DEFAULTS__,vI=()=>{if(typeof process>"u"||typeof U1>"u")return;const r=U1.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},mI=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Rm(r[1]);return e&&JSON.parse(e)},Yu=()=>{try{return lI()||gI()||vI()||mI()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Pm=r=>Yu()?.emulatorHosts?.[r],yI=r=>{const e=Pm(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Om=()=>Yu()?.config,Dm=r=>Yu()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Nm(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,o=r.sub||r.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...r};return[tu(JSON.stringify(t)),tu(JSON.stringify(s)),""].join(".")}const aa={};function xI(){const r={prod:[],emulator:[]};for(const e of Object.keys(aa))aa[e]?r.emulator.push(e):r.prod.push(e);return r}function EI(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let H1=!1;function Mm(r,e){if(typeof window>"u"||typeof document>"u"||!fs(window.location.host)||aa[r]===e||aa[r]||H1)return;aa[r]=e;function t(d){return`__firebase__banner__${d}`}const n="__firebase__banner",o=xI().prod.length>0;function s(){const d=document.getElementById(n);d&&d.remove()}function a(d){d.style.display="flex",d.style.background="#7faaf0",d.style.position="fixed",d.style.bottom="5px",d.style.left="5px",d.style.padding=".5em",d.style.borderRadius="5px",d.style.alignItems="center"}function c(d,p){d.setAttribute("width","24"),d.setAttribute("id",p),d.setAttribute("height","24"),d.setAttribute("viewBox","0 0 24 24"),d.setAttribute("fill","none"),d.style.marginLeft="-6px"}function u(){const d=document.createElement("span");return d.style.cursor="pointer",d.style.marginLeft="16px",d.style.fontSize="24px",d.innerHTML=" &times;",d.onclick=()=>{H1=!0,s()},d}function l(d,p){d.setAttribute("id",p),d.innerText="Learn more",d.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",d.setAttribute("target","__blank"),d.style.paddingLeft="5px",d.style.textDecoration="underline"}function h(){const d=EI(n),p=t("text"),v=document.getElementById(p)||document.createElement("span"),y=t("learnmore"),w=document.getElementById(y)||document.createElement("a"),_=t("preprendIcon"),x=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(d.created){const T=d.element;a(T),l(w,y);const D=u();c(x,_),T.append(x,v,w,D),document.body.appendChild(T)}o?(v.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cr())}function II(){const r=Yu()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bI(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function TI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SI(){const r=cr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function RI(){return!II()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PI(){try{return typeof indexedDB=="object"}catch{return!1}}function OI(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI="FirebaseError";class Qn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=DI,Object.setPrototypeOf(this,Qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oa.prototype.create)}}class Oa{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?NI(o,n):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Qn(i,a,n)}}function NI(r,e){return r.replace(MI,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const MI=/\{\$([^}]+)}/g;function kI(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function no(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const o=r[i],s=e[i];if($1(o)&&$1(s)){if(!no(o,s))return!1}else if(o!==s)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function $1(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function LI(r,e){const t=new BI(r,e);return t.subscribe.bind(t)}class BI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");FI(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Zl),i.error===void 0&&(i.error=Zl),i.complete===void 0&&(i.complete=Zl);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FI(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Zl(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(r){return r&&r._delegate?r._delegate:r}class io{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new wI;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HI(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);n===a&&s.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const o=this.instances.get(n);return o&&e(o,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:UI(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UI(r){return r===Xi?void 0:r}function HI(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Se||(Se={}));const jI={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},GI=Se.INFO,WI={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},zI=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=WI[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jh{constructor(e){this.name=e,this._logLevel=GI,this._logHandler=zI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const qI=(r,e)=>e.some(t=>r instanceof t);let j1,G1;function XI(){return j1||(j1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KI(){return G1||(G1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const km=new WeakMap,Ff=new WeakMap,Lm=new WeakMap,Jl=new WeakMap,Gh=new WeakMap;function YI(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",o),r.removeEventListener("error",s)},o=()=>{t(wi(r.result)),i()},s=()=>{n(r.error),i()};r.addEventListener("success",o),r.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&km.set(t,r)}).catch(()=>{}),Gh.set(e,r),e}function QI(r){if(Ff.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",s),r.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",o),r.addEventListener("error",s),r.addEventListener("abort",s)});Ff.set(r,e)}let Vf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ff.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Lm.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ZI(r){Vf=r(Vf)}function JI(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(ef(this),e,...t);return Lm.set(n,e.sort?e.sort():[e]),wi(n)}:KI().includes(r)?function(...e){return r.apply(ef(this),e),wi(km.get(this))}:function(...e){return wi(r.apply(ef(this),e))}}function eC(r){return typeof r=="function"?JI(r):(r instanceof IDBTransaction&&QI(r),qI(r,XI())?new Proxy(r,Vf):r)}function wi(r){if(r instanceof IDBRequest)return YI(r);if(Jl.has(r))return Jl.get(r);const e=eC(r);return e!==r&&(Jl.set(r,e),Gh.set(e,r)),e}const ef=r=>Gh.get(r);function tC(r,e,{blocked:t,upgrade:n,blocking:i,terminated:o}={}){const s=indexedDB.open(r,e),a=wi(s);return n&&s.addEventListener("upgradeneeded",c=>{n(wi(s.result),c.oldVersion,c.newVersion,wi(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const rC=["get","getKey","getAll","getAllKeys","count"],nC=["put","add","delete","clear"],tf=new Map;function W1(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(tf.get(e))return tf.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=nC.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||rC.includes(t)))return;const o=async function(s,...a){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),i&&c.done]))[0]};return tf.set(e,o),o}ZI(r=>({...r,get:(e,t,n)=>W1(e,t)||r.get(e,t,n),has:(e,t)=>!!W1(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oC(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function oC(r){return r.getComponent()?.type==="VERSION"}const Uf="@firebase/app",z1="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new jh("@firebase/app"),sC="@firebase/app-compat",aC="@firebase/analytics-compat",cC="@firebase/analytics",uC="@firebase/app-check-compat",lC="@firebase/app-check",fC="@firebase/auth",hC="@firebase/auth-compat",dC="@firebase/database",pC="@firebase/data-connect",gC="@firebase/database-compat",vC="@firebase/functions",mC="@firebase/functions-compat",yC="@firebase/installations",wC="@firebase/installations-compat",_C="@firebase/messaging",xC="@firebase/messaging-compat",EC="@firebase/performance",AC="@firebase/performance-compat",IC="@firebase/remote-config",CC="@firebase/remote-config-compat",bC="@firebase/storage",TC="@firebase/storage-compat",SC="@firebase/firestore",RC="@firebase/ai",PC="@firebase/firestore-compat",OC="firebase",DC="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]",NC={[Uf]:"fire-core",[sC]:"fire-core-compat",[cC]:"fire-analytics",[aC]:"fire-analytics-compat",[lC]:"fire-app-check",[uC]:"fire-app-check-compat",[fC]:"fire-auth",[hC]:"fire-auth-compat",[dC]:"fire-rtdb",[pC]:"fire-data-connect",[gC]:"fire-rtdb-compat",[vC]:"fire-fn",[mC]:"fire-fn-compat",[yC]:"fire-iid",[wC]:"fire-iid-compat",[_C]:"fire-fcm",[xC]:"fire-fcm-compat",[EC]:"fire-perf",[AC]:"fire-perf-compat",[IC]:"fire-rc",[CC]:"fire-rc-compat",[bC]:"fire-gcs",[TC]:"fire-gcs-compat",[SC]:"fire-fst",[PC]:"fire-fst-compat",[RC]:"fire-vertex","fire-js":"fire-js",[OC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru=new Map,MC=new Map,$f=new Map;function q1(r,e){try{r.container.addComponent(e)}catch(t){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Jo(r){const e=r.name;if($f.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;$f.set(e,r);for(const t of ru.values())q1(t,r);for(const t of MC.values())q1(t,r);return!0}function Wh(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function mn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new Oa("app","Firebase",kC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=DC;function Bm(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Hf,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw _i.create("bad-app-name",{appName:String(i)});if(t||(t=Om()),!t)throw _i.create("no-options");const o=ru.get(i);if(o){if(no(t,o.options)&&no(n,o.config))return o;throw _i.create("duplicate-app",{appName:i})}const s=new $I(i);for(const c of $f.values())s.addComponent(c);const a=new LC(t,n,s);return ru.set(i,a),a}function Fm(r=Hf){const e=ru.get(r);if(!e&&r===Hf&&Om())return Bm();if(!e)throw _i.create("no-app",{appName:r});return e}function xi(r,e,t){let n=NC[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const s=[`Unable to register library "${n}" with version "${e}":`];i&&s.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(s.join(" "));return}Jo(new io(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="firebase-heartbeat-database",FC=1,_a="firebase-heartbeat-store";let rf=null;function Vm(){return rf||(rf=tC(BC,FC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(_a)}catch(t){console.warn(t)}}}}).catch(r=>{throw _i.create("idb-open",{originalErrorMessage:r.message})})),rf}async function VC(r){try{const t=(await Vm()).transaction(_a),n=await t.objectStore(_a).get(Um(r));return await t.done,n}catch(e){if(e instanceof Qn)Wn.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e?.message});Wn.warn(t.message)}}}async function X1(r,e){try{const n=(await Vm()).transaction(_a,"readwrite");await n.objectStore(_a).put(e,Um(r)),await n.done}catch(t){if(t instanceof Qn)Wn.warn(t.message);else{const n=_i.create("idb-set",{originalErrorMessage:t?.message});Wn.warn(n.message)}}}function Um(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=1024,HC=30;class $C{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new GC(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=K1();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>HC){const i=WC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Wn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=K1(),{heartbeatsToSend:t,unsentEntries:n}=jC(this._heartbeatsCache.heartbeats),i=tu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Wn.warn(e),""}}}function K1(){return new Date().toISOString().substring(0,10)}function jC(r,e=UC){const t=[];let n=r.slice();for(const i of r){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Y1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Y1(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class GC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PI()?OI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return X1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return X1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Y1(r){return tu(JSON.stringify({version:2,heartbeats:r})).length}function WC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(r){Jo(new io("platform-logger",e=>new iC(e),"PRIVATE")),Jo(new io("heartbeat",e=>new $C(e),"PRIVATE")),xi(Uf,z1,r),xi(Uf,z1,"esm2020"),xi("fire-js","")}zC("");var qC="firebase",XC="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi(qC,XC,"app");function Hm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KC=Hm,$m=new Oa("auth","Firebase",Hm());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new jh("@firebase/auth");function YC(r,...e){nu.logLevel<=Se.WARN&&nu.warn(`Auth (${hs}): ${r}`,...e)}function Nc(r,...e){nu.logLevel<=Se.ERROR&&nu.error(`Auth (${hs}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(r,...e){throw zh(r,...e)}function xn(r,...e){return zh(r,...e)}function jm(r,e,t){const n={...KC(),[e]:t};return new Oa("auth","Firebase",n).create(e,{appName:r.name})}function Ji(r){return jm(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zh(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return $m.create(r,...e)}function ye(r,e,...t){if(!r)throw zh(e,...t)}function Vn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Nc(e),new Error(e)}function qn(r,e){r||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(){return typeof self<"u"&&self.location?.href||""}function QC(){return Q1()==="http:"||Q1()==="https:"}function Q1(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QC()||bI()||"connection"in navigator)?navigator.onLine:!0}function JC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,t){this.shortDelay=e,this.longDelay=t,qn(t>e,"Short delay should be less than long delay!"),this.isMobile=AI()||TI()}get(){return ZC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(r,e){qn(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rb=new Na(3e4,6e4);function Xh(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ds(r,e,t,n,i={}){return Wm(r,i,async()=>{let o={},s={};n&&(e==="GET"?s=n:o={body:JSON.stringify(n)});const a=Da({key:r.config.apiKey,...s}).slice(1),c=await r._getAdditionalHeaders();c["Content-Type"]="application/json",r.languageCode&&(c["X-Firebase-Locale"]=r.languageCode);const u={method:e,headers:c,...o};return CI()||(u.referrerPolicy="no-referrer"),r.emulatorConfig&&fs(r.emulatorConfig.host)&&(u.credentials="include"),Gm.fetch()(await zm(r,r.config.apiHost,t,a),u)})}async function Wm(r,e,t){r._canInitEmulator=!1;const n={...eb,...e};try{const i=new ib(r),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw gc(r,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(r,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw gc(r,"email-already-in-use",s);if(c==="USER_DISABLED")throw gc(r,"user-disabled",s);const l=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw jm(r,l,u);zn(r,l)}}catch(i){if(i instanceof Qn)throw i;zn(r,"network-request-failed",{message:String(i)})}}async function nb(r,e,t,n,i={}){const o=await ds(r,e,t,n,i);return"mfaPendingCredential"in o&&zn(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function zm(r,e,t,n){const i=`${e}${t}?${n}`,o=r,s=o.config.emulator?qh(r.config,i):`${r.config.apiScheme}://${i}`;return tb.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class ib{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(xn(this.auth,"network-request-failed")),rb.get())})}}function gc(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=xn(r,e,n);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(r,e){return ds(r,"POST","/v1/accounts:delete",e)}async function iu(r,e){return ds(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sb(r,e=!1){const t=Sr(r),n=await t.getIdToken(e),i=Kh(n);ye(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:n,authTime:ca(nf(i.auth_time)),issuedAtTime:ca(nf(i.iat)),expirationTime:ca(nf(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function nf(r){return Number(r)*1e3}function Kh(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const i=Rm(t);return i?JSON.parse(i):(Nc("Failed to decode base64 JWT payload"),null)}catch(i){return Nc("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Z1(r){const e=Kh(r);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Qn&&ab(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function ab({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ca(this.lastLoginAt),this.creationTime=ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(r){const e=r.auth,t=await r.getIdToken(),n=await xa(r,iu(e,{idToken:t}));ye(n?.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const o=i.providerUserInfo?.length?qm(i.providerUserInfo):[],s=lb(r.providerData,o),a=r.isAnonymous,c=!(r.email&&i.passwordHash)&&!s?.length,u=a?c:!1,l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Gf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(r,l)}async function ub(r){const e=Sr(r);await ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lb(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function qm(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fb(r,e){const t=await Wm(r,{},async()=>{const n=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=r.config,s=await zm(r,i,"/v1/token",`key=${o}`),a=await r._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:n};return r.emulatorConfig&&fs(r.emulatorConfig.host)&&(c.credentials="include"),Gm.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hb(r,e){return ds(r,"POST","/v2/accounts:revokeToken",Xh(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const t=Z1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:o}=await fb(e,t);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:o}=t,s=new Ho;return n&&(ye(typeof n=="string","internal-error",{appName:e}),s.refreshToken=n),i&&(ye(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ye(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(r,e){ye(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class an{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new cb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await xa(this,this.stsTokenManager.getToken(this.auth,e));return ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sb(this,e)}reload(){return ub(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new an({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ou(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await xa(this,ob(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,l=t.lastLoginAt??void 0,{uid:h,emailVerified:d,isAnonymous:p,providerData:v,stsTokenManager:y}=t;ye(h&&y,e,"internal-error");const w=Ho.fromJSON(this.name,y);ye(typeof h=="string",e,"internal-error"),ii(n,e.name),ii(i,e.name),ye(typeof d=="boolean",e,"internal-error"),ye(typeof p=="boolean",e,"internal-error"),ii(o,e.name),ii(s,e.name),ii(a,e.name),ii(c,e.name),ii(u,e.name),ii(l,e.name);const _=new an({uid:h,auth:e,email:i,emailVerified:d,displayName:n,isAnonymous:p,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:w,createdAt:u,lastLoginAt:l});return v&&Array.isArray(v)&&(_.providerData=v.map(x=>({...x}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,t,n=!1){const i=new Ho;i.updateFromServerResponse(t);const o=new an({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await ou(o),o}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];ye(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?qm(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ho;a.updateFromIdToken(n);const c=new an({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Gf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Map;function Un(r){qn(r instanceof Function,"Expected a class definition");let e=J1.get(r);return e?(qn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,J1.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Xm.type="NONE";const ep=Xm;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(r,e,t){return`firebase:${r}:${e}:${t}`}class $o{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=Mc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Mc("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await iu(this.auth,{idToken:e}).catch(()=>{});return t?an._fromGetAccountInfoResponse(this.auth,t,e):null}return an._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new $o(Un(ep),e,n);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Un(ep);const s=Mc(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const l=await u._get(s);if(l){let h;if(typeof l=="string"){const d=await iu(e,{idToken:l}).catch(()=>{});if(!d)break;h=await an._fromGetAccountInfoResponse(e,d,l)}else h=an._fromJSON(e,l);u!==o&&(a=h),o=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new $o(o,e,n):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new $o(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Km(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ey(e))return"Blackberry";if(ty(e))return"Webos";if(Ym(e))return"Safari";if((e.includes("chrome/")||Qm(e))&&!e.includes("edge/"))return"Chrome";if(Jm(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function Km(r=cr()){return/firefox\//i.test(r)}function Ym(r=cr()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qm(r=cr()){return/crios\//i.test(r)}function Zm(r=cr()){return/iemobile/i.test(r)}function Jm(r=cr()){return/android/i.test(r)}function ey(r=cr()){return/blackberry/i.test(r)}function ty(r=cr()){return/webos/i.test(r)}function Yh(r=cr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function db(r=cr()){return Yh(r)&&!!window.navigator?.standalone}function pb(){return SI()&&document.documentMode===10}function ry(r=cr()){return Yh(r)||Jm(r)||ty(r)||ey(r)||/windows phone/i.test(r)||Zm(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(r,e=[]){let t;switch(r){case"Browser":t=tp(cr());break;case"Worker":t=`${tp(cr())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${hs}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=o=>new Promise((s,a)=>{try{const c=e(o);s(c)}catch(c){a(c)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(r,e={}){return ds(r,"GET","/v2/passwordPolicy",Xh(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=6;class yb{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??mb,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rp(this),this.idTokenSubscription=new rp(this),this.beforeStateQueue=new gb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Un(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await $o.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await iu(this,{idToken:e}),n=await an._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,s=n?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(n=a.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ou(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Ji(this));const t=e?Sr(e):null;return t&&ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vb(this),t=new yb(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Oa("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await hb(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Un(e)||this._popupRedirectResolver;ye(t,this,"argument-error"),this.redirectPersistenceManager=await $o.create(this,[Un(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,n,i);return()=>{s=!0,c()}}else{const c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ny(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&YC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qh(r){return Sr(r)}class rp{constructor(e){this.auth=e,this.observer=null,this.addObserver=LI(t=>this.observer=t)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _b(r){Zh=r}function xb(r){return Zh.loadJS(r)}function Eb(){return Zh.gapiScript}function Ab(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(r,e){const t=Wh(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(no(o,e??{}))return i;zn(i,"already-initialized")}return t.initialize({options:e})}function Cb(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(Un);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function bb(r,e,t){const n=Qh(r);ye(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=iy(e),{host:s,port:a}=Tb(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},l=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){ye(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ye(no(u,n.config.emulator)&&no(l,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=l,n.settings.appVerificationDisabledForTesting=!0,fs(s)?(Nm(`${o}//${s}${c}`),Mm("Auth",!0)):Sb()}function iy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Tb(r){const e=iy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:np(n.substr(o.length+1))}}else{const[o,s]=n.split(":");return{host:o,port:np(s)}}}function np(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Sb(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,t){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(r,e){return nb(r,"POST","/v1/accounts:signInWithIdp",Xh(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="http://localhost";class oo extends oy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...o}=t;if(!n||!i)return null;const s=new oo(n,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const t=this.buildRequest();return jo(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,jo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jo(e,t)}buildRequest(){const e={requestUri:Rb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Da(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends sy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Ma{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Ma{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oo._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return hi.credential(t,n)}catch{return null}}}hi.GOOGLE_SIGN_IN_METHOD="google.com";hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Ma{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.GITHUB_SIGN_IN_METHOD="github.com";di.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Ma{constructor(){super("twitter.com")}static credential(e,t){return oo._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return pi.credential(t,n)}catch{return null}}}pi.TWITTER_SIGN_IN_METHOD="twitter.com";pi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const o=await an._fromIdTokenResponse(e,n,i),s=ip(n);return new es({user:o,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ip(n);return new es({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ip(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends Qn{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,su.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new su(e,t,n,i)}}function ay(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?su._fromErrorAndOperation(r,o,e,n):o})}async function Pb(r,e,t=!1){const n=await xa(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return es._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(r,e,t=!1){const{auth:n}=r;if(mn(n.app))return Promise.reject(Ji(n));const i="reauthenticate";try{const o=await xa(r,ay(n,i,e,r),t);ye(o.idToken,n,"internal-error");const s=Kh(o.idToken);ye(s,n,"internal-error");const{sub:a}=s;return ye(r.uid===a,n,"user-mismatch"),es._forOperation(r,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&zn(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(r,e,t=!1){if(mn(r.app))return Promise.reject(Ji(r));const n="signIn",i=await ay(r,n,e),o=await es._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(o.user),o}function Nb(r,e,t,n){return Sr(r).onIdTokenChanged(e,t,n)}function Mb(r,e,t){return Sr(r).beforeAuthStateChanged(e,t)}const au="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(au,"1"),this.storage.removeItem(au),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=1e3,Lb=10;class uy extends cy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ry(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((s,a,c)=>{this.notifyListeners(s,c)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(n);!t&&this.localCache[n]===s||this.notifyListeners(n,s)},o=this.storage.getItem(n);pb()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Lb):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},kb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uy.type="LOCAL";const Bb=uy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly extends cy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ly.type="SESSION";const fy=ly;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Qu(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:o}=t.data,s=this.handlersMap[i];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const a=Array.from(s).map(async u=>u(t.origin,o)),c=await Fb(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{const u=Jh("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(h){const d=h;if(d.data.eventId===u)switch(d.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(d.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function Ub(r){En().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function Hb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $b(){return navigator?.serviceWorker?.controller||null}function jb(){return hy()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="firebaseLocalStorageDb",Gb=1,cu="firebaseLocalStorage",py="fbase_key";class ka{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Zu(r,e){return r.transaction([cu],e?"readwrite":"readonly").objectStore(cu)}function Wb(){const r=indexedDB.deleteDatabase(dy);return new ka(r).toPromise()}function Wf(){const r=indexedDB.open(dy,Gb);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(cu,{keyPath:py})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(cu)?e(n):(n.close(),await Wb(),e(await Wf()))})})}async function op(r,e,t){const n=Zu(r,!0).put({[py]:e,value:t});return new ka(n).toPromise()}async function zb(r,e){const t=Zu(r,!1).get(e),n=await new ka(t).toPromise();return n===void 0?null:n.value}function sp(r,e){const t=Zu(r,!0).delete(e);return new ka(t).toPromise()}const qb=800,Xb=3;class gy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Xb)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qu._getInstance(jb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Hb(),!this.activeServiceWorker)return;this.sender=new Vb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$b()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wf();return await op(e,au,"1"),await sp(e,au),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>op(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>zb(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sp(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Zu(i,!1).getAll();return new ka(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gy.type="LOCAL";const Kb=gy;new Na(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(r,e){return e?Un(e):(ye(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed extends oy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qb(r){return Db(r.auth,new ed(r),r.bypassAuthState)}function Zb(r){const{auth:e,user:t}=r;return ye(t,e,"internal-error"),Ob(t,new ed(r),r.bypassAuthState)}async function Jb(r){const{auth:e,user:t}=r;return ye(t,e,"internal-error"),Pb(t,new ed(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qb;case"linkViaPopup":case"linkViaRedirect":return Jb;case"reauthViaPopup":case"reauthViaRedirect":return Zb;default:zn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=new Na(2e3,1e4);class Po extends vy{constructor(e,t,n,i,o){super(e,t,i,o),this.provider=n,this.authWindow=null,this.pollId=null,Po.currentPopupAction&&Po.currentPopupAction.cancel(),Po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Jh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Po.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eT.get())};e()}}Po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="pendingRedirect",kc=new Map;class rT extends vy{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=kc.get(this.auth._key());if(!e){try{const n=await nT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}kc.set(this.auth._key(),e)}return this.bypassAuthState||kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nT(r,e){const t=sT(e),n=oT(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function iT(r,e){kc.set(r._key(),e)}function oT(r){return Un(r._redirectPersistence)}function sT(r){return Mc(tT,r.config.apiKey,r.name)}async function aT(r,e,t=!1){if(mn(r.app))return Promise.reject(Ji(r));const n=Qh(r),i=Yb(n,e),s=await new rT(n,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await n._persistUserIfCurrent(s.user),await n._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=600*1e3;class uT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!my(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(xn(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cT&&this.cachedEventUids.clear(),this.cachedEventUids.has(ap(e))}saveEventToCache(e){this.cachedEventUids.add(ap(e)),this.lastProcessedEventTime=Date.now()}}function ap(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function my({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function lT(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return my(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fT(r,e={}){return ds(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dT=/^https?/;async function pT(r){if(r.config.emulator)return;const{authorizedDomains:e}=await fT(r);for(const t of e)try{if(gT(t))return}catch{}zn(r,"unauthorized-domain")}function gT(r){const e=jf(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const s=new URL(r);return s.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===n}if(!dT.test(t))return!1;if(hT.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT=new Na(3e4,6e4);function cp(){const r=En().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function mT(r){return new Promise((e,t)=>{function n(){cp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cp(),t(xn(r,"network-request-failed"))},timeout:vT.get()})}if(En().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(En().gapi?.load)n();else{const i=Ab("iframefcb");return En()[i]=()=>{gapi.load?n():t(xn(r,"network-request-failed"))},xb(`${Eb()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Lc=null,e})}let Lc=null;function yT(r){return Lc=Lc||mT(r),Lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new Na(5e3,15e3),_T="__/auth/iframe",xT="emulator/auth/iframe",ET={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IT(r){const e=r.config;ye(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?qh(e,xT):`https://${r.config.authDomain}/${_T}`,n={apiKey:e.apiKey,appName:r.name,v:hs},i=AT.get(r.config.apiHost);i&&(n.eid=i);const o=r._getFrameworks();return o.length&&(n.fw=o.join(",")),`${t}?${Da(n).slice(1)}`}async function CT(r){const e=await yT(r),t=En().gapi;return ye(t,r,"internal-error"),e.open({where:document.body,url:IT(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ET,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const s=xn(r,"network-request-failed"),a=En().setTimeout(()=>{o(s)},wT.get());function c(){En().clearTimeout(a),i(n)}n.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TT=500,ST=600,RT="_blank",PT="http://localhost";class up{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OT(r,e,t,n=TT,i=ST){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const c={...bT,width:n.toString(),height:i.toString(),top:o,left:s},u=cr().toLowerCase();t&&(a=Qm(u)?RT:t),Km(u)&&(e=e||PT,c.scrollbars="yes");const l=Object.entries(c).reduce((d,[p,v])=>`${d}${p}=${v},`,"");if(db(u)&&a!=="_self")return DT(e||"",a),new up(null);const h=window.open(e||"",a,l);ye(h,r,"popup-blocked");try{h.focus()}catch{}return new up(h)}function DT(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__/auth/handler",MT="emulator/auth/handler",kT=encodeURIComponent("fac");async function lp(r,e,t,n,i,o){ye(r.config.authDomain,r,"auth-domain-config-required"),ye(r.config.apiKey,r,"invalid-api-key");const s={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:hs,eventId:i};if(e instanceof sy){e.setDefaultLanguage(r.languageCode),s.providerId=e.providerId||"",kI(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,h]of Object.entries({}))s[l]=h}if(e instanceof Ma){const l=e.getScopes().filter(h=>h!=="");l.length>0&&(s.scopes=l.join(","))}r.tenantId&&(s.tid=r.tenantId);const a=s;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];const c=await r._getAppCheckToken(),u=c?`#${kT}=${encodeURIComponent(c)}`:"";return`${LT(r)}?${Da(a).slice(1)}${u}`}function LT({config:r}){return r.emulator?qh(r,MT):`https://${r.authDomain}/${NT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="webStorageSupport";class BT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fy,this._completeRedirectFn=aT,this._overrideRedirectResult=iT}async _openPopup(e,t,n,i){qn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await lp(e,t,n,jf(),i);return OT(e,o,Jh())}async _openRedirect(e,t,n,i){await this._originValidation(e);const o=await lp(e,t,n,jf(),i);return Ub(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(qn(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await CT(e),n=new uT(e);return t.register("authEvent",i=>(ye(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(of,{type:of},i=>{const o=i?.[0]?.[of];o!==void 0&&t(!!o),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ry()||Ym()||Yh()}}const FT=BT;var fp="@firebase/auth",hp="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HT(r){Jo(new io("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=n.options;ye(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:s,authDomain:a,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ny(r)},u=new wb(n,i,o,c);return Cb(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Jo(new io("auth-internal",e=>{const t=Qh(e.getProvider("auth").getImmediate());return(n=>new VT(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xi(fp,hp,UT(r)),xi(fp,hp,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=300,jT=Dm("authIdTokenMaxAge")||$T;let dp=null;const GT=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>jT)return;const i=t?.token;dp!==i&&(dp=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function WT(r=Fm()){const e=Wh(r,"auth");if(e.isInitialized())return e.getImmediate();const t=Ib(r,{popupRedirectResolver:FT,persistence:[Kb,Bb,fy]}),n=Dm("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const s=GT(o.toString());Mb(t,s,()=>s(t.currentUser)),Nb(t,a=>s(a))}}const i=Pm("auth");return i&&bb(t,`http://${i}`),t}function zT(){return document.getElementsByTagName("head")?.[0]??document}_b({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const o=xn("internal-error");o.customData=i,t(o)},n.type="text/javascript",n.charset="UTF-8",zT().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HT("Browser");var pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ei,yy;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function b(){}b.prototype=A.prototype,C.D=A.prototype,C.prototype=new b,C.prototype.constructor=C,C.C=function(P,N,M){for(var S=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)S[Ke-2]=arguments[Ke];return A.prototype[N].apply(P,S)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,A,b){b||(b=0);var P=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)P[N]=A.charCodeAt(b++)|A.charCodeAt(b++)<<8|A.charCodeAt(b++)<<16|A.charCodeAt(b++)<<24;else for(N=0;16>N;++N)P[N]=A[b++]|A[b++]<<8|A[b++]<<16|A[b++]<<24;A=C.g[0],b=C.g[1],N=C.g[2];var M=C.g[3],S=A+(M^b&(N^M))+P[0]+3614090360&4294967295;A=b+(S<<7&4294967295|S>>>25),S=M+(N^A&(b^N))+P[1]+3905402710&4294967295,M=A+(S<<12&4294967295|S>>>20),S=N+(b^M&(A^b))+P[2]+606105819&4294967295,N=M+(S<<17&4294967295|S>>>15),S=b+(A^N&(M^A))+P[3]+3250441966&4294967295,b=N+(S<<22&4294967295|S>>>10),S=A+(M^b&(N^M))+P[4]+4118548399&4294967295,A=b+(S<<7&4294967295|S>>>25),S=M+(N^A&(b^N))+P[5]+1200080426&4294967295,M=A+(S<<12&4294967295|S>>>20),S=N+(b^M&(A^b))+P[6]+2821735955&4294967295,N=M+(S<<17&4294967295|S>>>15),S=b+(A^N&(M^A))+P[7]+4249261313&4294967295,b=N+(S<<22&4294967295|S>>>10),S=A+(M^b&(N^M))+P[8]+1770035416&4294967295,A=b+(S<<7&4294967295|S>>>25),S=M+(N^A&(b^N))+P[9]+2336552879&4294967295,M=A+(S<<12&4294967295|S>>>20),S=N+(b^M&(A^b))+P[10]+4294925233&4294967295,N=M+(S<<17&4294967295|S>>>15),S=b+(A^N&(M^A))+P[11]+2304563134&4294967295,b=N+(S<<22&4294967295|S>>>10),S=A+(M^b&(N^M))+P[12]+1804603682&4294967295,A=b+(S<<7&4294967295|S>>>25),S=M+(N^A&(b^N))+P[13]+4254626195&4294967295,M=A+(S<<12&4294967295|S>>>20),S=N+(b^M&(A^b))+P[14]+2792965006&4294967295,N=M+(S<<17&4294967295|S>>>15),S=b+(A^N&(M^A))+P[15]+1236535329&4294967295,b=N+(S<<22&4294967295|S>>>10),S=A+(N^M&(b^N))+P[1]+4129170786&4294967295,A=b+(S<<5&4294967295|S>>>27),S=M+(b^N&(A^b))+P[6]+3225465664&4294967295,M=A+(S<<9&4294967295|S>>>23),S=N+(A^b&(M^A))+P[11]+643717713&4294967295,N=M+(S<<14&4294967295|S>>>18),S=b+(M^A&(N^M))+P[0]+3921069994&4294967295,b=N+(S<<20&4294967295|S>>>12),S=A+(N^M&(b^N))+P[5]+3593408605&4294967295,A=b+(S<<5&4294967295|S>>>27),S=M+(b^N&(A^b))+P[10]+38016083&4294967295,M=A+(S<<9&4294967295|S>>>23),S=N+(A^b&(M^A))+P[15]+3634488961&4294967295,N=M+(S<<14&4294967295|S>>>18),S=b+(M^A&(N^M))+P[4]+3889429448&4294967295,b=N+(S<<20&4294967295|S>>>12),S=A+(N^M&(b^N))+P[9]+568446438&4294967295,A=b+(S<<5&4294967295|S>>>27),S=M+(b^N&(A^b))+P[14]+3275163606&4294967295,M=A+(S<<9&4294967295|S>>>23),S=N+(A^b&(M^A))+P[3]+4107603335&4294967295,N=M+(S<<14&4294967295|S>>>18),S=b+(M^A&(N^M))+P[8]+1163531501&4294967295,b=N+(S<<20&4294967295|S>>>12),S=A+(N^M&(b^N))+P[13]+2850285829&4294967295,A=b+(S<<5&4294967295|S>>>27),S=M+(b^N&(A^b))+P[2]+4243563512&4294967295,M=A+(S<<9&4294967295|S>>>23),S=N+(A^b&(M^A))+P[7]+1735328473&4294967295,N=M+(S<<14&4294967295|S>>>18),S=b+(M^A&(N^M))+P[12]+2368359562&4294967295,b=N+(S<<20&4294967295|S>>>12),S=A+(b^N^M)+P[5]+4294588738&4294967295,A=b+(S<<4&4294967295|S>>>28),S=M+(A^b^N)+P[8]+2272392833&4294967295,M=A+(S<<11&4294967295|S>>>21),S=N+(M^A^b)+P[11]+1839030562&4294967295,N=M+(S<<16&4294967295|S>>>16),S=b+(N^M^A)+P[14]+4259657740&4294967295,b=N+(S<<23&4294967295|S>>>9),S=A+(b^N^M)+P[1]+2763975236&4294967295,A=b+(S<<4&4294967295|S>>>28),S=M+(A^b^N)+P[4]+1272893353&4294967295,M=A+(S<<11&4294967295|S>>>21),S=N+(M^A^b)+P[7]+4139469664&4294967295,N=M+(S<<16&4294967295|S>>>16),S=b+(N^M^A)+P[10]+3200236656&4294967295,b=N+(S<<23&4294967295|S>>>9),S=A+(b^N^M)+P[13]+681279174&4294967295,A=b+(S<<4&4294967295|S>>>28),S=M+(A^b^N)+P[0]+3936430074&4294967295,M=A+(S<<11&4294967295|S>>>21),S=N+(M^A^b)+P[3]+3572445317&4294967295,N=M+(S<<16&4294967295|S>>>16),S=b+(N^M^A)+P[6]+76029189&4294967295,b=N+(S<<23&4294967295|S>>>9),S=A+(b^N^M)+P[9]+3654602809&4294967295,A=b+(S<<4&4294967295|S>>>28),S=M+(A^b^N)+P[12]+3873151461&4294967295,M=A+(S<<11&4294967295|S>>>21),S=N+(M^A^b)+P[15]+530742520&4294967295,N=M+(S<<16&4294967295|S>>>16),S=b+(N^M^A)+P[2]+3299628645&4294967295,b=N+(S<<23&4294967295|S>>>9),S=A+(N^(b|~M))+P[0]+4096336452&4294967295,A=b+(S<<6&4294967295|S>>>26),S=M+(b^(A|~N))+P[7]+1126891415&4294967295,M=A+(S<<10&4294967295|S>>>22),S=N+(A^(M|~b))+P[14]+2878612391&4294967295,N=M+(S<<15&4294967295|S>>>17),S=b+(M^(N|~A))+P[5]+4237533241&4294967295,b=N+(S<<21&4294967295|S>>>11),S=A+(N^(b|~M))+P[12]+1700485571&4294967295,A=b+(S<<6&4294967295|S>>>26),S=M+(b^(A|~N))+P[3]+2399980690&4294967295,M=A+(S<<10&4294967295|S>>>22),S=N+(A^(M|~b))+P[10]+4293915773&4294967295,N=M+(S<<15&4294967295|S>>>17),S=b+(M^(N|~A))+P[1]+2240044497&4294967295,b=N+(S<<21&4294967295|S>>>11),S=A+(N^(b|~M))+P[8]+1873313359&4294967295,A=b+(S<<6&4294967295|S>>>26),S=M+(b^(A|~N))+P[15]+4264355552&4294967295,M=A+(S<<10&4294967295|S>>>22),S=N+(A^(M|~b))+P[6]+2734768916&4294967295,N=M+(S<<15&4294967295|S>>>17),S=b+(M^(N|~A))+P[13]+1309151649&4294967295,b=N+(S<<21&4294967295|S>>>11),S=A+(N^(b|~M))+P[4]+4149444226&4294967295,A=b+(S<<6&4294967295|S>>>26),S=M+(b^(A|~N))+P[11]+3174756917&4294967295,M=A+(S<<10&4294967295|S>>>22),S=N+(A^(M|~b))+P[2]+718787259&4294967295,N=M+(S<<15&4294967295|S>>>17),S=b+(M^(N|~A))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+M&4294967295}n.prototype.u=function(C,A){A===void 0&&(A=C.length);for(var b=A-this.blockSize,P=this.B,N=this.h,M=0;M<A;){if(N==0)for(;M<=b;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<A;)if(P[N++]=C.charCodeAt(M++),N==this.blockSize){i(this,P),N=0;break}}else for(;M<A;)if(P[N++]=C[M++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=A},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;var b=8*this.o;for(A=C.length-8;A<C.length;++A)C[A]=b&255,b/=256;for(this.u(C),C=Array(16),A=b=0;4>A;++A)for(var P=0;32>P;P+=8)C[b++]=this.g[A]>>>P&255;return C};function o(C,A){var b=a;return Object.prototype.hasOwnProperty.call(b,C)?b[C]:b[C]=A(C)}function s(C,A){this.h=A;for(var b=[],P=!0,N=C.length-1;0<=N;N--){var M=C[N]|0;P&&M==A||(b[N]=M,P=!1)}this.g=b}var a={};function c(C){return-128<=C&&128>C?o(C,function(A){return new s([A|0],0>A?-1:0)}):new s([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return w(u(-C));for(var A=[],b=1,P=0;C>=b;P++)A[P]=C/b|0,b*=4294967296;return new s(A,0)}function l(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return w(l(C.substring(1),A));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=u(Math.pow(A,8)),P=h,N=0;N<C.length;N+=8){var M=Math.min(8,C.length-N),S=parseInt(C.substring(N,N+M),A);8>M?(M=u(Math.pow(A,M)),P=P.j(M).add(u(S))):(P=P.j(b),P=P.add(u(S)))}return P}var h=c(0),d=c(1),p=c(16777216);r=s.prototype,r.m=function(){if(y(this))return-w(this).m();for(var C=0,A=1,b=0;b<this.g.length;b++){var P=this.i(b);C+=(0<=P?P:4294967296+P)*A,A*=4294967296}return C},r.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(y(this))return"-"+w(this).toString(C);for(var A=u(Math.pow(C,6)),b=this,P="";;){var N=D(b,A).g;b=_(b,N.j(A));var M=((0<b.g.length?b.g[0]:b.h)>>>0).toString(C);if(b=N,v(b))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},r.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(var A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function y(C){return C.h==-1}r.l=function(C){return C=_(this,C),y(C)?-1:v(C)?0:1};function w(C){for(var A=C.g.length,b=[],P=0;P<A;P++)b[P]=~C.g[P];return new s(b,~C.h).add(d)}r.abs=function(){return y(this)?w(this):this},r.add=function(C){for(var A=Math.max(this.g.length,C.g.length),b=[],P=0,N=0;N<=A;N++){var M=P+(this.i(N)&65535)+(C.i(N)&65535),S=(M>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);P=S>>>16,M&=65535,S&=65535,b[N]=S<<16|M}return new s(b,b[b.length-1]&-2147483648?-1:0)};function _(C,A){return C.add(w(A))}r.j=function(C){if(v(this)||v(C))return h;if(y(this))return y(C)?w(this).j(w(C)):w(w(this).j(C));if(y(C))return w(this.j(w(C)));if(0>this.l(p)&&0>C.l(p))return u(this.m()*C.m());for(var A=this.g.length+C.g.length,b=[],P=0;P<2*A;P++)b[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<C.g.length;N++){var M=this.i(P)>>>16,S=this.i(P)&65535,Ke=C.i(N)>>>16,vt=C.i(N)&65535;b[2*P+2*N]+=S*vt,x(b,2*P+2*N),b[2*P+2*N+1]+=M*vt,x(b,2*P+2*N+1),b[2*P+2*N+1]+=S*Ke,x(b,2*P+2*N+1),b[2*P+2*N+2]+=M*Ke,x(b,2*P+2*N+2)}for(P=0;P<A;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=A;P<2*A;P++)b[P]=0;return new s(b,0)};function x(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function T(C,A){this.g=C,this.h=A}function D(C,A){if(v(A))throw Error("division by zero");if(v(C))return new T(h,h);if(y(C))return A=D(w(C),A),new T(w(A.g),w(A.h));if(y(A))return A=D(C,w(A)),new T(w(A.g),A.h);if(30<C.g.length){if(y(C)||y(A))throw Error("slowDivide_ only works with positive integers.");for(var b=d,P=A;0>=P.l(C);)b=F(b),P=F(P);var N=H(b,1),M=H(P,1);for(P=H(P,2),b=H(b,2);!v(P);){var S=M.add(P);0>=S.l(C)&&(N=N.add(b),M=S),P=H(P,1),b=H(b,1)}return A=_(C,N.j(A)),new T(N,A)}for(N=h;0<=C.l(A);){for(b=Math.max(1,Math.floor(C.m()/A.m())),P=Math.ceil(Math.log(b)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=u(b),S=M.j(A);y(S)||0<S.l(C);)b-=P,M=u(b),S=M.j(A);v(M)&&(M=d),N=N.add(M),C=_(C,S)}return new T(N,C)}r.A=function(C){return D(this,C).h},r.and=function(C){for(var A=Math.max(this.g.length,C.g.length),b=[],P=0;P<A;P++)b[P]=this.i(P)&C.i(P);return new s(b,this.h&C.h)},r.or=function(C){for(var A=Math.max(this.g.length,C.g.length),b=[],P=0;P<A;P++)b[P]=this.i(P)|C.i(P);return new s(b,this.h|C.h)},r.xor=function(C){for(var A=Math.max(this.g.length,C.g.length),b=[],P=0;P<A;P++)b[P]=this.i(P)^C.i(P);return new s(b,this.h^C.h)};function F(C){for(var A=C.g.length+1,b=[],P=0;P<A;P++)b[P]=C.i(P)<<1|C.i(P-1)>>>31;return new s(b,C.h)}function H(C,A){var b=A>>5;A%=32;for(var P=C.g.length-b,N=[],M=0;M<P;M++)N[M]=0<A?C.i(M+b)>>>A|C.i(M+b+1)<<32-A:C.i(M+b);return new s(N,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,yy=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=l,Ei=s}).apply(typeof pp<"u"?pp:typeof self<"u"?self:typeof window<"u"?window:{});var vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wy,Gs,_y,Bc,zf,xy,Ey,Ay;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,m){return f==Array.prototype||f==Object.prototype||(f[g]=m.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof vc=="object"&&vc];for(var g=0;g<f.length;++g){var m=f[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var n=t(this);function i(f,g){if(g)e:{var m=n;f=f.split(".");for(var E=0;E<f.length-1;E++){var L=f[E];if(!(L in m))break e;m=m[L]}f=f[f.length-1],E=m[f],g=g(E),g!=E&&g!=null&&e(m,f,{configurable:!0,writable:!0,value:g})}}function o(f,g){f instanceof String&&(f+="");var m=0,E=!1,L={next:function(){if(!E&&m<f.length){var V=m++;return{value:g(V,f[V]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(f){return f||function(){return o(this,function(g,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function c(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function u(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function l(f,g,m){return f.call.apply(f.bind,arguments)}function h(f,g,m){if(!f)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),f.apply(g,L)}}return function(){return f.apply(g,arguments)}}function d(f,g,m){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:h,d.apply(null,arguments)}function p(f,g){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),f.apply(this,E)}}function v(f,g){function m(){}m.prototype=g.prototype,f.aa=g.prototype,f.prototype=new m,f.prototype.constructor=f,f.Qb=function(E,L,V){for(var ee=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)ee[Qe-2]=arguments[Qe];return g.prototype[L].apply(E,ee)}}function y(f){const g=f.length;if(0<g){const m=Array(g);for(let E=0;E<g;E++)m[E]=f[E];return m}return[]}function w(f,g){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(c(E)){const L=f.length||0,V=E.length||0;f.length=L+V;for(let ee=0;ee<V;ee++)f[L+ee]=E[ee]}else f.push(E)}}class _{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(f){return/^[\s\xa0]*$/.test(f)}function T(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function D(f){return D[" "](f),f}D[" "]=function(){};var F=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function H(f,g,m){for(const E in f)g.call(m,f[E],E,f)}function C(f,g){for(const m in f)g.call(void 0,f[m],m,f)}function A(f){const g={};for(const m in f)g[m]=f[m];return g}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(f,g){let m,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(m in E)f[m]=E[m];for(let V=0;V<b.length;V++)m=b[V],Object.prototype.hasOwnProperty.call(E,m)&&(f[m]=E[m])}}function N(f){var g=1;f=f.split(":");const m=[];for(;0<g&&f.length;)m.push(f.shift()),g--;return f.length&&m.push(f.join(":")),m}function M(f){a.setTimeout(()=>{throw f},0)}function S(){var f=Pr;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class Ke{constructor(){this.h=this.g=null}add(g,m){const E=vt.get();E.set(g,m),this.h?this.h.next=E:this.g=E,this.h=E}}var vt=new _(()=>new ct,f=>f.reset());class ct{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let be,Ie=!1,Pr=new Ke,Zr=()=>{const f=a.Promise.resolve(void 0);be=()=>{f.then(Vr)}};var Vr=()=>{for(var f;f=S();){try{f.h.call(f.g)}catch(m){M(m)}var g=vt;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}Ie=!1};function lt(){this.s=this.s,this.C=this.C}lt.prototype.s=!1,lt.prototype.ma=function(){this.s||(this.s=!0,this.N())},lt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var Zn=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const m=()=>{};a.addEventListener("test",m,g),a.removeEventListener("test",m,g)}catch{}return f})();function fn(f,g){if(ft.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var m=this.type=f.type,E=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(F){e:{try{D(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else m=="mouseover"?g=f.fromElement:m=="mouseout"&&(g=f.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:_r[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&fn.aa.h.call(this)}}v(fn,ft);var _r={2:"touch",3:"pen",4:"mouse"};fn.prototype.h=function(){fn.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),ie=0;function re(f,g,m,E,L){this.listener=f,this.proxy=null,this.src=g,this.type=m,this.capture=!!E,this.ha=L,this.key=++ie,this.da=this.fa=!1}function se(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ke(f){this.src=f,this.g={},this.h=0}ke.prototype.add=function(f,g,m,E,L){var V=f.toString();f=this.g[V],f||(f=this.g[V]=[],this.h++);var ee=O(f,g,E,L);return-1<ee?(g=f[ee],m||(g.fa=!1)):(g=new re(g,this.src,V,!!E,L),g.fa=m,f.push(g)),g};function R(f,g){var m=g.type;if(m in f.g){var E=f.g[m],L=Array.prototype.indexOf.call(E,g,void 0),V;(V=0<=L)&&Array.prototype.splice.call(E,L,1),V&&(se(g),f.g[m].length==0&&(delete f.g[m],f.h--))}}function O(f,g,m,E){for(var L=0;L<f.length;++L){var V=f[L];if(!V.da&&V.listener==g&&V.capture==!!m&&V.ha==E)return L}return-1}var k="closure_lm_"+(1e6*Math.random()|0),G={};function q(f,g,m,E,L){if(Array.isArray(g)){for(var V=0;V<g.length;V++)q(f,g[V],m,E,L);return null}return m=me(m),f&&f[j]?f.K(g,m,u(E)?!!E.capture:!1,L):W(f,g,m,!1,E,L)}function W(f,g,m,E,L,V){if(!g)throw Error("Invalid event type");var ee=u(L)?!!L.capture:!!L,Qe=ne(f);if(Qe||(f[k]=Qe=new ke(f)),m=Qe.add(g,m,E,ee,V),m.proxy)return m;if(E=te(),m.proxy=E,E.src=f,E.listener=m,f.addEventListener)Zn||(L=ee),L===void 0&&(L=!1),f.addEventListener(g.toString(),E,L);else if(f.attachEvent)f.attachEvent(Y(g.toString()),E);else if(f.addListener&&f.removeListener)f.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function te(){function f(m){return g.call(f.src,f.listener,m)}const g=de;return f}function J(f,g,m,E,L){if(Array.isArray(g))for(var V=0;V<g.length;V++)J(f,g[V],m,E,L);else E=u(E)?!!E.capture:!!E,m=me(m),f&&f[j]?(f=f.i,g=String(g).toString(),g in f.g&&(V=f.g[g],m=O(V,m,E,L),-1<m&&(se(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete f.g[g],f.h--)))):f&&(f=ne(f))&&(g=f.g[g.toString()],f=-1,g&&(f=O(g,m,E,L)),(m=-1<f?g[f]:null)&&Q(m))}function Q(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[j])R(g.i,f);else{var m=f.type,E=f.proxy;g.removeEventListener?g.removeEventListener(m,E,f.capture):g.detachEvent?g.detachEvent(Y(m),E):g.addListener&&g.removeListener&&g.removeListener(E),(m=ne(g))?(R(m,f),m.h==0&&(m.src=null,g[k]=null)):se(f)}}}function Y(f){return f in G?G[f]:G[f]="on"+f}function de(f,g){if(f.da)f=!0;else{g=new fn(g,this);var m=f.listener,E=f.ha||f.src;f.fa&&Q(f),f=m.call(E,g)}return f}function ne(f){return f=f[k],f instanceof ke?f:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function me(f){return typeof f=="function"?f:(f[ue]||(f[ue]=function(g){return f.handleEvent(g)}),f[ue])}function ge(){lt.call(this),this.i=new ke(this),this.M=this,this.F=null}v(ge,lt),ge.prototype[j]=!0,ge.prototype.removeEventListener=function(f,g,m,E){J(this,f,g,m,E)};function Ae(f,g){var m,E=f.F;if(E)for(m=[];E;E=E.F)m.push(E);if(f=f.M,E=g.type||g,typeof g=="string")g=new ft(g,f);else if(g instanceof ft)g.target=g.target||f;else{var L=g;g=new ft(E,f),P(g,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var ee=g.g=m[V];L=Oe(ee,E,!0,g)&&L}if(ee=g.g=f,L=Oe(ee,E,!0,g)&&L,L=Oe(ee,E,!1,g)&&L,m)for(V=0;V<m.length;V++)ee=g.g=m[V],L=Oe(ee,E,!1,g)&&L}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var m=f.g[g],E=0;E<m.length;E++)se(m[E]);delete f.g[g],f.h--}}this.F=null},ge.prototype.K=function(f,g,m,E){return this.i.add(String(f),g,!1,m,E)},ge.prototype.L=function(f,g,m,E){return this.i.add(String(f),g,!0,m,E)};function Oe(f,g,m,E){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,V=0;V<g.length;++V){var ee=g[V];if(ee&&!ee.da&&ee.capture==m){var Qe=ee.listener,jt=ee.ha||ee.src;ee.fa&&R(f.i,ee),L=Qe.call(jt,E)!==!1&&L}}return L&&!E.defaultPrevented}function Ut(f,g,m){if(typeof f=="function")m&&(f=d(f,m));else if(f&&typeof f.handleEvent=="function")f=d(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(f,g||0)}function Ht(f){f.g=Ut(()=>{f.g=null,f.i&&(f.i=!1,Ht(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class Ur extends lt{constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(f){lt.call(this),this.h=f,this.g={}}v(Qt,lt);var Jn=[];function Is(f){H(f.g,function(g,m){this.g.hasOwnProperty(m)&&Q(g)},f),f.g={}}Qt.prototype.N=function(){Qt.aa.N.call(this),Is(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=a.JSON.stringify,Hr=a.JSON.parse,Ya=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function vo(){}vo.prototype.h=null;function t0(f){return f.h||(f.h=f.i())}function r0(){}var Cs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Il(){ft.call(this,"d")}v(Il,ft);function Cl(){ft.call(this,"c")}v(Cl,ft);var Fi={},n0=null;function Qa(){return n0=n0||new ge}Fi.La="serverreachability";function i0(f){ft.call(this,Fi.La,f)}v(i0,ft);function bs(f){const g=Qa();Ae(g,new i0(g))}Fi.STAT_EVENT="statevent";function o0(f,g){ft.call(this,Fi.STAT_EVENT,f),this.stat=g}v(o0,ft);function fr(f){const g=Qa();Ae(g,new o0(g,f))}Fi.Ma="timingevent";function s0(f,g){ft.call(this,Fi.Ma,f),this.size=g}v(s0,ft);function Ts(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},g)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function c_(f,g,m,E,L,V){f.info(function(){if(f.g)if(V)for(var ee="",Qe=V.split("&"),jt=0;jt<Qe.length;jt++){var Le=Qe[jt].split("=");if(1<Le.length){var Zt=Le[0];Le=Le[1];var Jt=Zt.split("_");ee=2<=Jt.length&&Jt[1]=="type"?ee+(Zt+"="+Le+"&"):ee+(Zt+"=redacted&")}}else ee=null;else ee=V;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+g+`
`+m+`
`+ee})}function u_(f,g,m,E,L,V,ee){f.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+g+`
`+m+`
`+V+" "+ee})}function mo(f,g,m,E){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+f_(f,m)+(E?" "+E:"")})}function l_(f,g){f.info(function(){return"TIMEOUT: "+g})}Ss.prototype.info=function(){};function f_(f,g){if(!f.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(f=0;f<m.length;f++)if(Array.isArray(m[f])){var E=m[f];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var ee=1;ee<L.length;ee++)L[ee]=""}}}}return $t(m)}catch{return g}}var Za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},a0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bl;function Ja(){}v(Ja,vo),Ja.prototype.g=function(){return new XMLHttpRequest},Ja.prototype.i=function(){return{}},bl=new Ja;function ei(f,g,m,E){this.j=f,this.i=g,this.l=m,this.R=E||1,this.U=new Qt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new c0}function c0(){this.i=null,this.g="",this.h=!1}var u0={},Tl={};function Sl(f,g,m){f.L=1,f.v=nc(Dn(g)),f.m=m,f.P=!0,l0(f,null)}function l0(f,g){f.F=Date.now(),ec(f),f.A=Dn(f.v);var m=f.A,E=f.R;Array.isArray(E)||(E=[String(E)]),I0(m.i,"t",E),f.C=0,m=f.j.J,f.h=new c0,f.g=$0(f.j,m?g:null,!f.m),0<f.O&&(f.M=new Ur(d(f.Y,f,f.g),f.O)),g=f.U,m=f.g,E=f.ca;var L="readystatechange";Array.isArray(L)||(L&&(Jn[0]=L.toString()),L=Jn);for(var V=0;V<L.length;V++){var ee=q(m,L[V],E||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),bs(),c_(f.i,f.u,f.A,f.l,f.R,f.m)}ei.prototype.ca=function(f){f=f.target;const g=this.M;g&&Nn(f)==3?g.j():this.Y(f)},ei.prototype.Y=function(f){try{if(f==this.g)e:{const Jt=Nn(this.g);var g=this.g.Ba();const _o=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||O0(this.g)))){this.J||Jt!=4||g==7||(g==8||0>=_o?bs(3):bs(2)),Rl(this);var m=this.g.Z();this.X=m;t:if(f0(this)){var E=O0(this.g);f="";var L=E.length,V=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vi(this),Rs(this);var ee="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,f+=this.h.i.decode(E[g],{stream:!(V&&g==L-1)});E.length=0,this.h.g+=f,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=m==200,u_(this.i,this.u,this.A,this.l,this.R,Jt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,jt=this.g;if((Qe=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Qe)){var Le=Qe;break t}}Le=null}if(m=Le)mo(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pl(this,m);else{this.o=!1,this.s=3,fr(12),Vi(this),Rs(this);break e}}if(this.P){m=!0;let Jr;for(;!this.J&&this.C<ee.length;)if(Jr=h_(this,ee),Jr==Tl){Jt==4&&(this.s=4,fr(14),m=!1),mo(this.i,this.l,null,"[Incomplete Response]");break}else if(Jr==u0){this.s=4,fr(15),mo(this.i,this.l,ee,"[Invalid Chunk]"),m=!1;break}else mo(this.i,this.l,Jr,null),Pl(this,Jr);if(f0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||ee.length!=0||this.h.h||(this.s=1,fr(16),m=!1),this.o=this.o&&m,!m)mo(this.i,this.l,ee,"[Invalid Chunked Response]"),Vi(this),Rs(this);else if(0<ee.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Ll(Zt),Zt.M=!0,fr(11))}}else mo(this.i,this.l,ee,null),Pl(this,ee);Jt==4&&Vi(this),this.o&&!this.J&&(Jt==4?F0(this.j,this):(this.o=!1,ec(this)))}else R_(this.g),m==400&&0<ee.indexOf("Unknown SID")?(this.s=3,fr(12)):(this.s=0,fr(13)),Vi(this),Rs(this)}}}catch{}finally{}};function f0(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function h_(f,g){var m=f.C,E=g.indexOf(`
`,m);return E==-1?Tl:(m=Number(g.substring(m,E)),isNaN(m)?u0:(E+=1,E+m>g.length?Tl:(g=g.slice(E,E+m),f.C=E+m,g)))}ei.prototype.cancel=function(){this.J=!0,Vi(this)};function ec(f){f.S=Date.now()+f.I,h0(f,f.I)}function h0(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ts(d(f.ba,f),g)}function Rl(f){f.B&&(a.clearTimeout(f.B),f.B=null)}ei.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(l_(this.i,this.A),this.L!=2&&(bs(),fr(17)),Vi(this),this.s=2,Rs(this)):h0(this,this.S-f)};function Rs(f){f.j.G==0||f.J||F0(f.j,f)}function Vi(f){Rl(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,Is(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function Pl(f,g){try{var m=f.j;if(m.G!=0&&(m.g==f||Ol(m.h,f))){if(!f.K&&Ol(m.h,f)&&m.G==3){try{var E=m.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<f.F)uc(m),ac(m);else break e;kl(m),fr(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ts(d(m.Za,m),6e3));if(1>=g0(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Hi(m,11)}else if((f.K||m.g==f)&&uc(m),!x(g))for(L=m.Da.g.parse(g),g=0;g<L.length;g++){let Le=L[g];if(m.T=Le[0],Le=Le[1],m.G==2)if(Le[0]=="c"){m.K=Le[1],m.ia=Le[2];const Zt=Le[3];Zt!=null&&(m.la=Zt,m.j.info("VER="+m.la));const Jt=Le[4];Jt!=null&&(m.Aa=Jt,m.j.info("SVER="+m.Aa));const _o=Le[5];_o!=null&&typeof _o=="number"&&0<_o&&(E=1.5*_o,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const Jr=f.g;if(Jr){const fc=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fc){var V=E.h;V.g||fc.indexOf("spdy")==-1&&fc.indexOf("quic")==-1&&fc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Dl(V,V.h),V.h=null))}if(E.D){const Bl=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Bl&&(E.ya=Bl,nt(E.I,E.D,Bl))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-f.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var ee=f;if(E.qa=H0(E,E.J?E.ia:null,E.W),ee.K){v0(E.h,ee);var Qe=ee,jt=E.L;jt&&(Qe.I=jt),Qe.B&&(Rl(Qe),ec(Qe)),E.g=ee}else L0(E);0<m.i.length&&cc(m)}else Le[0]!="stop"&&Le[0]!="close"||Hi(m,7);else m.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Hi(m,7):Ml(m):Le[0]!="noop"&&m.l&&m.l.ta(Le),m.v=0)}}bs(4)}catch{}}var d_=class{constructor(f,g){this.g=f,this.map=g}};function d0(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function p0(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function g0(f){return f.h?1:f.g?f.g.size:0}function Ol(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Dl(f,g){f.g?f.g.add(g):f.h=g}function v0(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}d0.prototype.cancel=function(){if(this.i=m0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function m0(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const m of f.g.values())g=g.concat(m.D);return g}return y(f.i)}function p_(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var g=[],m=f.length,E=0;E<m;E++)g.push(f[E]);return g}g=[],m=0;for(E in f)g[m++]=f[E];return g}function g_(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var g=[];f=f.length;for(var m=0;m<f;m++)g.push(m);return g}g=[],m=0;for(const E in f)g[m++]=E;return g}}}function y0(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var m=g_(f),E=p_(f),L=E.length,V=0;V<L;V++)g.call(void 0,E[V],m&&m[V],f)}var w0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function v_(f,g){if(f){f=f.split("&");for(var m=0;m<f.length;m++){var E=f[m].indexOf("="),L=null;if(0<=E){var V=f[m].substring(0,E);L=f[m].substring(E+1)}else V=f[m];g(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Ui(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ui){this.h=f.h,tc(this,f.j),this.o=f.o,this.g=f.g,rc(this,f.s),this.l=f.l;var g=f.i,m=new Ds;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),_0(this,m),this.m=f.m}else f&&(g=String(f).match(w0))?(this.h=!1,tc(this,g[1]||"",!0),this.o=Ps(g[2]||""),this.g=Ps(g[3]||"",!0),rc(this,g[4]),this.l=Ps(g[5]||"",!0),_0(this,g[6]||"",!0),this.m=Ps(g[7]||"")):(this.h=!1,this.i=new Ds(null,this.h))}Ui.prototype.toString=function(){var f=[],g=this.j;g&&f.push(Os(g,x0,!0),":");var m=this.g;return(m||g=="file")&&(f.push("//"),(g=this.o)&&f.push(Os(g,x0,!0),"@"),f.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&f.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&f.push("/"),f.push(Os(m,m.charAt(0)=="/"?w_:y_,!0))),(m=this.i.toString())&&f.push("?",m),(m=this.m)&&f.push("#",Os(m,x_)),f.join("")};function Dn(f){return new Ui(f)}function tc(f,g,m){f.j=m?Ps(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function rc(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function _0(f,g,m){g instanceof Ds?(f.i=g,E_(f.i,f.h)):(m||(g=Os(g,__)),f.i=new Ds(g,f.h))}function nt(f,g,m){f.i.set(g,m)}function nc(f){return nt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ps(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Os(f,g,m){return typeof f=="string"?(f=encodeURI(f).replace(g,m_),m&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function m_(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var x0=/[#\/\?@]/g,y_=/[#\?:]/g,w_=/[#\?]/g,__=/[#\?@]/g,x_=/#/g;function Ds(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function ti(f){f.g||(f.g=new Map,f.h=0,f.i&&v_(f.i,function(g,m){f.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}r=Ds.prototype,r.add=function(f,g){ti(this),this.i=null,f=yo(this,f);var m=this.g.get(f);return m||this.g.set(f,m=[]),m.push(g),this.h+=1,this};function E0(f,g){ti(f),g=yo(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function A0(f,g){return ti(f),g=yo(f,g),f.g.has(g)}r.forEach=function(f,g){ti(this),this.g.forEach(function(m,E){m.forEach(function(L){f.call(g,L,E,this)},this)},this)},r.na=function(){ti(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let E=0;E<g.length;E++){const L=f[E];for(let V=0;V<L.length;V++)m.push(g[E])}return m},r.V=function(f){ti(this);let g=[];if(typeof f=="string")A0(this,f)&&(g=g.concat(this.g.get(yo(this,f))));else{f=Array.from(this.g.values());for(let m=0;m<f.length;m++)g=g.concat(f[m])}return g},r.set=function(f,g){return ti(this),this.i=null,f=yo(this,f),A0(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},r.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function I0(f,g,m){E0(f,g),0<m.length&&(f.i=null,f.g.set(yo(f,g),y(m)),f.h+=m.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var E=g[m];const V=encodeURIComponent(String(E)),ee=this.V(E);for(E=0;E<ee.length;E++){var L=V;ee[E]!==""&&(L+="="+encodeURIComponent(String(ee[E]))),f.push(L)}}return this.i=f.join("&")};function yo(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function E_(f,g){g&&!f.j&&(ti(f),f.i=null,f.g.forEach(function(m,E){var L=E.toLowerCase();E!=L&&(E0(this,E),I0(this,L,m))},f)),f.j=g}function A_(f,g){const m=new Ss;if(a.Image){const E=new Image;E.onload=p(ri,m,"TestLoadImage: loaded",!0,g,E),E.onerror=p(ri,m,"TestLoadImage: error",!1,g,E),E.onabort=p(ri,m,"TestLoadImage: abort",!1,g,E),E.ontimeout=p(ri,m,"TestLoadImage: timeout",!1,g,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=f}else g(!1)}function I_(f,g){const m=new Ss,E=new AbortController,L=setTimeout(()=>{E.abort(),ri(m,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:E.signal}).then(V=>{clearTimeout(L),V.ok?ri(m,"TestPingServer: ok",!0,g):ri(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),ri(m,"TestPingServer: error",!1,g)})}function ri(f,g,m,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(m)}catch{}}function C_(){this.g=new Ya}function b_(f,g,m){const E=m||"";try{y0(f,function(L,V){let ee=L;u(L)&&(ee=$t(L)),g.push(E+V+"="+encodeURIComponent(ee))})}catch(L){throw g.push(E+"type="+encodeURIComponent("_badmap")),L}}function ic(f){this.l=f.Ub||null,this.j=f.eb||!1}v(ic,vo),ic.prototype.g=function(){return new oc(this.l,this.j)},ic.prototype.i=(function(f){return function(){return f}})({});function oc(f,g){ge.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(oc,ge),r=oc.prototype,r.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,Ms(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ns(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ms(this)),this.g&&(this.readyState=3,Ms(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;C0(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function C0(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?Ns(this):Ms(this),this.readyState==3&&C0(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Ns(this))},r.Qa=function(f){this.g&&(this.response=f,Ns(this))},r.ga=function(){this.g&&Ns(this)};function Ns(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ms(f)}r.setRequestHeader=function(f,g){this.u.append(f,g)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,f.push(m[0]+": "+m[1]),m=g.next();return f.join(`\r
`)};function Ms(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(oc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function b0(f){let g="";return H(f,function(m,E){g+=E,g+=":",g+=m,g+=`\r
`}),g}function Nl(f,g,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=b0(m),typeof f=="string"?m!=null&&encodeURIComponent(String(m)):nt(f,g,m))}function gt(f){ge.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(gt,ge);var T_=/^https?$/i,S_=["POST","PUT"];r=gt.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,g,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bl.g(),this.v=this.o?t0(this.o):t0(bl),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(V){T0(this,V);return}if(f=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)m.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())m.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(S_,g,void 0))||E||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,ee]of m)this.g.setRequestHeader(V,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{P0(this),this.u=!0,this.g.send(f),this.u=!1}catch(V){T0(this,V)}};function T0(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,S0(f),sc(f)}function S0(f){f.A||(f.A=!0,Ae(f,"complete"),Ae(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ae(this,"complete"),Ae(this,"abort"),sc(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sc(this,!0)),gt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?R0(this):this.bb())},r.bb=function(){R0(this)};function R0(f){if(f.h&&typeof s<"u"&&(!f.v[1]||Nn(f)!=4||f.Z()!=2)){if(f.u&&Nn(f)==4)Ut(f.Ea,0,f);else if(Ae(f,"readystatechange"),Nn(f)==4){f.h=!1;try{const ee=f.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var E;if(E=ee===0){var L=String(f.D).match(w0)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),E=!T_.test(L?L.toLowerCase():"")}m=E}if(m)Ae(f,"complete"),Ae(f,"success");else{f.m=6;try{var V=2<Nn(f)?f.g.statusText:""}catch{V=""}f.l=V+" ["+f.Z()+"]",S0(f)}}finally{sc(f)}}}}function sc(f,g){if(f.g){P0(f);const m=f.g,E=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||Ae(f,"ready");try{m.onreadystatechange=E}catch{}}}function P0(f){f.I&&(a.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function Nn(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),Hr(g)}};function O0(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function R_(f){const g={};f=(f.g&&2<=Nn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<f.length;E++){if(x(f[E]))continue;var m=N(f[E]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=g[L]||[];g[L]=V,V.push(m)}C(g,function(E){return E.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(f,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[f]||g}function D0(f){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,f),this.cb=ks("retryDelaySeedMs",1e4,f),this.Wa=ks("forwardChannelMaxRetries",2,f),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new d0(f&&f.concurrentRequestLimit),this.Da=new C_,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=D0.prototype,r.la=8,r.G=1,r.connect=function(f,g,m,E){fr(0),this.W=f,this.H=g||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=H0(this,null,this.W),cc(this)};function Ml(f){if(N0(f),f.G==3){var g=f.U++,m=Dn(f.I);if(nt(m,"SID",f.K),nt(m,"RID",g),nt(m,"TYPE","terminate"),Ls(f,m),g=new ei(f,f.j,g),g.L=2,g.v=nc(Dn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=g.v,m=!0),m||(g.g=$0(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ec(g)}U0(f)}function ac(f){f.g&&(Ll(f),f.g.cancel(),f.g=null)}function N0(f){ac(f),f.u&&(a.clearTimeout(f.u),f.u=null),uc(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function cc(f){if(!p0(f.h)&&!f.s){f.s=!0;var g=f.Ga;be||Zr(),Ie||(be(),Ie=!0),Pr.add(g,f),f.B=0}}function P_(f,g){return g0(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ts(d(f.Ga,f,g),V0(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const L=new ei(this,this.j,f);let V=this.o;if(this.S&&(V?(V=A(V),P(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=k0(this,L,g),m=Dn(this.I),nt(m,"RID",f),nt(m,"CVER",22),this.D&&nt(m,"X-HTTP-Session-Id",this.D),Ls(this,m),V&&(this.O?g="headers="+encodeURIComponent(String(b0(V)))+"&"+g:this.m&&Nl(m,this.m,V)),Dl(this.h,L),this.Ua&&nt(m,"TYPE","init"),this.P?(nt(m,"$req",g),nt(m,"SID","null"),L.T=!0,Sl(L,m,null)):Sl(L,m,g),this.G=2}}else this.G==3&&(f?M0(this,f):this.i.length==0||p0(this.h)||M0(this))};function M0(f,g){var m;g?m=g.l:m=f.U++;const E=Dn(f.I);nt(E,"SID",f.K),nt(E,"RID",m),nt(E,"AID",f.T),Ls(f,E),f.m&&f.o&&Nl(E,f.m,f.o),m=new ei(f,f.j,m,f.B+1),f.m===null&&(m.H=f.o),g&&(f.i=g.D.concat(f.i)),g=k0(f,m,1e3),m.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Dl(f.h,m),Sl(m,E,g)}function Ls(f,g){f.H&&H(f.H,function(m,E){nt(g,E,m)}),f.l&&y0({},function(m,E){nt(g,E,m)})}function k0(f,g,m){m=Math.min(f.i.length,m);var E=f.l?d(f.l.Na,f.l,f):null;e:{var L=f.i;let V=-1;for(;;){const ee=["count="+m];V==-1?0<m?(V=L[0].g,ee.push("ofs="+V)):V=0:ee.push("ofs="+V);let Qe=!0;for(let jt=0;jt<m;jt++){let Le=L[jt].g;const Zt=L[jt].map;if(Le-=V,0>Le)V=Math.max(0,L[jt].g-100),Qe=!1;else try{b_(Zt,ee,"req"+Le+"_")}catch{E&&E(Zt)}}if(Qe){E=ee.join("&");break e}}}return f=f.i.splice(0,m),g.D=f,E}function L0(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;be||Zr(),Ie||(be(),Ie=!0),Pr.add(g,f),f.v=0}}function kl(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ts(d(f.Fa,f),V0(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,B0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ts(d(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fr(10),ac(this),B0(this))};function Ll(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function B0(f){f.g=new ei(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=Dn(f.qa);nt(g,"RID","rpc"),nt(g,"SID",f.K),nt(g,"AID",f.T),nt(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&nt(g,"TO",f.ja),nt(g,"TYPE","xmlhttp"),Ls(f,g),f.m&&f.o&&Nl(g,f.m,f.o),f.L&&(f.g.I=f.L);var m=f.g;f=f.ia,m.L=1,m.v=nc(Dn(g)),m.m=null,m.P=!0,l0(m,f)}r.Za=function(){this.C!=null&&(this.C=null,ac(this),kl(this),fr(19))};function uc(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function F0(f,g){var m=null;if(f.g==g){uc(f),Ll(f),f.g=null;var E=2}else if(Ol(f.h,g))m=g.D,v0(f.h,g),E=1;else return;if(f.G!=0){if(g.o)if(E==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var L=f.B;E=Qa(),Ae(E,new s0(E,m)),cc(f)}else L0(f);else if(L=g.s,L==3||L==0&&0<g.X||!(E==1&&P_(f,g)||E==2&&kl(f)))switch(m&&0<m.length&&(g=f.h,g.i=g.i.concat(m)),L){case 1:Hi(f,5);break;case 4:Hi(f,10);break;case 3:Hi(f,6);break;default:Hi(f,2)}}}function V0(f,g){let m=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(m*=2),m*g}function Hi(f,g){if(f.j.info("Error code "+g),g==2){var m=d(f.fb,f),E=f.Xa;const L=!E;E=new Ui(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tc(E,"https"),nc(E),L?A_(E.toString(),m):I_(E.toString(),m)}else fr(2);f.G=0,f.l&&f.l.sa(g),U0(f),N0(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),fr(2)):(this.j.info("Failed to ping google.com"),fr(1))};function U0(f){if(f.G=0,f.ka=[],f.l){const g=m0(f.h);(g.length!=0||f.i.length!=0)&&(w(f.ka,g),w(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function H0(f,g,m){var E=m instanceof Ui?Dn(m):new Ui(m);if(E.g!="")g&&(E.g=g+"."+E.g),rc(E,E.s);else{var L=a.location;E=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var V=new Ui(null);E&&tc(V,E),g&&(V.g=g),L&&rc(V,L),m&&(V.l=m),E=V}return m=f.D,g=f.ya,m&&g&&nt(E,m,g),nt(E,"VER",f.la),Ls(f,E),E}function $0(f,g,m){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new gt(new ic({eb:m})):new gt(f.pa),g.Ha(f.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function j0(){}r=j0.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function lc(){}lc.prototype.g=function(f,g){return new Or(f,g)};function Or(f,g){ge.call(this),this.g=new D0(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!x(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new wo(this)}v(Or,ge),Or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Or.prototype.close=function(){Ml(this.g)},Or.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var m={};m.__data__=f,f=m}else this.u&&(m={},m.__data__=$t(f),f=m);g.i.push(new d_(g.Ya++,f)),g.G==3&&cc(g)},Or.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,Or.aa.N.call(this)};function G0(f){Il.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const m in g){f=m;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}v(G0,Il);function W0(){Cl.call(this),this.status=1}v(W0,Cl);function wo(f){this.g=f}v(wo,j0),wo.prototype.ua=function(){Ae(this.g,"a")},wo.prototype.ta=function(f){Ae(this.g,new G0(f))},wo.prototype.sa=function(f){Ae(this.g,new W0)},wo.prototype.ra=function(){Ae(this.g,"b")},lc.prototype.createWebChannel=lc.prototype.g,Or.prototype.send=Or.prototype.o,Or.prototype.open=Or.prototype.m,Or.prototype.close=Or.prototype.close,Ay=function(){return new lc},Ey=function(){return Qa()},xy=Fi,zf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,Bc=Za,a0.COMPLETE="complete",_y=a0,r0.EventType=Cs,Cs.OPEN="a",Cs.CLOSE="b",Cs.ERROR="c",Cs.MESSAGE="d",ge.prototype.listen=ge.prototype.K,Gs=r0,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,wy=gt}).apply(typeof vc<"u"?vc:typeof self<"u"?self:typeof window<"u"?window:{});const gp="@firebase/firestore",vp="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rr.UNAUTHENTICATED=new rr(null),rr.GOOGLE_CREDENTIALS=new rr("google-credentials-uid"),rr.FIRST_PARTY=new rr("first-party-uid"),rr.MOCK_USER=new rr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ps="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new jh("@firebase/firestore");function bo(){return so.logLevel}function oe(r,...e){if(so.logLevel<=Se.DEBUG){const t=e.map(td);so.debug(`Firestore (${ps}): ${r}`,...t)}}function Xn(r,...e){if(so.logLevel<=Se.ERROR){const t=e.map(td);so.error(`Firestore (${ps}): ${r}`,...t)}}function ts(r,...e){if(so.logLevel<=Se.WARN){const t=e.map(td);so.warn(`Firestore (${ps}): ${r}`,...t)}}function td(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,Iy(r,n,t)}function Iy(r,e,t){let n=`FIRESTORE (${ps}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Xn(n),new Error(n)}function ze(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||Iy(e,i,n)}function xe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Qn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(rr.UNAUTHENTICATED)))}shutdown(){}}class XT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class KT{constructor(e){this.t=e,this.currentUser=rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0,42304);let n=this.i;const i=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve();let o=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ai,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},a=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ai)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ze(typeof n.accessToken=="string",31837,{l:n}),new Cy(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new rr(e)}}class YT{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=rr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class QT{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new YT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(rr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZT{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ze(this.o===void 0,3512);const n=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>n(o)))};const i=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mp(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=JT(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<t&&(n+=e.charAt(i[o]%62))}return n}}function Re(r,e){return r<e?-1:r>e?1:0}function qf(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),o=e.charAt(n);if(i!==o)return sf(i)===sf(o)?Re(i,o):sf(i)?1:-1}return Re(r.length,e.length)}const e3=55296,t3=57343;function sf(r){const e=r.charCodeAt(0);return e>=e3&&e<=t3}function rs(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="__name__";class pn{constructor(e,t,n){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ve(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const o=pn.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Re(e.length,t.length)}static compareSegments(e,t){const n=pn.isNumericId(e),i=pn.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?pn.extractNumericId(e).compare(pn.extractNumericId(t)):qf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ei.fromString(e.substring(4,e.length-2))}}class st extends pn{construct(e,t,n){return new st(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ce(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const r3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends pn{construct(e,t,n){return new Xt(e,t,n)}static isValidIdentifier(e){return r3.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yp}static keyField(){return new Xt([yp])}static fromServerFormat(e){const t=[];let n="",i=0;const o=()=>{if(n.length===0)throw new ce(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ce(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(n+=a,i++):(o(),i++)}if(o(),s)throw new ce(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(st.fromString(e))}static fromName(e){return new he(st.fromString(e).popFirst(5))}static empty(){return new he(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(r,e,t){if(!t)throw new ce(K.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function n3(r,e,t,n){if(e===!0&&n===!0)throw new ce(K.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function wp(r){if(!he.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function _p(r){if(he.isDocumentKey(r))throw new ce(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Ty(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function nd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ve(12329,{type:typeof r})}function ao(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nd(r);throw new ce(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(r,e){const t={typeString:r};return e&&(t.value=e),t}function La(r,e){if(!Ty(r))throw new ce(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,o="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const s=r[n];if(i&&typeof s!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${n}' field to equal '${o.value}'`;break}}if(t)throw new ce(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=-62135596800,Ep=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Ep);return new at(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xp)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ep}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(La(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:At("string",at._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new at(0,0))}static max(){return new we(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=-1;function i3(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=we.fromTimestamp(n===1e9?new at(t+1,0):new at(t,n));return new Ri(i,he.empty(),e)}function o3(r){return new Ri(r.readTime,r.key,Ea)}class Ri{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ri(we.min(),he.empty(),Ea)}static max(){return new Ri(we.max(),he.empty(),Ea)}}function s3(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(r.documentKey,e.documentKey),t!==0?t:Re(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(r){if(r.code!==K.FAILED_PRECONDITION||r.message!==a3)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,n)=>{t(e)}))}static reject(e){return new z(((t,n)=>{n(e)}))}static waitFor(e){return new z(((t,n)=>{let i=0,o=0,s=!1;e.forEach((a=>{++i,a.next((()=>{++o,s&&o===i&&t()}),(c=>n(c)))})),s=!0,o===i&&t()}))}static or(e){let t=z.resolve(!1);for(const n of e)t=t.next((i=>i?z.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,o)=>{n.push(t.call(this,i,o))})),this.waitFor(n)}static mapArray(e,t){return new z(((n,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;t(e[u]).next((l=>{s[u]=l,++a,a===o&&n(s)}),(l=>i(l)))}}))}static doWhile(e,t){return new z(((n,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):n()};o()}))}}function u3(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function vs(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ju.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=-1;function el(r){return r==null}function uu(r){return r===0&&1/r==-1/0}function l3(r){return typeof r=="number"&&Number.isInteger(r)&&!uu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="";function f3(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Ap(e)),e=h3(r.get(t),e);return Ap(e)}function h3(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const o=r.charAt(i);switch(o){case"\0":t+="";break;case Sy:t+="";break;default:t+=o}}return t}function Ap(r){return r+Sy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Li(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Ry(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||zt.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mc(this.root,e,this.comparator,!1)}getReverseIterator(){return new mc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mc(this.root,e,this.comparator,!0)}}class mc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,t,n,i,o){this.key=e,this.value=t,this.color=n??zt.RED,this.left=i??zt.EMPTY,this.right=o??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,o){return new zt(e??this.key,t??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,n),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,n,i,o){return this}insert(e,t,n){return new zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cp(this.data.getIterator())}getIteratorFrom(e){return new Cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class Cp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new kr([])}unionWith(e){let t=new Nt(Xt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rs(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Py("Invalid base64 string: "+o):o}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const d3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(r){if(ze(!!r,39018),typeof r=="string"){let e=0;const t=d3.exec(r);if(ze(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:wt(r.seconds),nanos:wt(r.nanos)}}function wt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Oi(r){return typeof r=="string"?Yt.fromBase64String(r):Yt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="server_timestamp",Dy="__type__",Ny="__previous_value__",My="__local_write_time__";function od(r){return(r?.mapValue?.fields||{})[Dy]?.stringValue===Oy}function tl(r){const e=r.mapValue.fields[Ny];return od(e)?tl(e):e}function Aa(r){const e=Pi(r.mapValue.fields[My].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e,t,n,i,o,s,a,c,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=l}}const lu="(default)";class Ia{constructor(e,t){this.projectId=e,this.database=t||lu}static empty(){return new Ia("","")}get isDefaultDatabase(){return this.database===lu}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="__type__",g3="__max__",yc={mapValue:{}},Ly="__vector__",fu="value";function Di(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?od(r)?4:m3(r)?9007199254740991:v3(r)?10:11:ve(28295,{value:r})}function Sn(r,e){if(r===e)return!0;const t=Di(r);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Aa(r).isEqual(Aa(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Pi(i.timestampValue),a=Pi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,o){return Oi(i.bytesValue).isEqual(Oi(o.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,o){return wt(i.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(o.geoPointValue.longitude)})(r,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return wt(i.integerValue)===wt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=wt(i.doubleValue),a=wt(o.doubleValue);return s===a?uu(s)===uu(a):isNaN(s)&&isNaN(a)}return!1})(r,e);case 9:return rs(r.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return(function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Ip(s)!==Ip(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Sn(s[c],a[c])))return!1;return!0})(r,e);default:return ve(52216,{left:r})}}function Ca(r,e){return(r.values||[]).find((t=>Sn(t,e)))!==void 0}function ns(r,e){if(r===e)return 0;const t=Di(r),n=Di(e);if(t!==n)return Re(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(r.booleanValue,e.booleanValue);case 2:return(function(o,s){const a=wt(o.integerValue||o.doubleValue),c=wt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(r,e);case 3:return bp(r.timestampValue,e.timestampValue);case 4:return bp(Aa(r),Aa(e));case 5:return qf(r.stringValue,e.stringValue);case 6:return(function(o,s){const a=Oi(o),c=Oi(s);return a.compareTo(c)})(r.bytesValue,e.bytesValue);case 7:return(function(o,s){const a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){const l=Re(a[u],c[u]);if(l!==0)return l}return Re(a.length,c.length)})(r.referenceValue,e.referenceValue);case 8:return(function(o,s){const a=Re(wt(o.latitude),wt(s.latitude));return a!==0?a:Re(wt(o.longitude),wt(s.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Tp(r.arrayValue,e.arrayValue);case 10:return(function(o,s){const a=o.fields||{},c=s.fields||{},u=a[fu]?.arrayValue,l=c[fu]?.arrayValue,h=Re(u?.values?.length||0,l?.values?.length||0);return h!==0?h:Tp(u,l)})(r.mapValue,e.mapValue);case 11:return(function(o,s){if(o===yc.mapValue&&s===yc.mapValue)return 0;if(o===yc.mapValue)return 1;if(s===yc.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let h=0;h<c.length&&h<l.length;++h){const d=qf(c[h],l[h]);if(d!==0)return d;const p=ns(a[c[h]],u[l[h]]);if(p!==0)return p}return Re(c.length,l.length)})(r.mapValue,e.mapValue);default:throw ve(23264,{he:t})}}function bp(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Re(r,e);const t=Pi(r),n=Pi(e),i=Re(t.seconds,n.seconds);return i!==0?i:Re(t.nanos,n.nanos)}function Tp(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const o=ns(t[i],n[i]);if(o)return o}return Re(t.length,n.length)}function is(r){return Xf(r)}function Xf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=Pi(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Oi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return he.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const o of t.values||[])i?i=!1:n+=",",n+=Xf(o);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of n)o?o=!1:i+=",",i+=`${s}:${Xf(t.fields[s])}`;return i+"}"})(r.mapValue):ve(61005,{value:r})}function Fc(r){switch(Di(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tl(r);return e?16+Fc(e):16;case 5:return 2*r.stringValue.length;case 6:return Oi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,o)=>i+Fc(o)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Li(n.fields,((o,s)=>{i+=o.length+Fc(s)})),i})(r.mapValue);default:throw ve(13486,{value:r})}}function Kf(r){return!!r&&"integerValue"in r}function sd(r){return!!r&&"arrayValue"in r}function Sp(r){return!!r&&"nullValue"in r}function Rp(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vc(r){return!!r&&"mapValue"in r}function v3(r){return(r?.mapValue?.fields||{})[ky]?.stringValue===Ly}function ua(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Li(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ua(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ua(r.arrayValue.values[t]);return e}return{...r}}function m3(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===g3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Vc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(t)}setAll(e){let t=Xt.emptyPath(),n={},i=[];e.forEach(((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,n,i),n={},i=[],t=a.popLast()}s?n[a.lastSegment()]=ua(s):i.push(a.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,n,i)}delete(e){const t=this.field(e.popLast());Vc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Li(t,((i,o)=>e[i]=o));for(const i of n)delete e[i]}clone(){return new Ir(ua(this.value))}}function By(r){const e=[];return Li(r.fields,((t,n)=>{const i=new Xt([t]);if(Vc(n)){const o=By(n.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)})),new kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,t,n,i,o,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ir(e,0,we.min(),we.min(),we.min(),Ir.empty(),0)}static newFoundDocument(e,t,n,i){return new ir(e,1,t,we.min(),n,i,0)}static newNoDocument(e,t){return new ir(e,2,t,we.min(),we.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new ir(e,3,t,we.min(),we.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t){this.position=e,this.inclusive=t}}function Pp(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const o=e[i],s=r.position[i];if(o.field.isKeyField()?n=he.comparator(he.fromName(s.referenceValue),t.key):n=ns(s,t.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Op(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Sn(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,t="asc"){this.field=e,this.dir=t}}function y3(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{}class Pt extends Fy{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _3(e,t,n):t==="array-contains"?new A3(e,n):t==="in"?new I3(e,n):t==="not-in"?new C3(e,n):t==="array-contains-any"?new b3(e,n):new Pt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new x3(e,n):new E3(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ns(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(ns(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rn extends Fy{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Rn(e,t)}matches(e){return Vy(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vy(r){return r.op==="and"}function Uy(r){return w3(r)&&Vy(r)}function w3(r){for(const e of r.filters)if(e instanceof Rn)return!1;return!0}function Yf(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+is(r.value);if(Uy(r))return r.filters.map((e=>Yf(e))).join(",");{const e=r.filters.map((t=>Yf(t))).join(",");return`${r.op}(${e})`}}function Hy(r,e){return r instanceof Pt?(function(n,i){return i instanceof Pt&&n.op===i.op&&n.field.isEqual(i.field)&&Sn(n.value,i.value)})(r,e):r instanceof Rn?(function(n,i){return i instanceof Rn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((o,s,a)=>o&&Hy(s,i.filters[a])),!0):!1})(r,e):void ve(19439)}function $y(r){return r instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${is(t.value)}`})(r):r instanceof Rn?(function(t){return t.op.toString()+" {"+t.getFilters().map($y).join(" ,")+"}"})(r):"Filter"}class _3 extends Pt{constructor(e,t,n){super(e,t,n),this.key=he.fromName(n.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class x3 extends Pt{constructor(e,t){super(e,"in",t),this.keys=jy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class E3 extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=jy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jy(r,e){return(e.arrayValue?.values||[]).map((t=>he.fromName(t.referenceValue)))}class A3 extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sd(t)&&Ca(t.arrayValue,this.value)}}class I3 extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ca(this.value.arrayValue,t)}}class C3 extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ca(this.value.arrayValue,t)}}class b3 extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>Ca(this.value.arrayValue,n)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,t=null,n=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}}function Dp(r,e=null,t=[],n=[],i=null,o=null,s=null){return new T3(r,e,t,n,i,o,s)}function ad(r){const e=xe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>Yf(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(o){return o.field.canonicalString()+o.dir})(n))).join(","),el(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>is(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>is(n))).join(",")),e.Te=t}return e.Te}function cd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!y3(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Hy(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Op(r.startAt,e.startAt)&&Op(r.endAt,e.endAt)}function Qf(r){return he.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t=null,n=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function S3(r,e,t,n,i,o,s,a){return new rl(r,e,t,n,i,o,s,a)}function Gy(r){return new rl(r)}function Np(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function R3(r){return r.collectionGroup!==null}function la(r){const e=xe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Nt(Xt.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new du(o,n))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new du(Xt.keyField(),n))}return e.Ie}function An(r){const e=xe(r);return e.Ee||(e.Ee=P3(e,la(r))),e.Ee}function P3(r,e){if(r.limitType==="F")return Dp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new du(i.field,o)}));const t=r.endAt?new hu(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new hu(r.startAt.position,r.startAt.inclusive):null;return Dp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Zf(r,e,t){return new rl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function nl(r,e){return cd(An(r),An(e))&&r.limitType===e.limitType}function Wy(r){return`${ad(An(r))}|lt:${r.limitType}`}function To(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>$y(i))).join(", ")}]`),el(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>is(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>is(i))).join(",")),`Target(${n})`})(An(r))}; limitType=${r.limitType})`}function il(r,e){return e.isFoundDocument()&&(function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):he.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)})(r,e)&&(function(n,i){for(const o of la(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(s,a,c){const u=Pp(s,a,c);return s.inclusive?u<=0:u<0})(n.startAt,la(n),i)||n.endAt&&!(function(s,a,c){const u=Pp(s,a,c);return s.inclusive?u>=0:u>0})(n.endAt,la(n),i))})(r,e)}function O3(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function zy(r){return(e,t)=>{let n=!1;for(const i of la(r)){const o=D3(i,e,t);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function D3(r,e,t){const n=r.field.isKeyField()?he.comparator(e.key,t.key):(function(o,s,a){const c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?ns(c,u):ve(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Li(this.inner,((t,n)=>{for(const[i,o]of n)e(i,o)}))}isEmpty(){return Ry(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=new pt(he.comparator);function Kn(){return N3}const qy=new pt(he.comparator);function Ws(...r){let e=qy;for(const t of r)e=e.insert(t.key,t);return e}function Xy(r){let e=qy;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Yi(){return fa()}function Ky(){return fa()}function fa(){return new fo((r=>r.toString()),((r,e)=>r.isEqual(e)))}const M3=new pt(he.comparator),k3=new Nt(he.comparator);function Pe(...r){let e=k3;for(const t of r)e=e.add(t);return e}const L3=new Nt(Re);function B3(){return L3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(e)?"-0":e}}function Yy(r){return{integerValue:""+r}}function F3(r,e){return l3(e)?Yy(e):ud(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this._=void 0}}function V3(r,e,t){return r instanceof pu?(function(i,o){const s={fields:{[Dy]:{stringValue:Oy},[My]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&od(o)&&(o=tl(o)),o&&(s.fields[Ny]=o),{mapValue:s}})(t,e):r instanceof ba?Zy(r,e):r instanceof Ta?Jy(r,e):(function(i,o){const s=Qy(i,o),a=Mp(s)+Mp(i.Ae);return Kf(s)&&Kf(i.Ae)?Yy(a):ud(i.serializer,a)})(r,e)}function U3(r,e,t){return r instanceof ba?Zy(r,e):r instanceof Ta?Jy(r,e):t}function Qy(r,e){return r instanceof gu?(function(n){return Kf(n)||(function(o){return!!o&&"doubleValue"in o})(n)})(e)?e:{integerValue:0}:null}class pu extends ol{}class ba extends ol{constructor(e){super(),this.elements=e}}function Zy(r,e){const t=e2(e);for(const n of r.elements)t.some((i=>Sn(i,n)))||t.push(n);return{arrayValue:{values:t}}}class Ta extends ol{constructor(e){super(),this.elements=e}}function Jy(r,e){let t=e2(e);for(const n of r.elements)t=t.filter((i=>!Sn(i,n)));return{arrayValue:{values:t}}}class gu extends ol{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mp(r){return wt(r.integerValue||r.doubleValue)}function e2(r){return sd(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function H3(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof ba&&i instanceof ba||n instanceof Ta&&i instanceof Ta?rs(n.elements,i.elements,Sn):n instanceof gu&&i instanceof gu?Sn(n.Ae,i.Ae):n instanceof pu&&i instanceof pu})(r.transform,e.transform)}class $3{constructor(e,t){this.version=e,this.transformResults=t}}class un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class sl{}function t2(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ld(r.key,un.none()):new Ba(r.key,r.data,un.none());{const t=r.data,n=Ir.empty();let i=new Nt(Xt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?n.delete(o):n.set(o,s),i=i.add(o)}return new Bi(r.key,n,new kr(i.toArray()),un.none())}}function j3(r,e,t){r instanceof Ba?(function(i,o,s){const a=i.value.clone(),c=Lp(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(r,e,t):r instanceof Bi?(function(i,o,s){if(!Uc(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Lp(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(r2(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(r,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function ha(r,e,t,n){return r instanceof Ba?(function(o,s,a,c){if(!Uc(o.precondition,s))return a;const u=o.value.clone(),l=Bp(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(r,e,t,n):r instanceof Bi?(function(o,s,a,c){if(!Uc(o.precondition,s))return a;const u=Bp(o.fieldTransforms,c,s),l=s.data;return l.setAll(r2(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((h=>h.field)))})(r,e,t,n):(function(o,s,a){return Uc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(r,e,t)}function G3(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),o=Qy(n.transform,i||null);o!=null&&(t===null&&(t=Ir.empty()),t.set(n.field,o))}return t||null}function kp(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&rs(n,i,((o,s)=>H3(o,s)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ba extends sl{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bi extends sl{constructor(e,t,n,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function r2(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Lp(r,e,t){const n=new Map;ze(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const o=r[i],s=o.transform,a=e.data.field(o.field);n.set(o.field,U3(s,a,t[i]))}return n}function Bp(r,e,t){const n=new Map;for(const i of r){const o=i.transform,s=t.data.field(i.field);n.set(i.field,V3(o,s,e))}return n}class ld extends sl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class W3 extends sl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&j3(o,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ha(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ha(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ky();return this.mutations.forEach((i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=t2(s,a);c!==null&&n.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(we.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&rs(this.mutations,e.mutations,((t,n)=>kp(t,n)))&&rs(this.baseMutations,e.baseMutations,((t,n)=>kp(t,n)))}}class fd{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){ze(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return M3})();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,n[s].version);return new fd(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,De;function K3(r){switch(r){case K.OK:return ve(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ve(15467,{code:r})}}function n2(r){if(r===void 0)return Xn("GRPC error has no .code"),K.UNKNOWN;switch(r){case xt.OK:return K.OK;case xt.CANCELLED:return K.CANCELLED;case xt.UNKNOWN:return K.UNKNOWN;case xt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case xt.INTERNAL:return K.INTERNAL;case xt.UNAVAILABLE:return K.UNAVAILABLE;case xt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case xt.NOT_FOUND:return K.NOT_FOUND;case xt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case xt.ABORTED:return K.ABORTED;case xt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case xt.DATA_LOSS:return K.DATA_LOSS;default:return ve(39323,{code:r})}}(De=xt||(xt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3=new Ei([4294967295,4294967295],0);function Fp(r){const e=Y3().encode(r),t=new yy;return t.update(e),new Uint8Array(t.digest())}function Vp(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ei([t,n],0),new Ei([i,o],0)]}class hd{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new zs(`Invalid padding: ${t}`);if(n<0)throw new zs(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new zs(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new zs(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ei.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(Ei.fromNumber(n)));return i.compare(Q3)===1&&(i=new Ei([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fp(e),[n,i]=Vp(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(n,i,o);if(!this.we(s))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new hd(o,i,t);return n.forEach((a=>s.insert(a))),s}insert(e){if(this.ge===0)return;const t=Fp(e),[n,i]=Vp(t);for(let o=0;o<this.hashCount;o++){const s=this.ye(n,i,o);this.Se(s)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class zs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,t,n,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Fa.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new al(we.min(),i,new pt(Re),Kn(),Pe())}}class Fa{constructor(e,t,n,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Fa(n,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class i2{constructor(e,t){this.targetId=e,this.Ce=t}}class o2{constructor(e,t,n=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Up{constructor(){this.ve=0,this.Fe=Hp(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),t=Pe(),n=Pe();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:ve(38017,{changeType:o})}})),new Fa(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Hp()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Z3{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kn(),this.Je=wc(),this.He=wc(),this.Ye=new pt(Re)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Qf(o))if(n===0){const s=new he(o.path);this.et(t,s,ir.newNoDocument(s,we.min()))}else ze(n===1,20013,{expectedCount:n});else{const s=this._t(t);if(s!==n){const a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Oi(n).toUint8Array()}catch(c){if(c instanceof Py)return ts("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new hd(s,i,o)}catch(c){return ts(c instanceof zs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((o=>{const s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,s)=>{const a=this.ot(s);if(a){if(o.current&&Qf(a.target)){const c=new he(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,ir.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}}));let n=Pe();this.He.forEach(((o,s)=>{let a=!0;s.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(n=n.add(o))})),this.je.forEach(((o,s)=>s.setReadTime(e)));const i=new al(e,t,this.Ye,this.je,n);return this.je=Kn(),this.Je=wc(),this.He=wc(),this.Ye=new pt(Re),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Up,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Nt(Re),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Nt(Re),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Up),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wc(){return new pt(he.comparator)}function Hp(){return new pt(he.comparator)}const J3={asc:"ASCENDING",desc:"DESCENDING"},eS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tS={and:"AND",or:"OR"};class rS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jf(r,e){return r.useProto3Json||el(e)?e:{value:e}}function vu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s2(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function nS(r,e){return vu(r,e.toTimestamp())}function In(r){return ze(!!r,49232),we.fromTimestamp((function(t){const n=Pi(t);return new at(n.seconds,n.nanos)})(r))}function dd(r,e){return eh(r,e).canonicalString()}function eh(r,e){const t=(function(i){return new st(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function a2(r){const e=st.fromString(r);return ze(h2(e),10190,{key:e.toString()}),e}function th(r,e){return dd(r.databaseId,e.path)}function af(r,e){const t=a2(e);if(t.get(1)!==r.databaseId.projectId)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ce(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new he(u2(t))}function c2(r,e){return dd(r.databaseId,e)}function iS(r){const e=a2(r);return e.length===4?st.emptyPath():u2(e)}function rh(r){return new st(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function u2(r){return ze(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function $p(r,e,t){return{name:th(r,e),fields:t.value.mapValue.fields}}function oS(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ve(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,l){return u.useProto3Json?(ze(l===void 0||typeof l=="string",58123),Yt.fromBase64String(l||"")):(ze(l===void 0||l instanceof Buffer||l instanceof Uint8Array,16193),Yt.fromUint8Array(l||new Uint8Array))})(r,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){const l=u.code===void 0?K.UNKNOWN:n2(u.code);return new ce(l,u.message||"")})(s);t=new o2(n,i,o,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=af(r,n.document.name),o=In(n.document.updateTime),s=n.document.createTime?In(n.document.createTime):we.min(),a=new Ir({mapValue:{fields:n.document.fields}}),c=ir.newFoundDocument(i,o,s,a),u=n.targetIds||[],l=n.removedTargetIds||[];t=new Hc(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=af(r,n.document),o=n.readTime?In(n.readTime):we.min(),s=ir.newNoDocument(i,o),a=n.removedTargetIds||[];t=new Hc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=af(r,n.document),o=n.removedTargetIds||[];t=new Hc([],o,i,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,s=new X3(i,o),a=n.targetId;t=new i2(a,s)}}return t}function sS(r,e){let t;if(e instanceof Ba)t={update:$p(r,e.key,e.value)};else if(e instanceof ld)t={delete:th(r,e.key)};else if(e instanceof Bi)t={update:$p(r,e.key,e.data),updateMask:gS(e.fieldMask)};else{if(!(e instanceof W3))return ve(16599,{Vt:e.type});t={verify:th(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(o,s){const a=s.transform;if(a instanceof pu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ba)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ta)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gu)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw ve(20930,{transform:s.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:nS(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ve(27497)})(r,e.precondition)),t}function aS(r,e){return r&&r.length>0?(ze(e!==void 0,14353),r.map((t=>(function(i,o){let s=i.updateTime?In(i.updateTime):In(o);return s.isEqual(we.min())&&(s=In(o)),new $3(s,i.transformResults||[])})(t,e)))):[]}function cS(r,e){return{documents:[c2(r,e.path)]}}function uS(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=c2(r,i);const o=(function(u){if(u.length!==0)return f2(Rn.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const s=(function(u){if(u.length!==0)return u.map((l=>(function(d){return{field:So(d.field),direction:hS(d.dir)}})(l)))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=Jf(r,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function lS(r){let e=iS(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){ze(n===1,65062);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=(function(h){const d=l2(h);return d instanceof Rn&&Uy(d)?d.getFilters():[d]})(t.where));let s=[];t.orderBy&&(s=(function(h){return h.map((d=>(function(v){return new du(Ro(v.field),(function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(d)))})(t.orderBy));let a=null;t.limit&&(a=(function(h){let d;return d=typeof h=="object"?h.value:h,el(d)?null:d})(t.limit));let c=null;t.startAt&&(c=(function(h){const d=!!h.before,p=h.values||[];return new hu(p,d)})(t.startAt));let u=null;return t.endAt&&(u=(function(h){const d=!h.before,p=h.values||[];return new hu(p,d)})(t.endAt)),S3(e,i,s,o,a,"F",c,u)}function fS(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function l2(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Ro(t.unaryFilter.field);return Pt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ro(t.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ro(t.unaryFilter.field);return Pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ro(t.unaryFilter.field);return Pt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Pt.create(Ro(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Rn.create(t.compositeFilter.filters.map((n=>l2(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve(1026)}})(t.compositeFilter.op))})(r):ve(30097,{filter:r})}function hS(r){return J3[r]}function dS(r){return eS[r]}function pS(r){return tS[r]}function So(r){return{fieldPath:r.canonicalString()}}function Ro(r){return Xt.fromServerFormat(r.fieldPath)}function f2(r){return r instanceof Pt?(function(t){if(t.op==="=="){if(Rp(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NAN"}};if(Sp(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rp(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NAN"}};if(Sp(t.value))return{unaryFilter:{field:So(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:So(t.field),op:dS(t.op),value:t.value}}})(r):r instanceof Rn?(function(t){const n=t.getFilters().map((i=>f2(i)));return n.length===1?n[0]:{compositeFilter:{op:pS(t.op),filters:n}}})(r):ve(54877,{filter:r})}function gS(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function h2(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,n,i,o=we.min(),s=we.min(),a=Yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){this.yt=e}}function mS(r){const e=lS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.Cn=new wS}addToCollectionParentIndex(e,t){return this.Cn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Ri.min())}updateCollectionGroup(e,t,n){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class wS{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Nt(st.comparator),o=!i.has(n);return this.index[t]=i.add(n),o}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Nt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},d2=41943040;class Ar{static withCacheSize(e){return new Ar(e,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(d2,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new os(0)}static cr(){return new os(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LruGarbageCollector",_S=1048576;function Wp([r,e],[t,n]){const i=Re(r,t);return i===0?Re(e,n):i}class xS{constructor(e){this.Ir=e,this.buffer=new Nt(Wp),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Wp(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ES{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(Gp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){vs(t)?oe(Gp,"Ignoring IndexedDB error during garbage collection: ",t):await gs(t)}await this.Vr(3e5)}))}}class AS{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Ju.ce);const n=new xS(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(jp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jp):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,o,s,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(n=h,a=Date.now(),this.removeTargets(e,n,t)))).next((h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((h=>(u=Date.now(),bo()<=Se.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h}))))}}function IS(r,e){return new AS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.changes=new fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?z.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&ha(n.mutation,i,kr.empty(),at.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Pe()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Pe()){const i=Yi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((o=>{let s=Ws();return o.forEach(((a,c)=>{s=s.insert(a,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,t){const n=Yi();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Pe())))}populateOverlays(e,t,n){const i=[];return n.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((s,a)=>{t.set(s,a)}))}))}computeViews(e,t,n,i){let o=Kn();const s=fa(),a=(function(){return fa()})();return t.forEach(((c,u)=>{const l=n.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Bi)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),ha(l.mutation,u,l.mutation.getFieldMask(),at.now())):s.set(u.key,kr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((u,l)=>s.set(u,l))),t.forEach(((u,l)=>a.set(u,new bS(l,s.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,t){const n=fa();let i=new pt(((s,a)=>s-a)),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((s=>{for(const a of s)a.keys().forEach((c=>{const u=t.get(c);if(u===null)return;let l=n.get(c)||kr.empty();l=a.applyToLocalView(u,l),n.set(c,l);const h=(i.get(a.batchId)||Pe()).add(c);i=i.insert(a.batchId,h)}))})).next((()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,l=c.value,h=Ky();l.forEach((d=>{if(!o.has(d)){const p=t2(t.get(d),n.get(d));p!==null&&h.set(d,p),o=o.add(d)}})),s.push(this.documentOverlayCache.saveOverlays(e,u,h))}return z.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(s){return he.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):R3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-o.size):z.resolve(Yi());let a=Ea,c=o;return s.next((u=>z.forEach(u,((l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(l)?z.resolve():this.remoteDocumentCache.getEntry(e,l).next((d=>{c=c.insert(l,d)}))))).next((()=>this.populateOverlays(e,u,o))).next((()=>this.computeViews(e,c,u,Pe()))).next((l=>({batchId:a,changes:Xy(l)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next((n=>{let i=Ws();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const o=t.collectionGroup;let s=Ws();return this.indexManager.getCollectionParents(e,o).next((a=>z.forEach(a,(c=>{const u=(function(h,d){return new rl(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next((l=>{l.forEach(((h,d)=>{s=s.insert(h,d)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,o,i)))).next((s=>{o.forEach(((c,u)=>{const l=u.getKey();s.get(l)===null&&(s=s.insert(l,ir.newInvalidDocument(l)))}));let a=Ws();return s.forEach(((c,u)=>{const l=o.get(c);l!==void 0&&ha(l.mutation,u,kr.empty(),at.now()),il(t,u)&&(a=a.insert(c,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return z.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:In(i.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:mS(i.bundledQuery),readTime:In(i.readTime)}})(t)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(){this.overlays=new pt(he.comparator),this.qr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Yi();return z.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&n.set(i,o)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,o)=>{this.St(e,t,o)})),z.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(n)),z.resolve()}getOverlaysForCollection(e,t,n){const i=Yi(),o=t.length+1,s=new he(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>n&&i.set(c.getKey(),c)}return z.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let o=new pt(((u,l)=>u-l));const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let l=o.get(u.largestBatchId);l===null&&(l=Yi(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const a=Yi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,l)=>a.set(u,l))),!(a.size()>=i)););return z.resolve(a)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(n.key,new q3(t,n));let o=this.qr.get(t);o===void 0&&(o=Pe(),this.qr.set(t,o)),this.qr.set(t,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this.Qr=new Nt(Lt.$r),this.Ur=new Nt(Lt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Lt(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new Lt(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new he(new st([])),n=new Lt(t,e),i=new Lt(t,e+1),o=[];return this.Ur.forEachInRange([n,i],(s=>{this.Gr(s),o.push(s.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new he(new st([])),n=new Lt(t,e),i=new Lt(t,e+1);let o=Pe();return this.Ur.forEachInRange([n,i],(s=>{o=o.add(s.key)})),o}containsKey(e){const t=new Lt(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Lt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return he.comparator(e.key,t.key)||Re(e.Yr,t.Yr)}static Kr(e,t){return Re(e.Yr,t.Yr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(Lt.$r)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new z3(o,t,n,i);this.mutationQueue.push(s);for(const a of i)this.Zr=this.Zr.add(new Lt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return z.resolve(s)}lookupMutationBatch(e,t){return z.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?id:this.tr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Lt(t,0),i=new Lt(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([n,i],(s=>{const a=this.Xr(s.Yr);o.push(a)})),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Nt(Re);return t.forEach((i=>{const o=new Lt(i,0),s=new Lt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],(a=>{n=n.add(a.Yr)}))})),z.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let o=n;he.isDocumentKey(o)||(o=o.child(""));const s=new Lt(new he(o),0);let a=new Nt(Re);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)}),s),z.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return z.forEach(t.mutations,(i=>{const o=new Lt(i.key,t.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new Lt(t,0),i=this.Zr.firstAfterOrEqual(n);return z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.ri=e,this.docs=(function(){return new pt(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return z.resolve(n?n.document.mutableCopy():ir.newInvalidDocument(t))}getEntries(e,t){let n=Kn();return t.forEach((i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():ir.newInvalidDocument(i))})),z.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let o=Kn();const s=t.path,a=new he(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||s3(o3(l),n)<=0||(i.has(l.key)||il(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,t,n,i){ve(9500)}ii(e,t){return z.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new NS(this)}getSize(e){return z.resolve(this.size)}}class NS extends CS{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),z.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.persistence=e,this.si=new fo((t=>ad(t)),cd),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new pd,this.targetCount=0,this.ai=os.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),z.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new os(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.Pr(t),z.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,n){let i=0;const o=[];return this.si.forEach(((s,a)=>{a.sequenceNumber<=t&&n.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),z.waitFor(o).next((()=>i))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return z.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),z.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((s=>{o.push(i.markPotentiallyOrphaned(e,s))})),z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return z.resolve(n)}containsKey(e,t){return z.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ju(0),this.li=!1,this.li=!0,this.hi=new PS,this.referenceDelegate=e(this),this.Pi=new MS(this),this.indexManager=new yS,this.remoteDocumentCache=(function(i){return new DS(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new vS(t),this.Ii=new SS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new OS(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){oe("MemoryPersistence","Starting transaction:",e);const i=new kS(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return z.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class kS extends c3{constructor(e){super(),this.currentSequenceNumber=e}}class gd{constructor(e){this.persistence=e,this.Ri=new pd,this.Vi=null}static mi(e){return new gd(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),z.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.fi,(n=>{const i=he.fromPath(n);return this.gi(e,i).next((o=>{o||t.removeEntry(i,we.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class mu{constructor(e,t){this.persistence=e,this.pi=new fo((n=>f3(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=IS(this,t)}static mi(e,t){return new mu(e,t)}Ei(){}di(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return z.forEach(this.pi,((n,i)=>this.br(e,n,i).next((o=>o?z.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,t).next((a=>{a||(n++,o.removeEntry(s,we.min()))})))).next((()=>o.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),z.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fc(e.data.value)),t}br(e,t,n){return z.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return z.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=Pe(),i=Pe();for(const o of t.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new vd(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return RI()?8:u3(cr())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const o={result:null};return this.ys(e,t).next((s=>{o.result=s})).next((()=>{if(!o.result)return this.ws(e,t,i,n).next((s=>{o.result=s}))})).next((()=>{if(o.result)return;const s=new LS;return this.Ss(e,t,s).next((a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)}))})).next((()=>o.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(bo()<=Se.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",To(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),z.resolve()):(bo()<=Se.DEBUG&&oe("QueryEngine","Query:",To(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(bo()<=Se.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",To(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(t))):z.resolve())}ys(e,t){if(Np(t))return z.resolve(null);let n=An(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Zf(t,null,"F"),n=An(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((o=>{const s=Pe(...o);return this.ps.getDocuments(e,s).next((a=>this.indexManager.getMinOffset(e,n).next((c=>{const u=this.Ds(t,a);return this.Cs(t,u,s,c.readTime)?this.ys(e,Zf(t,null,"F")):this.vs(e,u,t,c)}))))})))))}ws(e,t,n,i){return Np(t)||i.isEqual(we.min())?z.resolve(null):this.ps.getDocuments(e,n).next((o=>{const s=this.Ds(t,o);return this.Cs(t,s,n,i)?z.resolve(null):(bo()<=Se.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),To(t)),this.vs(e,s,t,i3(i,Ea)).next((a=>a)))}))}Ds(e,t){let n=new Nt(zy(e));return t.forEach(((i,o)=>{il(e,o)&&(n=n.add(o))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,n){return bo()<=Se.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",To(t)),this.ps.getDocumentsMatchingQuery(e,t,Ri.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((o=>(t.forEach((s=>{o=o.insert(s.key,s)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="LocalStore",FS=3e8;class VS{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new pt(Re),this.xs=new fo((o=>ad(o)),cd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function US(r,e,t,n){return new VS(r,e,t,n)}async function g2(r,e){const t=xe(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((o=>{const s=[],a=[];let c=Pe();for(const u of i){s.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of o){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(n,c).next((u=>({Ls:u,removedBatchIds:s,addedBatchIds:a})))}))}))}function HS(r,e){const t=xe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,l){const h=u.batch,d=h.keys();let p=z.resolve();return d.forEach((v=>{p=p.next((()=>l.getEntry(c,v))).next((y=>{const w=u.docVersions.get(v);ze(w!==null,48541),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),l.addEntry(y)))}))})),p.next((()=>a.mutationQueue.removeMutationBatch(c,h)))})(t,n,e,o).next((()=>o.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(a){let c=Pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function v2(r){const e=xe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $S(r,e){const t=xe(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const a=[];e.targetChanges.forEach(((l,h)=>{const d=i.get(h);if(!d)return;a.push(t.Pi.removeMatchingKeys(o,l.removedDocuments,h).next((()=>t.Pi.addMatchingKeys(o,l.addedDocuments,h))));let p=d.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Yt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,n)),i=i.insert(h,p),(function(y,w,_){return y.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=FS?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0})(d,p,l)&&a.push(t.Pi.updateTargetData(o,p))}));let c=Kn(),u=Pe();if(e.documentUpdates.forEach((l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))})),a.push(jS(o,s,e.documentUpdates).next((l=>{c=l.ks,u=l.qs}))),!n.isEqual(we.min())){const l=t.Pi.getLastRemoteSnapshotVersion(o).next((h=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,n)));a.push(l)}return z.waitFor(a).next((()=>s.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,c,u))).next((()=>c))})).then((o=>(t.Ms=i,o)))}function jS(r,e,t){let n=Pe(),i=Pe();return t.forEach((o=>n=n.add(o))),e.getEntries(r,n).next((o=>{let s=Kn();return t.forEach(((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):oe(md,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function GS(r,e){const t=xe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=id),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function WS(r,e){const t=xe(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((o=>o?(i=o,z.resolve(i)):t.Pi.allocateTargetId(n).next((s=>(i=new gi(e,s,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function nh(r,e,t){const n=xe(r),i=n.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",o,(s=>n.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!vs(s))throw s;oe(md,`Failed to update sequence numbers for target ${e}: ${s}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function zp(r,e,t){const n=xe(r);let i=we.min(),o=Pe();return n.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,u,l){const h=xe(c),d=h.xs.get(l);return d!==void 0?z.resolve(h.Ms.get(d)):h.Pi.getTargetData(u,l)})(n,s,An(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(s,a.targetId).next((c=>{o=c}))})).next((()=>n.Fs.getDocumentsMatchingQuery(s,e,t?i:we.min(),t?o:Pe()))).next((a=>(zS(n,O3(e),a),{documents:a,Qs:o})))))}function zS(r,e,t){let n=r.Os.get(e)||we.min();t.forEach(((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)})),r.Os.set(e,n)}class qp{constructor(){this.activeTargetIds=B3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qS{constructor(){this.Mo=new qp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="ConnectivityMonitor";class Kp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Xp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Xp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function ih(){return _c===null?_c=(function(){return 268435456+Math.round(2147483648*Math.random())})():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf="RestConnection",KS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===lu?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,o){const s=ih(),a=this.zo(e,t.toUriEncodedString());oe(cf,`Sending RPC '${e}' ${s}:`,a,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:u}=new URL(a),l=fs(u);return this.Jo(e,a,c,n,l).then((h=>(oe(cf,`Received RPC '${e}' ${s}: `,h),h)),(h=>{throw ts(cf,`RPC '${e}' ${s} failed with error: `,h,"url: ",a,"request:",n),h}))}Ho(e,t,n,i,o,s){return this.Go(e,t,n,i,o)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ps})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),n&&n.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const n=KS[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="WebChannelConnection";class ZS extends YS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,o){const s=ih();return new Promise(((a,c)=>{const u=new wy;u.setWithCredentials(!0),u.listenOnce(_y.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Bc.NO_ERROR:const h=u.getResponseJson();oe(er,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),a(h);break;case Bc.TIMEOUT:oe(er,`RPC '${e}' ${s} timed out`),c(new ce(K.DEADLINE_EXCEEDED,"Request time out"));break;case Bc.HTTP_ERROR:const d=u.getStatus();if(oe(er,`RPC '${e}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p?.error;if(v&&v.status&&v.message){const y=(function(_){const x=_.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN})(v.status);c(new ce(y,v.message))}else c(new ce(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ce(K.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{oe(er,`RPC '${e}' ${s} completed.`)}}));const l=JSON.stringify(i);oe(er,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,n,15)}))}T_(e,t,n){const i=ih(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ay(),a=Ey(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const l=o.join("");oe(er,`Creating RPC '${e}' stream ${i}: ${l}`,c);const h=s.createWebChannel(l,c);this.I_(h);let d=!1,p=!1;const v=new QS({Yo:w=>{p?oe(er,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(d||(oe(er,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),oe(er,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},Zo:()=>h.close()}),y=(w,_,x)=>{w.listen(_,(T=>{try{x(T)}catch(D){setTimeout((()=>{throw D}),0)}}))};return y(h,Gs.EventType.OPEN,(()=>{p||(oe(er,`RPC '${e}' stream ${i} transport opened.`),v.o_())})),y(h,Gs.EventType.CLOSE,(()=>{p||(p=!0,oe(er,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(h))})),y(h,Gs.EventType.ERROR,(w=>{p||(p=!0,ts(er,`RPC '${e}' stream ${i} transport errored. Name:`,w.name,"Message:",w.message),v.a_(new ce(K.UNAVAILABLE,"The operation could not be completed")))})),y(h,Gs.EventType.MESSAGE,(w=>{if(!p){const _=w.data[0];ze(!!_,16349);const x=_,T=x?.error||x[0]?.error;if(T){oe(er,`RPC '${e}' stream ${i} received error:`,T);const D=T.status;let F=(function(A){const b=xt[A];if(b!==void 0)return n2(b)})(D),H=T.message;F===void 0&&(F=K.INTERNAL,H="Unknown error status: "+D+" with message "+T.message),p=!0,v.a_(new ce(F,H)),h.close()}else oe(er,`RPC '${e}' stream ${i} received:`,_),v.u_(_)}})),y(a,xy.STAT_EVENT,(w=>{w.stat===zf.PROXY?oe(er,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===zf.NOPROXY&&oe(er,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(r){return new rS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t,n=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="PersistentStream";class y2{constructor(e,t,n,i,o,s,a,c){this.Mi=e,this.S_=n,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new m2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new ce(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(Yp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(oe(Yp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JS extends y2{constructor(e,t,n,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oS(this.serializer,e),n=(function(o){if(!("targetChange"in o))return we.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?we.min():s.readTime?In(s.readTime):we.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=rh(this.serializer),t.addTarget=(function(o,s){let a;const c=s.target;if(a=Qf(c)?{documents:cS(o,c)}:{query:uS(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=s2(o,s.resumeToken);const u=Jf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(we.min())>0){a.readTime=vu(o,s.snapshotVersion.toTimestamp());const u=Jf(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const n=fS(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=rh(this.serializer),t.removeTarget=e,this.q_(t)}}class e4 extends y2{constructor(e,t,n,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aS(e.writeResults,e.commitTime),n=In(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=rh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>sS(this.serializer,n)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{}class r4 extends t4{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,s])=>this.connection.Go(e,eh(t,n),i,o,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(K.UNKNOWN,o.toString())}))}Ho(e,t,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Ho(e,eh(t,n),i,s,a,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ce(K.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class n4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xn(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co="RemoteStore";class i4{constructor(e,t,n,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((s=>{n.enqueueAndForget((async()=>{ho(this)&&(oe(co,"Restarting streams for network reachability change."),await(async function(c){const u=xe(c);u.Ea.add(4),await Va(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ul(u)})(this))}))})),this.Ra=new n4(n,i)}}async function ul(r){if(ho(r))for(const e of r.da)await e(!0)}async function Va(r){for(const e of r.da)await e(!1)}function w2(r,e){const t=xe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),xd(t)?_d(t):ms(t).O_()&&wd(t,e))}function yd(r,e){const t=xe(r),n=ms(t);t.Ia.delete(e),n.O_()&&_2(t,e),t.Ia.size===0&&(n.O_()?n.L_():ho(t)&&t.Ra.set("Unknown"))}function wd(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ms(r).Y_(e)}function _2(r,e){r.Va.Ue(e),ms(r).Z_(e)}function _d(r){r.Va=new Z3({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ms(r).start(),r.Ra.ua()}function xd(r){return ho(r)&&!ms(r).x_()&&r.Ia.size>0}function ho(r){return xe(r).Ea.size===0}function x2(r){r.Va=void 0}async function o4(r){r.Ra.set("Online")}async function s4(r){r.Ia.forEach(((e,t)=>{wd(r,e)}))}async function a4(r,e){x2(r),xd(r)?(r.Ra.ha(e),_d(r)):r.Ra.set("Unknown")}async function c4(r,e,t){if(r.Ra.set("Online"),e instanceof o2&&e.state===2&&e.cause)try{await(async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(r,e)}catch(n){oe(co,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await yu(r,n)}else if(e instanceof Hc?r.Va.Ze(e):e instanceof i2?r.Va.st(e):r.Va.tt(e),!t.isEqual(we.min()))try{const n=await v2(r.localStore);t.compareTo(n)>=0&&await(function(o,s){const a=o.Va.Tt(s);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=o.Ia.get(u);l&&o.Ia.set(u,l.withResumeToken(c.resumeToken,s))}})),a.targetMismatches.forEach(((c,u)=>{const l=o.Ia.get(c);if(!l)return;o.Ia.set(c,l.withResumeToken(Yt.EMPTY_BYTE_STRING,l.snapshotVersion)),_2(o,c);const h=new gi(l.target,c,u,l.sequenceNumber);wd(o,h)})),o.remoteSyncer.applyRemoteEvent(a)})(r,t)}catch(n){oe(co,"Failed to raise snapshot:",n),await yu(r,n)}}async function yu(r,e,t){if(!vs(e))throw e;r.Ea.add(1),await Va(r),r.Ra.set("Offline"),t||(t=()=>v2(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{oe(co,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ul(r)}))}function E2(r,e){return e().catch((t=>yu(r,t,e)))}async function ll(r){const e=xe(r),t=Ni(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:id;for(;u4(e);)try{const i=await GS(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,l4(e,i)}catch(i){await yu(e,i)}A2(e)&&I2(e)}function u4(r){return ho(r)&&r.Ta.length<10}function l4(r,e){r.Ta.push(e);const t=Ni(r);t.O_()&&t.X_&&t.ea(e.mutations)}function A2(r){return ho(r)&&!Ni(r).x_()&&r.Ta.length>0}function I2(r){Ni(r).start()}async function f4(r){Ni(r).ra()}async function h4(r){const e=Ni(r);for(const t of r.Ta)e.ea(t.mutations)}async function d4(r,e,t){const n=r.Ta.shift(),i=fd.from(n,e,t);await E2(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await ll(r)}async function p4(r,e){e&&Ni(r).X_&&await(async function(n,i){if((function(s){return K3(s)&&s!==K.ABORTED})(i.code)){const o=n.Ta.shift();Ni(n).B_(),await E2(n,(()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i))),await ll(n)}})(r,e),A2(r)&&I2(r)}async function Qp(r,e){const t=xe(r);t.asyncQueue.verifyOperationInProgress(),oe(co,"RemoteStore received new credentials");const n=ho(t);t.Ea.add(3),await Va(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ul(t)}async function g4(r,e){const t=xe(r);e?(t.Ea.delete(2),await ul(t)):e||(t.Ea.add(2),await Va(t),t.Ra.set("Unknown"))}function ms(r){return r.ma||(r.ma=(function(t,n,i){const o=xe(t);return o.sa(),new JS(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:o4.bind(null,r),t_:s4.bind(null,r),r_:a4.bind(null,r),H_:c4.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),xd(r)?_d(r):r.Ra.set("Unknown")):(await r.ma.stop(),x2(r))}))),r.ma}function Ni(r){return r.fa||(r.fa=(function(t,n,i){const o=xe(t);return o.sa(),new e4(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:f4.bind(null,r),r_:p4.bind(null,r),ta:h4.bind(null,r),na:d4.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await ll(r)):(await r.fa.stop(),r.Ta.length>0&&(oe(co,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t,n,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,o){const s=Date.now()+n,a=new Ed(e,t,s,i,o);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ad(r,e){if(Xn("AsyncQueue",`${e}: ${r}`),vs(r))return new ce(K.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{static emptySet(e){return new Go(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||he.comparator(t.key,n.key):(t,n)=>he.comparator(t.key,n.key),this.keyedMap=Ws(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Go)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Go;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.ga=new pt(he.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class ss{constructor(e,t,n,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,i,o){const s=[];return t.forEach((a=>{s.push({type:0,doc:a})})),new ss(e,t,Go.emptySet(t),s,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class m4{constructor(){this.queries=Jp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=xe(t),o=i.queries;i.queries=Jp(),o.forEach(((s,a)=>{for(const c of a.Sa)c.onError(n)}))})(this,new ce(K.ABORTED,"Firestore shutting down"))}}function Jp(){return new fo((r=>Wy(r)),nl)}async function y4(r,e){const t=xe(r);let n=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(n=2):(o=new v4,n=e.Da()?0:1);try{switch(n){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const a=Ad(s,`Initialization of query '${To(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Id(t)}async function w4(r,e){const t=xe(r),n=e.query;let i=3;const o=t.queries.get(n);if(o){const s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function _4(r,e){const t=xe(r);let n=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const a of s.Sa)a.Fa(i)&&(n=!0);s.wa=i}}n&&Id(t)}function x4(r,e,t){const n=xe(r),i=n.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);n.queries.delete(e)}function Id(r){r.Ca.forEach((e=>{e.next()}))}var oh,eg;(eg=oh||(oh={})).Ma="default",eg.Cache="cache";class E4{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new ss(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==oh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.key=e}}class b2{constructor(e){this.key=e}}class A4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=zy(e),this.tu=new Go(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Zp,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((l,h)=>{const d=i.get(l),p=il(this.query,h)?h:null,v=!!d&&this.mutatedKeys.has(d.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;d&&p?d.data.isEqual(p.data)?v!==y&&(n.track({type:3,doc:p}),w=!0):this.su(d,p)||(n.track({type:2,doc:p}),w=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(a=!0)):!d&&p?(n.track({type:0,doc:p}),w=!0):d&&!p&&(n.track({type:1,doc:d}),w=!0,(c||u)&&(a=!0)),w&&(p?(s=s.add(p),o=y?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),n.track({type:1,doc:l})}return{tu:s,iu:n,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((l,h)=>(function(p,v){const y=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:w})}};return y(p)-y(v)})(l.type,h.type)||this.eu(l.doc,h.doc))),this.ou(n),i=i??!1;const a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new ss(this.query,e.tu,o,s,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new b2(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new C2(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ss.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cd="SyncEngine";class I4{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class C4{constructor(e){this.key=e,this.hu=!1}}class b4{constructor(e,t,n,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new fo((a=>Wy(a)),nl),this.Iu=new Map,this.Eu=new Set,this.du=new pt(he.comparator),this.Au=new Map,this.Ru=new pd,this.Vu={},this.mu=new Map,this.fu=os.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T4(r,e,t=!0){const n=D2(r);let i;const o=n.Tu.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await T2(n,e,t,!0),i}async function S4(r,e){const t=D2(r);await T2(t,e,!0,!1)}async function T2(r,e,t,n){const i=await WS(r.localStore,An(e)),o=i.targetId,s=r.sharedClientState.addLocalQueryTarget(o,t);let a;return n&&(a=await R4(r,e,o,s==="current",i.resumeToken)),r.isPrimaryClient&&t&&w2(r.remoteStore,i),a}async function R4(r,e,t,n,i){r.pu=(h,d,p)=>(async function(y,w,_,x){let T=w.view.ru(_);T.Cs&&(T=await zp(y.localStore,w.query,!1).then((({documents:C})=>w.view.ru(C,T))));const D=x&&x.targetChanges.get(w.targetId),F=x&&x.targetMismatches.get(w.targetId)!=null,H=w.view.applyChanges(T,y.isPrimaryClient,D,F);return rg(y,w.targetId,H.au),H.snapshot})(r,h,d,p);const o=await zp(r.localStore,e,!0),s=new A4(e,o.Qs),a=s.ru(o.documents),c=Fa.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),u=s.applyChanges(a,r.isPrimaryClient,c);rg(r,t,u.au);const l=new I4(e,t,s);return r.Tu.set(e,l),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),u.snapshot}async function P4(r,e,t){const n=xe(r),i=n.Tu.get(e),o=n.Iu.get(i.targetId);if(o.length>1)return n.Iu.set(i.targetId,o.filter((s=>!nl(s,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await nh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&yd(n.remoteStore,i.targetId),sh(n,i.targetId)})).catch(gs)):(sh(n,i.targetId),await nh(n.localStore,i.targetId,!0))}async function O4(r,e){const t=xe(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),yd(t.remoteStore,n.targetId))}async function D4(r,e,t){const n=V4(r);try{const i=await(function(s,a){const c=xe(s),u=at.now(),l=a.reduce(((p,v)=>p.add(v.key)),Pe());let h,d;return c.persistence.runTransaction("Locally write mutations","readwrite",(p=>{let v=Kn(),y=Pe();return c.Ns.getEntries(p,l).next((w=>{v=w,v.forEach(((_,x)=>{x.isValidDocument()||(y=y.add(_))}))})).next((()=>c.localDocuments.getOverlayedDocuments(p,v))).next((w=>{h=w;const _=[];for(const x of a){const T=G3(x,h.get(x.key).overlayedDocument);T!=null&&_.push(new Bi(x.key,T,By(T.value.mapValue),un.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,_,a)})).next((w=>{d=w;const _=w.applyToLocalDocumentSet(h,y);return c.documentOverlayCache.saveOverlays(p,w.batchId,_)}))})).then((()=>({batchId:d.batchId,changes:Xy(h)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Vu[s.currentUser.toKey()];u||(u=new pt(Re)),u=u.insert(a,c),s.Vu[s.currentUser.toKey()]=u})(n,i.batchId,t),await Ua(n,i.changes),await ll(n.remoteStore)}catch(i){const o=Ad(i,"Failed to persist write");t.reject(o)}}async function S2(r,e){const t=xe(r);try{const n=await $S(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const s=t.Au.get(o);s&&(ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ze(s.hu,14607):i.removedDocuments.size>0&&(ze(s.hu,42227),s.hu=!1))})),await Ua(t,n,e)}catch(n){await gs(n)}}function tg(r,e,t){const n=xe(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(s,a){const c=xe(s);c.onlineState=a;let u=!1;c.queries.forEach(((l,h)=>{for(const d of h.Sa)d.va(a)&&(u=!0)})),u&&Id(c)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function N4(r,e,t){const n=xe(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),o=i&&i.key;if(o){let s=new pt(he.comparator);s=s.insert(o,ir.newNoDocument(o,we.min()));const a=Pe().add(o),c=new al(we.min(),new Map,new pt(Re),s,a);await S2(n,c),n.du=n.du.remove(o),n.Au.delete(e),bd(n)}else await nh(n.localStore,e,!1).then((()=>sh(n,e,t))).catch(gs)}async function M4(r,e){const t=xe(r),n=e.batch.batchId;try{const i=await HS(t.localStore,e);P2(t,n,null),R2(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ua(t,i)}catch(i){await gs(i)}}async function k4(r,e,t){const n=xe(r);try{const i=await(function(s,a){const c=xe(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next((h=>(ze(h!==null,37113),l=h.keys(),c.mutationQueue.removeMutationBatch(u,h)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l))).next((()=>c.localDocuments.getDocuments(u,l)))}))})(n.localStore,e);P2(n,e,t),R2(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ua(n,i)}catch(i){await gs(i)}}function R2(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function P2(r,e,t){const n=xe(r);let i=n.Vu[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function sh(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||O2(r,n)}))}function O2(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(yd(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),bd(r))}function rg(r,e,t){for(const n of t)n instanceof C2?(r.Ru.addReference(n.key,e),L4(r,n)):n instanceof b2?(oe(Cd,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||O2(r,n.key)):ve(19791,{wu:n})}function L4(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(oe(Cd,"New document in limbo: "+t),r.Eu.add(n),bd(r))}function bd(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new he(st.fromString(e)),n=r.fu.next();r.Au.set(n,new C4(t)),r.du=r.du.insert(t,n),w2(r.remoteStore,new gi(An(Gy(t.path)),n,"TargetPurposeLimboResolution",Ju.ce))}}async function Ua(r,e,t){const n=xe(r),i=[],o=[],s=[];n.Tu.isEmpty()||(n.Tu.forEach(((a,c)=>{s.push(n.pu(c,e,t).then((u=>{if((u||t)&&n.isPrimaryClient){const l=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;n.sharedClientState.updateQueryState(c.targetId,l?"current":"not-current")}if(u){i.push(u);const l=vd.As(c.targetId,u);o.push(l)}})))})),await Promise.all(s),n.Pu.H_(i),await(async function(c,u){const l=xe(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>z.forEach(u,(d=>z.forEach(d.Es,(p=>l.persistence.referenceDelegate.addReference(h,d.targetId,p))).next((()=>z.forEach(d.ds,(p=>l.persistence.referenceDelegate.removeReference(h,d.targetId,p)))))))))}catch(h){if(!vs(h))throw h;oe(md,"Failed to update sequence numbers: "+h)}for(const h of u){const d=h.targetId;if(!h.fromCache){const p=l.Ms.get(d),v=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(v);l.Ms=l.Ms.insert(d,y)}}})(n.localStore,o))}async function B4(r,e){const t=xe(r);if(!t.currentUser.isEqual(e)){oe(Cd,"User change. New user:",e.toKey());const n=await g2(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach((a=>{a.forEach((c=>{c.reject(new ce(K.CANCELLED,s))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ua(t,n.Ls)}}function F4(r,e){const t=xe(r),n=t.Au.get(e);if(n&&n.hu)return Pe().add(n.key);{let i=Pe();const o=t.Iu.get(e);if(!o)return i;for(const s of o){const a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function D2(r){const e=xe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=S2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N4.bind(null,e),e.Pu.H_=_4.bind(null,e.eventManager),e.Pu.yu=x4.bind(null,e.eventManager),e}function V4(r){const e=xe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k4.bind(null,e),e}class wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return US(this.persistence,new BS,e.initialUser,this.serializer)}Cu(e){return new p2(gd.mi,this.serializer)}Du(e){return new qS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wu.provider={build:()=>new wu};class U4 extends wu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ze(this.persistence.referenceDelegate instanceof mu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ES(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ar.withCacheSize(this.cacheSizeBytes):Ar.DEFAULT;return new p2((n=>mu.mi(n,t)),this.serializer)}}class ah{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>tg(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=B4.bind(null,this.syncEngine),await g4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new m4})()}createDatastore(e){const t=cl(e.databaseInfo.databaseId),n=(function(o){return new ZS(o)})(e.databaseInfo);return(function(o,s,a,c){return new r4(o,s,a,c)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,o,s,a){return new i4(n,i,o,s,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>tg(this.syncEngine,t,0)),(function(){return Kp.v()?new Kp:new XS})())}createSyncEngine(e,t){return(function(i,o,s,a,c,u,l){const h=new b4(i,o,s,a,c,u);return l&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=xe(t);oe(co,"RemoteStore shutting down."),n.Ea.add(5),await Va(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ah.provider={build:()=>new ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="FirestoreClient";class $4{constructor(e,t,n,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=rr.UNAUTHENTICATED,this.clientId=rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(n,(async s=>{oe(Mi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(n,(s=>(oe(Mi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ad(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function lf(r,e){r.asyncQueue.verifyOperationInProgress(),oe(Mi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await g2(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function ng(r,e){r.asyncQueue.verifyOperationInProgress();const t=await j4(r);oe(Mi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>Qp(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>Qp(e.remoteStore,i))),r._onlineComponents=e}async function j4(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe(Mi,"Using user provided OfflineComponentProvider");try{await lf(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;ts("Error using user provided cache. Falling back to memory cache: "+t),await lf(r,new wu)}}else oe(Mi,"Using default OfflineComponentProvider"),await lf(r,new U4(void 0));return r._offlineComponents}async function N2(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe(Mi,"Using user provided OnlineComponentProvider"),await ng(r,r._uninitializedComponentsProvider._online)):(oe(Mi,"Using default OnlineComponentProvider"),await ng(r,new ah))),r._onlineComponents}function G4(r){return N2(r).then((e=>e.syncEngine))}async function W4(r){const e=await N2(r),t=e.eventManager;return t.onListen=T4.bind(null,e.syncEngine),t.onUnlisten=P4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=S4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=O4.bind(null,e.syncEngine),t}function z4(r,e,t={}){const n=new Ai;return r.asyncQueue.enqueueAndForget((async()=>(function(o,s,a,c,u){const l=new H4({next:d=>{l.Nu(),s.enqueueAndForget((()=>w4(o,h))),d.fromCache&&c.source==="server"?u.reject(new ce(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(d)},error:d=>u.reject(d)}),h=new E4(a,l,{includeMetadataChanges:!0,qa:!0});return y4(o,h)})(await W4(r),r.asyncQueue,e,t,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="firestore.googleapis.com",og=!0;class sg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k2,this.ssl=og}else this.host=e.host,this.ssl=e.ssl??og;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=d2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_S)throw new ce(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=M2(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ce(K.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fl{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new qT;switch(n.type){case"firstParty":return new QT(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ce(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=ig.get(t);n&&(oe("ComponentProvider","Removing Datastore"),ig.delete(t),n.terminate())})(this),Promise.resolve()}}function q4(r,e,t,n={}){r=ao(r,fl);const i=fs(e),o=r._getSettings(),s={...o,emulatorOptions:r._getEmulatorOptions()},a=`${e}:${t}`;i&&(Nm(`https://${a}`),Mm("Firestore",!0)),o.host!==k2&&o.host!==a&&ts("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:a,ssl:i,emulatorOptions:n};if(!no(c,s)&&(r._setSettings(c),n.mockUserToken)){let u,l;if(typeof n.mockUserToken=="string")u=n.mockUserToken,l=rr.MOCK_USER;else{u=_I(n.mockUserToken,r._app?.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new ce(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rr(h)}r._authCredentials=new XT(new Cy(u,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hl(this.firestore,e,this._query)}}class Bt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(La(t,Bt._jsonSchema))return new Bt(e,n||null,new he(st.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:At("string",Bt._jsonSchemaVersion),referencePath:At("string")};class Ii extends hl{constructor(e,t,n){super(e,t,Gy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new he(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function Td(r,e,...t){if(r=Sr(r),by("collection","path",e),r instanceof fl){const n=st.fromString(e,...t);return _p(n),new Ii(r,null,n)}{if(!(r instanceof Bt||r instanceof Ii))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(st.fromString(e,...t));return _p(n),new Ii(r.firestore,null,n)}}function Sa(r,e,...t){if(r=Sr(r),arguments.length===1&&(e=rd.newId()),by("doc","path",e),r instanceof fl){const n=st.fromString(e,...t);return wp(n),new Bt(r,null,new he(n))}{if(!(r instanceof Bt||r instanceof Ii))throw new ce(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(st.fromString(e,...t));return wp(n),new Bt(r.firestore,r instanceof Ii?r.converter:null,new he(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="AsyncQueue";class cg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new m2(this,"async_queue_retry"),this._c=()=>{const n=uf();n&&oe(ag,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ai;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!vs(e))throw e;oe(ag,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,Xn("INTERNAL UNHANDLED ERROR: ",ug(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Ed.createAndSchedule(this,e,t,n,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&ve(47125,{Pc:ug(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ug(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ha extends fl{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new cg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cg(e),this._firestoreClient=void 0,await e}}}function X4(r,e){const t=typeof r=="object"?r:Fm(),n=typeof r=="string"?r:lu,i=Wh(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=yI("firestore");o&&q4(i,...o)}return i}function L2(r){if(r._terminated)throw new ce(K.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||K4(r),r._firestoreClient}function K4(r){const e=r._freezeSettings(),t=(function(i,o,s,a){return new p3(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,M2(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new $4(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wr(Yt.fromBase64String(e))}catch(t){throw new ce(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wr(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(La(e,Wr._jsonSchema))return Wr.fromBase64String(e.bytes)}}Wr._jsonSchemaVersion="firestore/bytes/1.0",Wr._jsonSchema={type:At("string",Wr._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cn._jsonSchemaVersion}}static fromJSON(e){if(La(e,Cn._jsonSchema))return new Cn(e.latitude,e.longitude)}}Cn._jsonSchemaVersion="firestore/geoPoint/1.0",Cn._jsonSchema={type:At("string",Cn._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(La(e,bn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bn(e.vectorValues);throw new ce(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bn._jsonSchemaVersion="firestore/vectorValue/1.0",bn._jsonSchema={type:At("string",bn._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=/^__.*__$/;class Q4{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ba(e,this.data,t,this.fieldTransforms)}}class B2{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Bi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function F2(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:r})}}class Rd{constructor(e,t,n,i,o,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Rd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _u(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(F2(this.Ac)&&Y4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Z4{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cl(e)}Cc(e,t,n,i=!1){return new Rd({Ac:e,methodName:t,Dc:n,path:Xt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function V2(r){const e=r._freezeSettings(),t=cl(r._databaseId);return new Z4(r._databaseId,!!e.ignoreUndefinedProperties,t)}function J4(r,e,t,n,i,o={}){const s=r.Cc(o.merge||o.mergeFields?2:0,e,t,i);Pd("Data must be an object, but it was:",s,n);const a=U2(n,s);let c,u;if(o.merge)c=new kr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const l=[];for(const h of o.mergeFields){const d=ch(e,h,t);if(!s.contains(d))throw new ce(K.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);$2(l,d)||l.push(d)}c=new kr(l),u=s.fieldTransforms.filter((h=>c.covers(h.field)))}else c=null,u=s.fieldTransforms;return new Q4(new Ir(a),c,u)}class pl extends Sd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pl}}function e8(r,e,t,n){const i=r.Cc(1,e,t);Pd("Data must be an object, but it was:",i,n);const o=[],s=Ir.empty();Li(n,((c,u)=>{const l=Od(e,c,t);u=Sr(u);const h=i.yc(l);if(u instanceof pl)o.push(l);else{const d=gl(u,h);d!=null&&(o.push(l),s.set(l,d))}}));const a=new kr(o);return new B2(s,a,i.fieldTransforms)}function t8(r,e,t,n,i,o){const s=r.Cc(1,e,t),a=[ch(e,n,t)],c=[i];if(o.length%2!=0)throw new ce(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<o.length;d+=2)a.push(ch(e,o[d])),c.push(o[d+1]);const u=[],l=Ir.empty();for(let d=a.length-1;d>=0;--d)if(!$2(u,a[d])){const p=a[d];let v=c[d];v=Sr(v);const y=s.yc(p);if(v instanceof pl)u.push(p);else{const w=gl(v,y);w!=null&&(u.push(p),l.set(p,w))}}const h=new kr(u);return new B2(l,h,s.fieldTransforms)}function gl(r,e){if(H2(r=Sr(r)))return Pd("Unsupported field value:",e,r),U2(r,e);if(r instanceof Sd)return(function(n,i){if(!F2(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const o=[];let s=0;for(const a of n){let c=gl(a,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(r,e)}return(function(n,i){if((n=Sr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return F3(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=at.fromDate(n);return{timestampValue:vu(i.serializer,o)}}if(n instanceof at){const o=new at(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:vu(i.serializer,o)}}if(n instanceof Cn)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Wr)return{bytesValue:s2(i.serializer,n._byteString)};if(n instanceof Bt){const o=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dd(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof bn)return(function(s,a){return{mapValue:{fields:{[ky]:{stringValue:Ly},[fu]:{arrayValue:{values:s.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return ud(a.serializer,u)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${nd(n)}`)})(r,e)}function U2(r,e){const t={};return Ry(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Li(r,((n,i)=>{const o=gl(i,e.mc(n));o!=null&&(t[n]=o)})),{mapValue:{fields:t}}}function H2(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof at||r instanceof Cn||r instanceof Wr||r instanceof Bt||r instanceof Sd||r instanceof bn)}function Pd(r,e,t){if(!H2(t)||!Ty(t)){const n=nd(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function ch(r,e,t){if((e=Sr(e))instanceof dl)return e._internalPath;if(typeof e=="string")return Od(r,e);throw _u("Field path arguments must be of type string or ",r,!1,void 0,t)}const r8=new RegExp("[~\\*/\\[\\]]");function Od(r,e,t){if(e.search(r8)>=0)throw _u(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new dl(...e.split("."))._internalPath}catch{throw _u(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function _u(r,e,t,n,i){const o=n&&!n.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${n}`),s&&(c+=` in document ${i}`),c+=")"),new ce(K.INVALID_ARGUMENT,a+r+c)}function $2(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,t,n,i,o){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(G2("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class n8 extends j2{data(){return super.data()}}function G2(r,e){return typeof e=="string"?Od(r,e):e instanceof dl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o8{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Li(e,((i,o)=>{n[i]=this.convertValue(o,t)})),n}convertVectorValue(e){const t=e.fields?.[fu].arrayValue?.values?.map((n=>wt(n.doubleValue)));return new bn(t)}convertGeoPoint(e){return new Cn(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=tl(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=st.fromString(e);ze(h2(n),9688,{name:e});const i=new Ia(n.get(1),n.get(3)),o=new he(n.popFirst(5));return i.isEqual(t)||Xn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(r,e,t){let n;return n=r?r.toFirestore(e):e,n}class xc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wo extends j2{constructor(e,t,n,i,o,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $c(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(G2("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wo._jsonSchema={type:At("string",Wo._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class $c extends Wo{data(e={}){return super.data(e)}}class zo{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xc(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new $c(this._firestore,this._userDataWriter,n.key,n,new xc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((a=>{const c=new $c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>o||a.type!==3)).map((a=>{const c=new $c(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:a8(a.type),doc:c,oldIndex:u,newIndex:l}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),n.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function a8(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:r})}}zo._jsonSchemaVersion="firestore/querySnapshot/1.0",zo._jsonSchema={type:At("string",zo._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};class c8 extends o8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function W2(r){r=ao(r,hl);const e=ao(r.firestore,Ha),t=L2(e),n=new c8(e);return i8(r._query),z4(t,r._query).then((i=>new zo(e,n,r,i)))}function z2(r,e,t,...n){r=ao(r,Bt);const i=ao(r.firestore,Ha),o=V2(i);let s;return s=typeof(e=Sr(e))=="string"||e instanceof dl?t8(o,"updateDoc",r._key,e,t,n):e8(o,"updateDoc",r._key,e),Dd(i,[s.toMutation(r._key,un.exists(!0))])}function q2(r){return Dd(ao(r.firestore,Ha),[new ld(r._key,un.none())])}function X2(r,e){const t=ao(r.firestore,Ha),n=Sa(r),i=s8(r.converter,e);return Dd(t,[J4(V2(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,un.exists(!1))]).then((()=>n))}function Dd(r,e){return(function(n,i){const o=new Ai;return n.asyncQueue.enqueueAndForget((async()=>D4(await G4(n),i,o))),o.promise})(L2(r),e)}(function(e,t=!0){(function(i){ps=i})(hs),Jo(new io("firestore",((n,{instanceIdentifier:i,options:o})=>{const s=n.getProvider("app").getImmediate(),a=new Ha(new KT(n.getProvider("auth-internal")),new ZT(s,n.getProvider("app-check-internal")),(function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ce(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(u.options.projectId,l)})(s,i),s);return o={useFetchStreams:t,...o},a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),xi(gp,vp,e),xi(gp,vp,"esm2020")})();const u8={apiKey:"AIzaSyB0F7Z65MFfIhht2QyuShiLDE6mdwlnvYA",authDomain:"warung-sembako-ffa06.firebaseapp.com",projectId:"warung-sembako-ffa06",storageBucket:"warung-sembako-ffa06.appspot.com",messagingSenderId:"752684471991",appId:"1:752684471991:web:99c8e001e12ee15df79f32"},K2=Bm(u8);WT(K2);const eo=X4(K2),l8={class:"max-w-3xl mx-auto p-6 bg-white -lg shadow mt-8"},f8={type:"submit",class:"bg-blue-500 text-white px-4 py-2"},h8={class:"mt-8"},d8={class:"w-full border"},p8={class:"border"},g8={class:"border"},v8={class:"border"},m8={class:"border"},y8={class:"border"},w8={class:"border"},_8={class:"border"},x8={class:"border"},E8=["onClick"],A8=["onClick"],I8=ls({__name:"ProdukView",setup(r){const e=sn([]),t=sn({kategori:"",nama:"",satuan:"",unit:1,hargaBeli:0,hargaBeliPerUnit:0,hargaJualPerUnit:0}),n=sn(null),i=Td(eo,"produk");Uo([()=>t.value.hargaBeli,()=>t.value.unit],()=>{t.value.unit>0&&(t.value.hargaBeliPerUnit=Math.round(t.value.hargaBeli/t.value.unit),t.value.hargaJualPerUnit=Math.round(t.value.hargaBeliPerUnit*1.15))});const o=async()=>{if(!t.value.nama){alert("Nama produk wajib diisi");return}try{if(n.value){const l=Sa(eo,"produk",n.value);await z2(l,{...t.value}),console.log("Produk berhasil diupdate"),n.value=null}else await X2(i,{...t.value}),console.log("Produk berhasil ditambahkan")}catch(l){console.error("Gagal simpan produk:",l),alert("Error simpan produk, cek console!")}u(),s()},s=async()=>{const l=await W2(i);e.value=l.docs.map(h=>({id:h.id,...h.data()}))},a=async l=>{await q2(Sa(eo,"produk",l)),s()},c=l=>{t.value={...l},n.value=l.id},u=()=>{t.value={kategori:"",nama:"",satuan:"",unit:1,hargaBeli:0,hargaBeliPerUnit:0,hargaJualPerUnit:0}};return Wu(()=>{s()}),(l,h)=>(br(),zr("div",l8,[h[9]||(h[9]=X("h2",{class:"text-xl font-bold mb-4"},"CRUD Produk - Firestore",-1)),X("form",{onSubmit:hm(o,["prevent"]),class:"grid gap-4"},[jr(X("input",{"onUpdate:modelValue":h[0]||(h[0]=d=>t.value.kategori=d),placeholder:"Kategori",class:"input"},null,512),[[Gr,t.value.kategori]]),jr(X("input",{"onUpdate:modelValue":h[1]||(h[1]=d=>t.value.nama=d),placeholder:"Nama Produk",class:"input"},null,512),[[Gr,t.value.nama]]),jr(X("input",{"onUpdate:modelValue":h[2]||(h[2]=d=>t.value.satuan=d),placeholder:"Satuan",class:"input"},null,512),[[Gr,t.value.satuan]]),jr(X("input",{"onUpdate:modelValue":h[3]||(h[3]=d=>t.value.unit=d),type:"number",placeholder:"Unit",class:"input"},null,512),[[Gr,t.value.unit]]),jr(X("input",{"onUpdate:modelValue":h[4]||(h[4]=d=>t.value.hargaBeli=d),type:"number",placeholder:"Harga Beli",class:"input"},null,512),[[Gr,t.value.hargaBeli]]),jr(X("input",{"onUpdate:modelValue":h[5]||(h[5]=d=>t.value.hargaBeliPerUnit=d),type:"number",placeholder:"Harga Beli per Unit",class:"input",disabled:""},null,512),[[Gr,t.value.hargaBeliPerUnit]]),jr(X("input",{"onUpdate:modelValue":h[6]||(h[6]=d=>t.value.hargaJualPerUnit=d),type:"number",placeholder:"Harga Jual per Unit",class:"input",disabled:""},null,512),[[Gr,t.value.hargaJualPerUnit]]),X("button",f8,Tt(n.value?"Update":"Tambah")+" Produk ",1)],32),X("div",h8,[h[8]||(h[8]=X("h3",{class:"text-lg font-semibold mb-2"},"Daftar Produk",-1)),X("table",d8,[h[7]||(h[7]=X("thead",{class:"bg-gray-100"},[X("tr",null,[X("th",{class:"border"},"Kategori"),X("th",{class:"border"},"Nama"),X("th",{class:"border"},"Satuan"),X("th",{class:"border"},"Unit"),X("th",{class:"border"},"Harga Beli"),X("th",{class:"border"},"Harga Beli/Unit"),X("th",{class:"border"},"Harga Jual/Unit"),X("th",{class:"border"},"Aksi")])],-1)),X("tbody",null,[(br(!0),zr(tn,null,Uv(e.value,d=>(br(),zr("tr",{key:d.id,class:"border-t"},[X("td",p8,Tt(d.kategori),1),X("td",g8,Tt(d.nama),1),X("td",v8,Tt(d.satuan),1),X("td",m8,Tt(d.unit),1),X("td",y8,Tt(d.hargaBeli),1),X("td",w8,Tt(d.hargaBeliPerUnit),1),X("td",_8,Tt(d.hargaJualPerUnit),1),X("td",x8,[X("button",{onClick:p=>c(d),class:"text-blue-500 mr-2"},"Edit",8,E8),X("button",{onClick:p=>a(d.id),class:"text-red-500"},"Hapus",8,A8)])]))),128))])])])]))}}),C8=$h(I8,[["__scopeId","data-v-23d36fcc"]]);/*!
* sweetalert2 v11.23.0
* Released under the MIT License.
*/function Y2(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function b8(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lg(r,e){return r.get(Y2(r,e))}function T8(r,e,t){b8(r,e),e.set(r,t)}function S8(r,e,t){return r.set(Y2(r,e),t),t}const R8=100,pe={},P8=()=>{pe.previousActiveElement instanceof HTMLElement?(pe.previousActiveElement.focus(),pe.previousActiveElement=null):document.body&&document.body.focus()},O8=r=>new Promise(e=>{if(!r)return e();const t=window.scrollX,n=window.scrollY;pe.restoreFocusTimeout=setTimeout(()=>{P8(),e()},R8),window.scrollTo(t,n)}),Q2="swal2-",D8=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],U=D8.reduce((r,e)=>(r[e]=Q2+e,r),{}),N8=["success","warning","info","question","error"],xu=N8.reduce((r,e)=>(r[e]=Q2+e,r),{}),Z2="SweetAlert2:",Nd=r=>r.charAt(0).toUpperCase()+r.slice(1),yr=r=>{console.warn(`${Z2} ${typeof r=="object"?r.join(" "):r}`)},po=r=>{console.error(`${Z2} ${r}`)},fg=[],M8=r=>{fg.includes(r)||(fg.push(r),yr(r))},J2=(r,e=null)=>{M8(`"${r}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},vl=r=>typeof r=="function"?r():r,Md=r=>r&&typeof r.toPromise=="function",$a=r=>Md(r)?r.toPromise():Promise.resolve(r),kd=r=>r&&Promise.resolve(r)===r,wr=()=>document.body.querySelector(`.${U.container}`),ja=r=>{const e=wr();return e?e.querySelector(r):null},Br=r=>ja(`.${r}`),Fe=()=>Br(U.popup),ys=()=>Br(U.icon),k8=()=>Br(U["icon-content"]),ew=()=>Br(U.title),Ld=()=>Br(U["html-container"]),tw=()=>Br(U.image),Bd=()=>Br(U["progress-steps"]),ml=()=>Br(U["validation-message"]),Pn=()=>ja(`.${U.actions} .${U.confirm}`),ws=()=>ja(`.${U.actions} .${U.cancel}`),go=()=>ja(`.${U.actions} .${U.deny}`),L8=()=>Br(U["input-label"]),_s=()=>ja(`.${U.loader}`),Ga=()=>Br(U.actions),rw=()=>Br(U.footer),yl=()=>Br(U["timer-progress-bar"]),Fd=()=>Br(U.close),B8=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Vd=()=>{const r=Fe();if(!r)return[];const e=r.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),t=Array.from(e).sort((o,s)=>{const a=parseInt(o.getAttribute("tabindex")||"0"),c=parseInt(s.getAttribute("tabindex")||"0");return a>c?1:a<c?-1:0}),n=r.querySelectorAll(B8),i=Array.from(n).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(t.concat(i))].filter(o=>Tr(o))},Ud=()=>$n(document.body,U.shown)&&!$n(document.body,U["toast-shown"])&&!$n(document.body,U["no-backdrop"]),wl=()=>{const r=Fe();return r?$n(r,U.toast):!1},F8=()=>{const r=Fe();return r?r.hasAttribute("data-loading"):!1},Fr=(r,e)=>{if(r.textContent="",e){const n=new DOMParser().parseFromString(e,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(s=>{r.appendChild(s)});const o=n.querySelector("body");o&&Array.from(o.childNodes).forEach(s=>{s instanceof HTMLVideoElement||s instanceof HTMLAudioElement?r.appendChild(s.cloneNode(!0)):r.appendChild(s)})}},$n=(r,e)=>{if(!e)return!1;const t=e.split(/\s+/);for(let n=0;n<t.length;n++)if(!r.classList.contains(t[n]))return!1;return!0},V8=(r,e)=>{Array.from(r.classList).forEach(t=>{!Object.values(U).includes(t)&&!Object.values(xu).includes(t)&&!Object.values(e.showClass||{}).includes(t)&&r.classList.remove(t)})},Lr=(r,e,t)=>{if(V8(r,e),!e.customClass)return;const n=e.customClass[t];if(n){if(typeof n!="string"&&!n.forEach){yr(`Invalid type of customClass.${t}! Expected string or iterable object, got "${typeof n}"`);return}He(r,n)}},_l=(r,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return r.querySelector(`.${U.popup} > .${U[e]}`);case"checkbox":return r.querySelector(`.${U.popup} > .${U.checkbox} input`);case"radio":return r.querySelector(`.${U.popup} > .${U.radio} input:checked`)||r.querySelector(`.${U.popup} > .${U.radio} input:first-child`);case"range":return r.querySelector(`.${U.popup} > .${U.range} input`);default:return r.querySelector(`.${U.popup} > .${U.input}`)}},nw=r=>{if(r.focus(),r.type!=="file"){const e=r.value;r.value="",r.value=e}},iw=(r,e,t)=>{!r||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(n=>{Array.isArray(r)?r.forEach(i=>{t?i.classList.add(n):i.classList.remove(n)}):t?r.classList.add(n):r.classList.remove(n)}))},He=(r,e)=>{iw(r,e,!0)},Qr=(r,e)=>{iw(r,e,!1)},vi=(r,e)=>{const t=Array.from(r.children);for(let n=0;n<t.length;n++){const i=t[n];if(i instanceof HTMLElement&&$n(i,e))return i}},to=(r,e,t)=>{t===`${parseInt(t)}`&&(t=parseInt(t)),t||parseInt(t)===0?r.style.setProperty(e,typeof t=="number"?`${t}px`:t):r.style.removeProperty(e)},Vt=(r,e="flex")=>{r&&(r.style.display=e)},ur=r=>{r&&(r.style.display="none")},Hd=(r,e="block")=>{r&&new MutationObserver(()=>{Wa(r,r.innerHTML,e)}).observe(r,{childList:!0,subtree:!0})},hg=(r,e,t,n)=>{const i=r.querySelector(e);i&&i.style.setProperty(t,n)},Wa=(r,e,t="flex")=>{e?Vt(r,t):ur(r)},Tr=r=>!!(r&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)),U8=()=>!Tr(Pn())&&!Tr(go())&&!Tr(ws()),uh=r=>r.scrollHeight>r.clientHeight,H8=(r,e)=>{let t=r;for(;t&&t!==e;){if(uh(t))return!0;t=t.parentElement}return!1},ow=r=>{const e=window.getComputedStyle(r),t=parseFloat(e.getPropertyValue("animation-duration")||"0"),n=parseFloat(e.getPropertyValue("transition-duration")||"0");return t>0||n>0},$d=(r,e=!1)=>{const t=yl();t&&Tr(t)&&(e&&(t.style.transition="none",t.style.width="100%"),setTimeout(()=>{t.style.transition=`width ${r/1e3}s linear`,t.style.width="0%"},10))},$8=()=>{const r=yl();if(!r)return;const e=parseInt(window.getComputedStyle(r).width);r.style.removeProperty("transition"),r.style.width="100%";const t=parseInt(window.getComputedStyle(r).width),n=e/t*100;r.style.width=`${n}%`},j8=()=>typeof window>"u"||typeof document>"u",G8=`
 <div aria-labelledby="${U.title}" aria-describedby="${U["html-container"]}" class="${U.popup}" tabindex="-1">
   <button type="button" class="${U.close}"></button>
   <ul class="${U["progress-steps"]}"></ul>
   <div class="${U.icon}"></div>
   <img class="${U.image}" />
   <h2 class="${U.title}" id="${U.title}"></h2>
   <div class="${U["html-container"]}" id="${U["html-container"]}"></div>
   <input class="${U.input}" id="${U.input}" />
   <input type="file" class="${U.file}" />
   <div class="${U.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${U.select}" id="${U.select}"></select>
   <div class="${U.radio}"></div>
   <label class="${U.checkbox}">
     <input type="checkbox" id="${U.checkbox}" />
     <span class="${U.label}"></span>
   </label>
   <textarea class="${U.textarea}" id="${U.textarea}"></textarea>
   <div class="${U["validation-message"]}" id="${U["validation-message"]}"></div>
   <div class="${U.actions}">
     <div class="${U.loader}"></div>
     <button type="button" class="${U.confirm}"></button>
     <button type="button" class="${U.deny}"></button>
     <button type="button" class="${U.cancel}"></button>
   </div>
   <div class="${U.footer}"></div>
   <div class="${U["timer-progress-bar-container"]}">
     <div class="${U["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),W8=()=>{const r=wr();return r?(r.remove(),Qr([document.documentElement,document.body],[U["no-backdrop"],U["toast-shown"],U["has-column"]]),!0):!1},Gi=()=>{pe.currentInstance.resetValidationMessage()},z8=()=>{const r=Fe(),e=vi(r,U.input),t=vi(r,U.file),n=r.querySelector(`.${U.range} input`),i=r.querySelector(`.${U.range} output`),o=vi(r,U.select),s=r.querySelector(`.${U.checkbox} input`),a=vi(r,U.textarea);e.oninput=Gi,t.onchange=Gi,o.onchange=Gi,s.onchange=Gi,a.oninput=Gi,n.oninput=()=>{Gi(),i.value=n.value},n.onchange=()=>{Gi(),i.value=n.value}},q8=r=>typeof r=="string"?document.querySelector(r):r,X8=r=>{const e=Fe();e.setAttribute("role",r.toast?"alert":"dialog"),e.setAttribute("aria-live",r.toast?"polite":"assertive"),r.toast||e.setAttribute("aria-modal","true")},K8=r=>{window.getComputedStyle(r).direction==="rtl"&&He(wr(),U.rtl)},Y8=r=>{const e=W8();if(j8()){po("SweetAlert2 requires document to initialize");return}const t=document.createElement("div");t.className=U.container,e&&He(t,U["no-transition"]),Fr(t,G8),t.dataset.swal2Theme=r.theme;const n=q8(r.target);n.appendChild(t),r.topLayer&&(t.setAttribute("popover",""),t.showPopover()),X8(r),K8(n),z8()},jd=(r,e)=>{r instanceof HTMLElement?e.appendChild(r):typeof r=="object"?Q8(r,e):r&&Fr(e,r)},Q8=(r,e)=>{r.jquery?Z8(e,r):Fr(e,r.toString())},Z8=(r,e)=>{if(r.textContent="",0 in e)for(let t=0;t in e;t++)r.appendChild(e[t].cloneNode(!0));else r.appendChild(e.cloneNode(!0))},J8=(r,e)=>{const t=Ga(),n=_s();!t||!n||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?ur(t):Vt(t),Lr(t,e,"actions"),e6(t,n,e),Fr(n,e.loaderHtml||""),Lr(n,e,"loader"))};function e6(r,e,t){const n=Pn(),i=go(),o=ws();!n||!i||!o||(hf(n,"confirm",t),hf(i,"deny",t),hf(o,"cancel",t),t6(n,i,o,t),t.reverseButtons&&(t.toast?(r.insertBefore(o,n),r.insertBefore(i,n)):(r.insertBefore(o,e),r.insertBefore(i,e),r.insertBefore(n,e))))}function t6(r,e,t,n){if(!n.buttonsStyling){Qr([r,e,t],U.styled);return}He([r,e,t],U.styled),n.confirmButtonColor&&r.style.setProperty("--swal2-confirm-button-background-color",n.confirmButtonColor),n.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",n.denyButtonColor),n.cancelButtonColor&&t.style.setProperty("--swal2-cancel-button-background-color",n.cancelButtonColor),ff(r),ff(e),ff(t)}function ff(r){const e=window.getComputedStyle(r);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const t=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");r.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${t}`))}function hf(r,e,t){const n=Nd(e);Wa(r,t[`show${n}Button`],"inline-block"),Fr(r,t[`${e}ButtonText`]||""),r.setAttribute("aria-label",t[`${e}ButtonAriaLabel`]||""),r.className=U[e],Lr(r,t,`${e}Button`)}const r6=(r,e)=>{const t=Fd();t&&(Fr(t,e.closeButtonHtml||""),Lr(t,e,"closeButton"),Wa(t,e.showCloseButton),t.setAttribute("aria-label",e.closeButtonAriaLabel||""))},n6=(r,e)=>{const t=wr();t&&(i6(t,e.backdrop),o6(t,e.position),s6(t,e.grow),Lr(t,e,"container"))};function i6(r,e){typeof e=="string"?r.style.background=e:e||He([document.documentElement,document.body],U["no-backdrop"])}function o6(r,e){e&&(e in U?He(r,U[e]):(yr('The "position" parameter is not valid, defaulting to "center"'),He(r,U.center)))}function s6(r,e){e&&He(r,U[`grow-${e}`])}var rt={innerParams:new WeakMap,domCache:new WeakMap};const a6=["input","file","range","select","radio","checkbox","textarea"],c6=(r,e)=>{const t=Fe();if(!t)return;const n=rt.innerParams.get(r),i=!n||e.input!==n.input;a6.forEach(o=>{const s=vi(t,U[o]);s&&(f6(o,e.inputAttributes),s.className=U[o],i&&ur(s))}),e.input&&(i&&u6(e),h6(e))},u6=r=>{if(!r.input)return;if(!mt[r.input]){po(`Unexpected type of input! Expected ${Object.keys(mt).join(" | ")}, got "${r.input}"`);return}const e=sw(r.input);if(!e)return;const t=mt[r.input](e,r);Vt(e),r.inputAutoFocus&&setTimeout(()=>{nw(t)})},l6=r=>{for(let e=0;e<r.attributes.length;e++){const t=r.attributes[e].name;["id","type","value","style"].includes(t)||r.removeAttribute(t)}},f6=(r,e)=>{const t=Fe();if(!t)return;const n=_l(t,r);if(n){l6(n);for(const i in e)n.setAttribute(i,e[i])}},h6=r=>{if(!r.input)return;const e=sw(r.input);e&&Lr(e,r,"input")},Gd=(r,e)=>{!r.placeholder&&e.inputPlaceholder&&(r.placeholder=e.inputPlaceholder)},za=(r,e,t)=>{if(t.inputLabel){const n=document.createElement("label"),i=U["input-label"];n.setAttribute("for",r.id),n.className=i,typeof t.customClass=="object"&&He(n,t.customClass.inputLabel),n.innerText=t.inputLabel,e.insertAdjacentElement("beforebegin",n)}},sw=r=>{const e=Fe();if(e)return vi(e,U[r]||U.input)},Eu=(r,e)=>{["string","number"].includes(typeof e)?r.value=`${e}`:kd(e)||yr(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},mt={};mt.text=mt.email=mt.password=mt.number=mt.tel=mt.url=mt.search=mt.date=mt["datetime-local"]=mt.time=mt.week=mt.month=(r,e)=>(Eu(r,e.inputValue),za(r,r,e),Gd(r,e),r.type=e.input,r);mt.file=(r,e)=>(za(r,r,e),Gd(r,e),r);mt.range=(r,e)=>{const t=r.querySelector("input"),n=r.querySelector("output");return Eu(t,e.inputValue),t.type=e.input,Eu(n,e.inputValue),za(t,r,e),r};mt.select=(r,e)=>{if(r.textContent="",e.inputPlaceholder){const t=document.createElement("option");Fr(t,e.inputPlaceholder),t.value="",t.disabled=!0,t.selected=!0,r.appendChild(t)}return za(r,r,e),r};mt.radio=r=>(r.textContent="",r);mt.checkbox=(r,e)=>{const t=_l(Fe(),"checkbox");t.value="1",t.checked=!!e.inputValue;const n=r.querySelector("span");return Fr(n,e.inputPlaceholder||e.inputLabel),t};mt.textarea=(r,e)=>{Eu(r,e.inputValue),Gd(r,e),za(r,r,e);const t=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(Fe()).width),i=()=>{if(!document.body.contains(r))return;const o=r.offsetWidth+t(r);o>n?Fe().style.width=`${o}px`:to(Fe(),"width",e.width)};new MutationObserver(i).observe(r,{attributes:!0,attributeFilter:["style"]})}}),r};const d6=(r,e)=>{const t=Ld();t&&(Hd(t),Lr(t,e,"htmlContainer"),e.html?(jd(e.html,t),Vt(t,"block")):e.text?(t.textContent=e.text,Vt(t,"block")):ur(t),c6(r,e))},p6=(r,e)=>{const t=rw();t&&(Hd(t),Wa(t,e.footer,"block"),e.footer&&jd(e.footer,t),Lr(t,e,"footer"))},g6=(r,e)=>{const t=rt.innerParams.get(r),n=ys();if(!n)return;if(t&&e.icon===t.icon){pg(n,e),dg(n,e);return}if(!e.icon&&!e.iconHtml){ur(n);return}if(e.icon&&Object.keys(xu).indexOf(e.icon)===-1){po(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),ur(n);return}Vt(n),pg(n,e),dg(n,e),He(n,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",aw)},dg=(r,e)=>{for(const[t,n]of Object.entries(xu))e.icon!==t&&Qr(r,n);He(r,e.icon&&xu[e.icon]),y6(r,e),aw(),Lr(r,e,"icon")},aw=()=>{const r=Fe();if(!r)return;const e=window.getComputedStyle(r).getPropertyValue("background-color"),t=r.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<t.length;n++)t[n].style.backgroundColor=e},v6=r=>`
  ${r.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${r.animation?'<div class="swal2-success-fix"></div>':""}
  ${r.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,m6=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,pg=(r,e)=>{if(!e.icon&&!e.iconHtml)return;let t=r.innerHTML,n="";e.iconHtml?n=gg(e.iconHtml):e.icon==="success"?(n=v6(e),t=t.replace(/ style=".*?"/g,"")):e.icon==="error"?n=m6:e.icon&&(n=gg({question:"?",warning:"!",info:"i"}[e.icon])),t.trim()!==n.trim()&&Fr(r,n)},y6=(r,e)=>{if(e.iconColor){r.style.color=e.iconColor,r.style.borderColor=e.iconColor;for(const t of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])hg(r,t,"background-color",e.iconColor);hg(r,".swal2-success-ring","border-color",e.iconColor)}},gg=r=>`<div class="${U["icon-content"]}">${r}</div>`,w6=(r,e)=>{const t=tw();if(t){if(!e.imageUrl){ur(t);return}Vt(t,""),t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt||""),to(t,"width",e.imageWidth),to(t,"height",e.imageHeight),t.className=U.image,Lr(t,e,"image")}};let Wd=!1,cw=0,uw=0,lw=0,fw=0;const _6=r=>{r.addEventListener("mousedown",Au),document.body.addEventListener("mousemove",Iu),r.addEventListener("mouseup",Cu),r.addEventListener("touchstart",Au),document.body.addEventListener("touchmove",Iu),r.addEventListener("touchend",Cu)},x6=r=>{r.removeEventListener("mousedown",Au),document.body.removeEventListener("mousemove",Iu),r.removeEventListener("mouseup",Cu),r.removeEventListener("touchstart",Au),document.body.removeEventListener("touchmove",Iu),r.removeEventListener("touchend",Cu)},Au=r=>{const e=Fe();if(r.target===e||ys().contains(r.target)){Wd=!0;const t=hw(r);cw=t.clientX,uw=t.clientY,lw=parseInt(e.style.insetInlineStart)||0,fw=parseInt(e.style.insetBlockStart)||0,He(e,"swal2-dragging")}},Iu=r=>{const e=Fe();if(Wd){let{clientX:t,clientY:n}=hw(r);e.style.insetInlineStart=`${lw+(t-cw)}px`,e.style.insetBlockStart=`${fw+(n-uw)}px`}},Cu=()=>{const r=Fe();Wd=!1,Qr(r,"swal2-dragging")},hw=r=>{let e=0,t=0;return r.type.startsWith("mouse")?(e=r.clientX,t=r.clientY):r.type.startsWith("touch")&&(e=r.touches[0].clientX,t=r.touches[0].clientY),{clientX:e,clientY:t}},E6=(r,e)=>{const t=wr(),n=Fe();if(!(!t||!n)){if(e.toast){to(t,"width",e.width),n.style.width="100%";const i=_s();i&&n.insertBefore(i,ys())}else to(n,"width",e.width);to(n,"padding",e.padding),e.color&&(n.style.color=e.color),e.background&&(n.style.background=e.background),ur(ml()),A6(n,e),e.draggable&&!e.toast?(He(n,U.draggable),_6(n)):(Qr(n,U.draggable),x6(n))}},A6=(r,e)=>{const t=e.showClass||{};r.className=`${U.popup} ${Tr(r)?t.popup:""}`,e.toast?(He([document.documentElement,document.body],U["toast-shown"]),He(r,U.toast)):He(r,U.modal),Lr(r,e,"popup"),typeof e.customClass=="string"&&He(r,e.customClass),e.icon&&He(r,U[`icon-${e.icon}`])},I6=(r,e)=>{const t=Bd();if(!t)return;const{progressSteps:n,currentProgressStep:i}=e;if(!n||n.length===0||i===void 0){ur(t);return}Vt(t),t.textContent="",i>=n.length&&yr("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((o,s)=>{const a=C6(o);if(t.appendChild(a),s===i&&He(a,U["active-progress-step"]),s!==n.length-1){const c=b6(e);t.appendChild(c)}})},C6=r=>{const e=document.createElement("li");return He(e,U["progress-step"]),Fr(e,r),e},b6=r=>{const e=document.createElement("li");return He(e,U["progress-step-line"]),r.progressStepsDistance&&to(e,"width",r.progressStepsDistance),e},T6=(r,e)=>{const t=ew();t&&(Hd(t),Wa(t,e.title||e.titleText,"block"),e.title&&jd(e.title,t),e.titleText&&(t.innerText=e.titleText),Lr(t,e,"title"))},dw=(r,e)=>{E6(r,e),n6(r,e),I6(r,e),g6(r,e),w6(r,e),T6(r,e),r6(r,e),d6(r,e),J8(r,e),p6(r,e);const t=Fe();typeof e.didRender=="function"&&t&&e.didRender(t),pe.eventEmitter.emit("didRender",t)},S6=()=>Tr(Fe()),pw=()=>{var r;return(r=Pn())===null||r===void 0?void 0:r.click()},R6=()=>{var r;return(r=go())===null||r===void 0?void 0:r.click()},P6=()=>{var r;return(r=ws())===null||r===void 0?void 0:r.click()},xs=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),gw=r=>{r.keydownTarget&&r.keydownHandlerAdded&&(r.keydownTarget.removeEventListener("keydown",r.keydownHandler,{capture:r.keydownListenerCapture}),r.keydownHandlerAdded=!1)},O6=(r,e,t)=>{gw(r),e.toast||(r.keydownHandler=n=>N6(e,n,t),r.keydownTarget=e.keydownListenerCapture?window:Fe(),r.keydownListenerCapture=e.keydownListenerCapture,r.keydownTarget.addEventListener("keydown",r.keydownHandler,{capture:r.keydownListenerCapture}),r.keydownHandlerAdded=!0)},lh=(r,e)=>{var t;const n=Vd();if(n.length){r=r+e,r===-2&&(r=n.length-1),r===n.length?r=0:r===-1&&(r=n.length-1),n[r].focus();return}(t=Fe())===null||t===void 0||t.focus()},vw=["ArrowRight","ArrowDown"],D6=["ArrowLeft","ArrowUp"],N6=(r,e,t)=>{r&&(e.isComposing||e.keyCode===229||(r.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?M6(e,r):e.key==="Tab"?k6(e):[...vw,...D6].includes(e.key)?L6(e.key):e.key==="Escape"&&B6(e,r,t)))},M6=(r,e)=>{if(!vl(e.allowEnterKey))return;const t=_l(Fe(),e.input);if(r.target&&t&&r.target instanceof HTMLElement&&r.target.outerHTML===t.outerHTML){if(["textarea","file"].includes(e.input))return;pw(),r.preventDefault()}},k6=r=>{const e=r.target,t=Vd();let n=-1;for(let i=0;i<t.length;i++)if(e===t[i]){n=i;break}r.shiftKey?lh(n,-1):lh(n,1),r.stopPropagation(),r.preventDefault()},L6=r=>{const e=Ga(),t=Pn(),n=go(),i=ws();if(!e||!t||!n||!i)return;const o=[t,n,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const s=vw.includes(r)?"nextElementSibling":"previousElementSibling";let a=document.activeElement;if(a){for(let c=0;c<e.children.length;c++){if(a=a[s],!a)return;if(a instanceof HTMLButtonElement&&Tr(a))break}a instanceof HTMLButtonElement&&a.focus()}},B6=(r,e,t)=>{r.preventDefault(),vl(e.allowEscapeKey)&&t(xs.esc)};var as={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const F6=()=>{const r=wr();Array.from(document.body.children).forEach(t=>{t.contains(r)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},mw=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},yw=typeof window<"u"&&!!window.GestureEvent,V6=()=>{if(yw&&!$n(document.body,U.iosfix)){const r=document.body.scrollTop;document.body.style.top=`${r*-1}px`,He(document.body,U.iosfix),U6()}},U6=()=>{const r=wr();if(!r)return;let e;r.ontouchstart=t=>{e=H6(t)},r.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},H6=r=>{const e=r.target,t=wr(),n=Ld();return!t||!n||$6(r)||j6(r)?!1:e===t||!uh(t)&&e instanceof HTMLElement&&!H8(e,n)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(uh(n)&&n.contains(e))},$6=r=>r.touches&&r.touches.length&&r.touches[0].touchType==="stylus",j6=r=>r.touches&&r.touches.length>1,G6=()=>{if($n(document.body,U.iosfix)){const r=parseInt(document.body.style.top,10);Qr(document.body,U.iosfix),document.body.style.top="",document.body.scrollTop=r*-1}},W6=()=>{const r=document.createElement("div");r.className=U["scrollbar-measure"],document.body.appendChild(r);const e=r.getBoundingClientRect().width-r.clientWidth;return document.body.removeChild(r),e};let qo=null;const z6=r=>{qo===null&&(document.body.scrollHeight>window.innerHeight||r==="scroll")&&(qo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${qo+W6()}px`)},q6=()=>{qo!==null&&(document.body.style.paddingRight=`${qo}px`,qo=null)};function ww(r,e,t,n){wl()?vg(r,n):(O8(t).then(()=>vg(r,n)),gw(pe)),yw?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Ud()&&(q6(),G6(),mw()),X6()}function X6(){Qr([document.documentElement,document.body],[U.shown,U["height-auto"],U["no-backdrop"],U["toast-shown"]])}function mi(r){r=Y6(r);const e=as.swalPromiseResolve.get(this),t=K6(this);this.isAwaitingPromise?r.isDismissed||(qa(this),e(r)):t&&e(r)}const K6=r=>{const e=Fe();if(!e)return!1;const t=rt.innerParams.get(r);if(!t||$n(e,t.hideClass.popup))return!1;Qr(e,t.showClass.popup),He(e,t.hideClass.popup);const n=wr();return Qr(n,t.showClass.backdrop),He(n,t.hideClass.backdrop),Q6(r,e,t),!0};function _w(r){const e=as.swalPromiseReject.get(this);qa(this),e&&e(r)}const qa=r=>{r.isAwaitingPromise&&(delete r.isAwaitingPromise,rt.innerParams.get(r)||r._destroy())},Y6=r=>typeof r>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},r),Q6=(r,e,t)=>{var n;const i=wr(),o=ow(e);typeof t.willClose=="function"&&t.willClose(e),(n=pe.eventEmitter)===null||n===void 0||n.emit("willClose",e),o?Z6(r,e,i,t.returnFocus,t.didClose):ww(r,i,t.returnFocus,t.didClose)},Z6=(r,e,t,n,i)=>{pe.swalCloseEventFinishedCallback=ww.bind(null,r,t,n,i);const o=function(s){if(s.target===e){var a;(a=pe.swalCloseEventFinishedCallback)===null||a===void 0||a.call(pe),delete pe.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},vg=(r,e)=>{setTimeout(()=>{var t;typeof e=="function"&&e.bind(r.params)(),(t=pe.eventEmitter)===null||t===void 0||t.emit("didClose"),r._destroy&&r._destroy()})},cs=r=>{let e=Fe();if(e||new Ko,e=Fe(),!e)return;const t=_s();wl()?ur(ys()):J6(e,r),Vt(t),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},J6=(r,e)=>{const t=Ga(),n=_s();!t||!n||(!e&&Tr(Pn())&&(e=Pn()),Vt(t),e&&(ur(e),n.setAttribute("data-button-to-replace",e.className),t.insertBefore(n,e)),He([r,t],U.loading))},eR=(r,e)=>{e.input==="select"||e.input==="radio"?oR(r,e):["text","email","number","tel","textarea"].some(t=>t===e.input)&&(Md(e.inputValue)||kd(e.inputValue))&&(cs(Pn()),sR(r,e))},tR=(r,e)=>{const t=r.getInput();if(!t)return null;switch(e.input){case"checkbox":return rR(t);case"radio":return nR(t);case"file":return iR(t);default:return e.inputAutoTrim?t.value.trim():t.value}},rR=r=>r.checked?1:0,nR=r=>r.checked?r.value:null,iR=r=>r.files&&r.files.length?r.getAttribute("multiple")!==null?r.files:r.files[0]:null,oR=(r,e)=>{const t=Fe();if(!t)return;const n=i=>{e.input==="select"?aR(t,bu(i),e):e.input==="radio"&&cR(t,bu(i),e)};Md(e.inputOptions)||kd(e.inputOptions)?(cs(Pn()),$a(e.inputOptions).then(i=>{r.hideLoading(),n(i)})):typeof e.inputOptions=="object"?n(e.inputOptions):po(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},sR=(r,e)=>{const t=r.getInput();t&&(ur(t),$a(e.inputValue).then(n=>{t.value=e.input==="number"?`${parseFloat(n)||0}`:`${n}`,Vt(t),t.focus(),r.hideLoading()}).catch(n=>{po(`Error in inputValue promise: ${n}`),t.value="",Vt(t),t.focus(),r.hideLoading()}))};function aR(r,e,t){const n=vi(r,U.select);if(!n)return;const i=(o,s,a)=>{const c=document.createElement("option");c.value=a,Fr(c,s),c.selected=xw(a,t.inputValue),o.appendChild(c)};e.forEach(o=>{const s=o[0],a=o[1];if(Array.isArray(a)){const c=document.createElement("optgroup");c.label=s,c.disabled=!1,n.appendChild(c),a.forEach(u=>i(c,u[1],u[0]))}else i(n,a,s)}),n.focus()}function cR(r,e,t){const n=vi(r,U.radio);if(!n)return;e.forEach(o=>{const s=o[0],a=o[1],c=document.createElement("input"),u=document.createElement("label");c.type="radio",c.name=U.radio,c.value=s,xw(s,t.inputValue)&&(c.checked=!0);const l=document.createElement("span");Fr(l,a),l.className=U.label,u.appendChild(c),u.appendChild(l),n.appendChild(u)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const bu=r=>{const e=[];return r instanceof Map?r.forEach((t,n)=>{let i=t;typeof i=="object"&&(i=bu(i)),e.push([n,i])}):Object.keys(r).forEach(t=>{let n=r[t];typeof n=="object"&&(n=bu(n)),e.push([t,n])}),e},xw=(r,e)=>!!e&&e.toString()===r.toString(),uR=r=>{const e=rt.innerParams.get(r);r.disableButtons(),e.input?Ew(r,"confirm"):qd(r,!0)},lR=r=>{const e=rt.innerParams.get(r);r.disableButtons(),e.returnInputValueOnDeny?Ew(r,"deny"):zd(r,!1)},fR=(r,e)=>{r.disableButtons(),e(xs.cancel)},Ew=(r,e)=>{const t=rt.innerParams.get(r);if(!t.input){po(`The "input" parameter is needed to be set when using returnInputValueOn${Nd(e)}`);return}const n=r.getInput(),i=tR(r,t);t.inputValidator?hR(r,i,e):n&&!n.checkValidity()?(r.enableButtons(),r.showValidationMessage(t.validationMessage||n.validationMessage)):e==="deny"?zd(r,i):qd(r,i)},hR=(r,e,t)=>{const n=rt.innerParams.get(r);r.disableInput(),Promise.resolve().then(()=>$a(n.inputValidator(e,n.validationMessage))).then(o=>{r.enableButtons(),r.enableInput(),o?r.showValidationMessage(o):t==="deny"?zd(r,e):qd(r,e)})},zd=(r,e)=>{const t=rt.innerParams.get(r||void 0);t.showLoaderOnDeny&&cs(go()),t.preDeny?(r.isAwaitingPromise=!0,Promise.resolve().then(()=>$a(t.preDeny(e,t.validationMessage))).then(i=>{i===!1?(r.hideLoading(),qa(r)):r.close({isDenied:!0,value:typeof i>"u"?e:i})}).catch(i=>Aw(r||void 0,i))):r.close({isDenied:!0,value:e})},mg=(r,e)=>{r.close({isConfirmed:!0,value:e})},Aw=(r,e)=>{r.rejectPromise(e)},qd=(r,e)=>{const t=rt.innerParams.get(r||void 0);t.showLoaderOnConfirm&&cs(),t.preConfirm?(r.resetValidationMessage(),r.isAwaitingPromise=!0,Promise.resolve().then(()=>$a(t.preConfirm(e,t.validationMessage))).then(i=>{Tr(ml())||i===!1?(r.hideLoading(),qa(r)):mg(r,typeof i>"u"?e:i)}).catch(i=>Aw(r||void 0,i))):mg(r,e)};function Tu(){const r=rt.innerParams.get(this);if(!r)return;const e=rt.domCache.get(this);ur(e.loader),wl()?r.icon&&Vt(ys()):dR(e),Qr([e.popup,e.actions],U.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const dR=r=>{const e=r.popup.getElementsByClassName(r.loader.getAttribute("data-button-to-replace"));e.length?Vt(e[0],"inline-block"):U8()&&ur(r.actions)};function Iw(){const r=rt.innerParams.get(this),e=rt.domCache.get(this);return e?_l(e.popup,r.input):null}function Cw(r,e,t){const n=rt.domCache.get(r);e.forEach(i=>{n[i].disabled=t})}function bw(r,e){const t=Fe();if(!(!t||!r))if(r.type==="radio"){const n=t.querySelectorAll(`[name="${U.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=e}else r.disabled=e}function Tw(){Cw(this,["confirmButton","denyButton","cancelButton"],!1)}function Sw(){Cw(this,["confirmButton","denyButton","cancelButton"],!0)}function Rw(){bw(this.getInput(),!1)}function Pw(){bw(this.getInput(),!0)}function Ow(r){const e=rt.domCache.get(this),t=rt.innerParams.get(this);Fr(e.validationMessage,r),e.validationMessage.className=U["validation-message"],t.customClass&&t.customClass.validationMessage&&He(e.validationMessage,t.customClass.validationMessage),Vt(e.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",U["validation-message"]),nw(n),He(n,U.inputerror))}function Dw(){const r=rt.domCache.get(this);r.validationMessage&&ur(r.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Qr(e,U.inputerror))}const Xo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},pR=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],gR={allowEnterKey:void 0},vR=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Nw=r=>Object.prototype.hasOwnProperty.call(Xo,r),Mw=r=>pR.indexOf(r)!==-1,kw=r=>gR[r],mR=r=>{Nw(r)||yr(`Unknown parameter "${r}"`)},yR=r=>{vR.includes(r)&&yr(`The parameter "${r}" is incompatible with toasts`)},wR=r=>{const e=kw(r);e&&J2(r,e)},Lw=r=>{r.backdrop===!1&&r.allowOutsideClick&&yr('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),r.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(r.theme)&&yr(`Invalid theme "${r.theme}"`);for(const e in r)mR(e),r.toast&&yR(e),wR(e)};function Bw(r){const e=wr(),t=Fe(),n=rt.innerParams.get(this);if(!t||$n(t,n.hideClass.popup)){yr("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=_R(r),o=Object.assign({},n,i);Lw(o),e.dataset.swal2Theme=o.theme,dw(this,o),rt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,r),writable:!1,enumerable:!0}})}const _R=r=>{const e={};return Object.keys(r).forEach(t=>{Mw(t)?e[t]=r[t]:yr(`Invalid parameter to update: ${t}`)}),e};function Fw(){const r=rt.domCache.get(this),e=rt.innerParams.get(this);if(!e){Vw(this);return}r.popup&&pe.swalCloseEventFinishedCallback&&(pe.swalCloseEventFinishedCallback(),delete pe.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),pe.eventEmitter.emit("didDestroy"),xR(this)}const xR=r=>{Vw(r),delete r.params,delete pe.keydownHandler,delete pe.keydownTarget,delete pe.currentInstance},Vw=r=>{r.isAwaitingPromise?(df(rt,r),r.isAwaitingPromise=!0):(df(as,r),df(rt,r),delete r.isAwaitingPromise,delete r.disableButtons,delete r.enableButtons,delete r.getInput,delete r.disableInput,delete r.enableInput,delete r.hideLoading,delete r.disableLoading,delete r.showValidationMessage,delete r.resetValidationMessage,delete r.close,delete r.closePopup,delete r.closeModal,delete r.closeToast,delete r.rejectPromise,delete r.update,delete r._destroy)},df=(r,e)=>{for(const t in r)r[t].delete(e)};var ER=Object.freeze({__proto__:null,_destroy:Fw,close:mi,closeModal:mi,closePopup:mi,closeToast:mi,disableButtons:Sw,disableInput:Pw,disableLoading:Tu,enableButtons:Tw,enableInput:Rw,getInput:Iw,handleAwaitingPromise:qa,hideLoading:Tu,rejectPromise:_w,resetValidationMessage:Dw,showValidationMessage:Ow,update:Bw});const AR=(r,e,t)=>{r.toast?IR(r,e,t):(bR(e),TR(e),SR(r,e,t))},IR=(r,e,t)=>{e.popup.onclick=()=>{r&&(CR(r)||r.timer||r.input)||t(xs.close)}},CR=r=>!!(r.showConfirmButton||r.showDenyButton||r.showCancelButton||r.showCloseButton);let Su=!1;const bR=r=>{r.popup.onmousedown=()=>{r.container.onmouseup=function(e){r.container.onmouseup=()=>{},e.target===r.container&&(Su=!0)}}},TR=r=>{r.container.onmousedown=e=>{e.target===r.container&&e.preventDefault(),r.popup.onmouseup=function(t){r.popup.onmouseup=()=>{},(t.target===r.popup||t.target instanceof HTMLElement&&r.popup.contains(t.target))&&(Su=!0)}}},SR=(r,e,t)=>{e.container.onclick=n=>{if(Su){Su=!1;return}n.target===e.container&&vl(r.allowOutsideClick)&&t(xs.backdrop)}},RR=r=>typeof r=="object"&&r.jquery,yg=r=>r instanceof Element||RR(r),PR=r=>{const e={};return typeof r[0]=="object"&&!yg(r[0])?Object.assign(e,r[0]):["title","html","icon"].forEach((t,n)=>{const i=r[n];typeof i=="string"||yg(i)?e[t]=i:i!==void 0&&po(`Unexpected type of ${t}! Expected "string" or "Element", got ${typeof i}`)}),e};function OR(...r){return new this(...r)}function DR(r){class e extends this{_main(n,i){return super._main(n,Object.assign({},r,i))}}return e}const NR=()=>pe.timeout&&pe.timeout.getTimerLeft(),Uw=()=>{if(pe.timeout)return $8(),pe.timeout.stop()},Hw=()=>{if(pe.timeout){const r=pe.timeout.start();return $d(r),r}},MR=()=>{const r=pe.timeout;return r&&(r.running?Uw():Hw())},kR=r=>{if(pe.timeout){const e=pe.timeout.increase(r);return $d(e,!0),e}},LR=()=>!!(pe.timeout&&pe.timeout.isRunning());let wg=!1;const fh={};function BR(r="data-swal-template"){fh[r]=this,wg||(document.body.addEventListener("click",FR),wg=!0)}const FR=r=>{for(let e=r.target;e&&e!==document;e=e.parentNode)for(const t in fh){const n=e.getAttribute(t);if(n){fh[t].fire({template:n});return}}};class VR{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,t){const n=this._getHandlersByEventName(e);n.includes(t)||n.push(t)}once(e,t){const n=(...i)=>{this.removeListener(e,n),t.apply(this,i)};this.on(e,n)}emit(e,...t){this._getHandlersByEventName(e).forEach(n=>{try{n.apply(this,t)}catch(i){console.error(i)}})}removeListener(e,t){const n=this._getHandlersByEventName(e),i=n.indexOf(t);i>-1&&n.splice(i,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}pe.eventEmitter=new VR;const UR=(r,e)=>{pe.eventEmitter.on(r,e)},HR=(r,e)=>{pe.eventEmitter.once(r,e)},$R=(r,e)=>{if(!r){pe.eventEmitter.reset();return}e?pe.eventEmitter.removeListener(r,e):pe.eventEmitter.removeAllListeners(r)};var jR=Object.freeze({__proto__:null,argsToParams:PR,bindClickHandler:BR,clickCancel:P6,clickConfirm:pw,clickDeny:R6,enableLoading:cs,fire:OR,getActions:Ga,getCancelButton:ws,getCloseButton:Fd,getConfirmButton:Pn,getContainer:wr,getDenyButton:go,getFocusableElements:Vd,getFooter:rw,getHtmlContainer:Ld,getIcon:ys,getIconContent:k8,getImage:tw,getInputLabel:L8,getLoader:_s,getPopup:Fe,getProgressSteps:Bd,getTimerLeft:NR,getTimerProgressBar:yl,getTitle:ew,getValidationMessage:ml,increaseTimer:kR,isDeprecatedParameter:kw,isLoading:F8,isTimerRunning:LR,isUpdatableParameter:Mw,isValidParameter:Nw,isVisible:S6,mixin:DR,off:$R,on:UR,once:HR,resumeTimer:Hw,showLoading:cs,stopTimer:Uw,toggleTimer:MR});class GR{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const $w=["swal-title","swal-html","swal-footer"],WR=r=>{const e=typeof r.template=="string"?document.querySelector(r.template):r.template;if(!e)return{};const t=e.content;return JR(t),Object.assign(zR(t),qR(t),XR(t),KR(t),YR(t),QR(t),ZR(t,$w))},zR=r=>{const e={};return Array.from(r.querySelectorAll("swal-param")).forEach(n=>{uo(n,["name","value"]);const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(typeof Xo[i]=="boolean"?e[i]=o!=="false":typeof Xo[i]=="object"?e[i]=JSON.parse(o):e[i]=o)}),e},qR=r=>{const e={};return Array.from(r.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),o=n.getAttribute("value");!i||!o||(e[i]=new Function(`return ${o}`)())}),e},XR=r=>{const e={};return Array.from(r.querySelectorAll("swal-button")).forEach(n=>{uo(n,["type","color","aria-label"]);const i=n.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(e[`${i}ButtonText`]=n.innerHTML,e[`show${Nd(i)}Button`]=!0,n.hasAttribute("color")&&(e[`${i}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(e[`${i}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),e},KR=r=>{const e={},t=r.querySelector("swal-image");return t&&(uo(t,["src","width","height","alt"]),t.hasAttribute("src")&&(e.imageUrl=t.getAttribute("src")||void 0),t.hasAttribute("width")&&(e.imageWidth=t.getAttribute("width")||void 0),t.hasAttribute("height")&&(e.imageHeight=t.getAttribute("height")||void 0),t.hasAttribute("alt")&&(e.imageAlt=t.getAttribute("alt")||void 0)),e},YR=r=>{const e={},t=r.querySelector("swal-icon");return t&&(uo(t,["type","color"]),t.hasAttribute("type")&&(e.icon=t.getAttribute("type")),t.hasAttribute("color")&&(e.iconColor=t.getAttribute("color")),e.iconHtml=t.innerHTML),e},QR=r=>{const e={},t=r.querySelector("swal-input");t&&(uo(t,["type","label","placeholder","value"]),e.input=t.getAttribute("type")||"text",t.hasAttribute("label")&&(e.inputLabel=t.getAttribute("label")),t.hasAttribute("placeholder")&&(e.inputPlaceholder=t.getAttribute("placeholder")),t.hasAttribute("value")&&(e.inputValue=t.getAttribute("value")));const n=Array.from(r.querySelectorAll("swal-input-option"));return n.length&&(e.inputOptions={},n.forEach(i=>{uo(i,["value"]);const o=i.getAttribute("value");if(!o)return;const s=i.innerHTML;e.inputOptions[o]=s})),e},ZR=(r,e)=>{const t={};for(const n in e){const i=e[n],o=r.querySelector(i);o&&(uo(o,[]),t[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return t},JR=r=>{const e=$w.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(r.children).forEach(t=>{const n=t.tagName.toLowerCase();e.includes(n)||yr(`Unrecognized element <${n}>`)})},uo=(r,e)=>{Array.from(r.attributes).forEach(t=>{e.indexOf(t.name)===-1&&yr([`Unrecognized attribute "${t.name}" on <${r.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},jw=10,eP=r=>{const e=wr(),t=Fe();typeof r.willOpen=="function"&&r.willOpen(t),pe.eventEmitter.emit("willOpen",t);const i=window.getComputedStyle(document.body).overflowY;nP(e,t,r),setTimeout(()=>{tP(e,t)},jw),Ud()&&(rP(e,r.scrollbarPadding,i),F6()),!wl()&&!pe.previousActiveElement&&(pe.previousActiveElement=document.activeElement),typeof r.didOpen=="function"&&setTimeout(()=>r.didOpen(t)),pe.eventEmitter.emit("didOpen",t),Qr(e,U["no-transition"])},Ru=r=>{const e=Fe();if(r.target!==e)return;const t=wr();e.removeEventListener("animationend",Ru),e.removeEventListener("transitionend",Ru),t.style.overflowY="auto"},tP=(r,e)=>{ow(e)?(r.style.overflowY="hidden",e.addEventListener("animationend",Ru),e.addEventListener("transitionend",Ru)):r.style.overflowY="auto"},rP=(r,e,t)=>{V6(),e&&t!=="hidden"&&z6(t),setTimeout(()=>{r.scrollTop=0})},nP=(r,e,t)=>{He(r,t.showClass.backdrop),t.animation?(e.style.setProperty("opacity","0","important"),Vt(e,"grid"),setTimeout(()=>{He(e,t.showClass.popup),e.style.removeProperty("opacity")},jw)):Vt(e,"grid"),He([document.documentElement,document.body],U.shown),t.heightAuto&&t.backdrop&&!t.toast&&He([document.documentElement,document.body],U["height-auto"])};var _g={email:(r,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(r)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(r,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(r)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function iP(r){r.inputValidator||(r.input==="email"&&(r.inputValidator=_g.email),r.input==="url"&&(r.inputValidator=_g.url))}function oP(r){(!r.target||typeof r.target=="string"&&!document.querySelector(r.target)||typeof r.target!="string"&&!r.target.appendChild)&&(yr('Target parameter is not valid, defaulting to "body"'),r.target="body")}function sP(r){iP(r),r.showLoaderOnConfirm&&!r.preConfirm&&yr(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),oP(r),typeof r.title=="string"&&(r.title=r.title.split(`
`).join("<br />")),Y8(r)}let gn;var Ec=new WeakMap;class _t{constructor(...e){if(T8(this,Ec,void 0),typeof window>"u")return;gn=this;const t=Object.freeze(this.constructor.argsToParams(e));this.params=t,this.isAwaitingPromise=!1,S8(Ec,this,this._main(gn.params))}_main(e,t={}){if(Lw(Object.assign({},t,e)),pe.currentInstance){const o=as.swalPromiseResolve.get(pe.currentInstance),{isAwaitingPromise:s}=pe.currentInstance;pe.currentInstance._destroy(),s||o({isDismissed:!0}),Ud()&&mw()}pe.currentInstance=gn;const n=cP(e,t);sP(n),Object.freeze(n),pe.timeout&&(pe.timeout.stop(),delete pe.timeout),clearTimeout(pe.restoreFocusTimeout);const i=uP(gn);return dw(gn,n),rt.innerParams.set(gn,n),aP(gn,i,n)}then(e){return lg(Ec,this).then(e)}finally(e){return lg(Ec,this).finally(e)}}const aP=(r,e,t)=>new Promise((n,i)=>{const o=s=>{r.close({isDismissed:!0,dismiss:s})};as.swalPromiseResolve.set(r,n),as.swalPromiseReject.set(r,i),e.confirmButton.onclick=()=>{uR(r)},e.denyButton.onclick=()=>{lR(r)},e.cancelButton.onclick=()=>{fR(r,o)},e.closeButton.onclick=()=>{o(xs.close)},AR(t,e,o),O6(pe,t,o),eR(r,t),eP(t),lP(pe,t,o),fP(e,t),setTimeout(()=>{e.container.scrollTop=0})}),cP=(r,e)=>{const t=WR(r),n=Object.assign({},Xo,e,t,r);return n.showClass=Object.assign({},Xo.showClass,n.showClass),n.hideClass=Object.assign({},Xo.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},uP=r=>{const e={popup:Fe(),container:wr(),actions:Ga(),confirmButton:Pn(),denyButton:go(),cancelButton:ws(),loader:_s(),closeButton:Fd(),validationMessage:ml(),progressSteps:Bd()};return rt.domCache.set(r,e),e},lP=(r,e,t)=>{const n=yl();ur(n),e.timer&&(r.timeout=new GR(()=>{t("timer"),delete r.timeout},e.timer),e.timerProgressBar&&(Vt(n),Lr(n,e,"timerProgressBar"),setTimeout(()=>{r.timeout&&r.timeout.running&&$d(e.timer)})))},fP=(r,e)=>{if(!e.toast){if(!vl(e.allowEnterKey)){J2("allowEnterKey"),pP();return}hP(r)||dP(r,e)||lh(-1,1)}},hP=r=>{const e=Array.from(r.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&Tr(t))return t.focus(),!0;return!1},dP=(r,e)=>e.focusDeny&&Tr(r.denyButton)?(r.denyButton.focus(),!0):e.focusCancel&&Tr(r.cancelButton)?(r.cancelButton.focus(),!0):e.focusConfirm&&Tr(r.confirmButton)?(r.confirmButton.focus(),!0):!1,pP=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};_t.prototype.disableButtons=Sw;_t.prototype.enableButtons=Tw;_t.prototype.getInput=Iw;_t.prototype.disableInput=Pw;_t.prototype.enableInput=Rw;_t.prototype.hideLoading=Tu;_t.prototype.disableLoading=Tu;_t.prototype.showValidationMessage=Ow;_t.prototype.resetValidationMessage=Dw;_t.prototype.close=mi;_t.prototype.closePopup=mi;_t.prototype.closeModal=mi;_t.prototype.closeToast=mi;_t.prototype.rejectPromise=_w;_t.prototype.update=Bw;_t.prototype._destroy=Fw;Object.assign(_t,jR);Object.keys(ER).forEach(r=>{_t[r]=function(...e){return gn&&gn[r]?gn[r](...e):null}});_t.DismissReason=xs;_t.version="11.23.0";const Ko=_t;Ko.default=Ko;typeof document<"u"&&(function(r,e){var t=r.createElement("style");if(r.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function gP(r,e){var t=Object.setPrototypeOf;t?t(r,e):r.__proto__=e}function vP(r,e){e===void 0&&(e=r.constructor);var t=Error.captureStackTrace;t&&t(r,e)}var mP=(function(){var r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},r(t,n)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),yP=(function(r){mP(e,r);function e(t,n){var i=this.constructor,o=r.call(this,t,n)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),gP(o,i.prototype),vP(o),o}return e})(Error),wP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Rr=(function(r){wP(e,r);function e(t){t===void 0&&(t=void 0);var n=r.call(this,t)||this;return n.message=t,n}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e})(yP),_P=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),yt=(function(r){_P(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArgumentException",e})(Rr),xP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fe=(function(r){xP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e})(Rr),Gw=(function(){function r(e){if(this.binarizer=e,e===null)throw new fe("Binarizer must be non-null.")}return r.prototype.getWidth=function(){return this.binarizer.getWidth()},r.prototype.getHeight=function(){return this.binarizer.getHeight()},r.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},r.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},r.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},r.prototype.crop=function(e,t,n,i){var o=this.binarizer.getLuminanceSource().crop(e,t,n,i);return new r(this.binarizer.createBinarizer(o))},r.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},r.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new r(this.binarizer.createBinarizer(e))},r.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new r(this.binarizer.createBinarizer(e))},r.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},r})(),EP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Et=(function(r){EP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e})(Rr),AP=(function(){function r(e){this.source=e}return r.prototype.getLuminanceSource=function(){return this.source},r.prototype.getWidth=function(){return this.source.getWidth()},r.prototype.getHeight=function(){return this.source.getHeight()},r})(),et=(function(){function r(){}return r.arraycopy=function(e,t,n,i,o){for(;o--;)n[i++]=e[t++]},r.currentTimeMillis=function(){return Date.now()},r})(),IP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Xd=(function(r){IP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e})(Rr),CP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),xg=(function(r){CP(e,r);function e(t,n){t===void 0&&(t=void 0),n===void 0&&(n=void 0);var i=r.call(this,n)||this;return i.index=t,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e})(Xd),bP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ot=(function(){function r(){}return r.fill=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]=t},r.fillWithin=function(e,t,n,i){r.rangeCheck(e.length,t,n);for(var o=t;o<n;o++)e[o]=i},r.rangeCheck=function(e,t,n){if(t>n)throw new fe("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new xg(t);if(n>e)throw new xg(n)},r.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},r.create=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(n)})},r.createInt32Array=function(e,t,n){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(n)})},r.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0},r.hashCode=function(e){var t,n;if(e===null)return 0;var i=1;try{for(var o=bP(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},r.copyOf=function(e,t){return e.slice(0,t)},r.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},r.copyOfRange=function(e,t,n){var i=n-t,o=new Int32Array(i);return et.arraycopy(e,t,o,0,i),o},r.binarySearch=function(e,t,n){n===void 0&&(n=r.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=n(t,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},r.numberComparator=function(e,t){return e-t},r})(),Te=(function(){function r(){}return r.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)},r.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},r.toHexString=function(e){return e.toString(16)},r.toBinaryString=function(e){return String(parseInt(String(e),2))},r.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},r.truncDivision=function(e,t){return Math.trunc(e/t)},r.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r.MIN_VALUE_32_BITS=-2147483648,r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),Ft=(function(){function r(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=r.makeArray(e):this.bits=t)}return r.prototype.getSize=function(){return this.size},r.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},r.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=r.makeArray(e);et.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},r.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},r.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},r.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},r.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=n[i];o&=~((1<<(e&31))-1);for(var s=n.length;o===0;){if(++i===s)return t;o=n[i]}var a=i*32+Te.numberOfTrailingZeros(o);return a>t?t:a},r.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,i=Math.floor(e/32),o=~n[i];o&=~((1<<(e&31))-1);for(var s=n.length;o===0;){if(++i===s)return t;o=~n[i]}var a=i*32+Te.numberOfTrailingZeros(o);return a>t?t:a},r.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},r.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new fe;if(t!==e){t--;for(var n=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=n;s<=i;s++){var a=s>n?0:e&31,c=s<i?31:t&31,u=(2<<c)-(1<<a);o[s]|=u}}},r.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},r.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new fe;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,u=a<o?31:t&31,l=(2<<u)-(1<<c)&4294967295;if((s[a]&l)!==(n?l:0))return!1}return!0},r.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},r.prototype.appendBits=function(e,t){if(t<0||t>32)throw new fe("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)},r.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},r.prototype.xor=function(e){if(this.size!==e.size)throw new fe("Sizes don't match");for(var t=this.bits,n=0,i=t.length;n<i;n++)t[n]^=e.bits[n]},r.prototype.toBytes=function(e,t,n,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[n+o]=s}},r.prototype.getBitArray=function(){return this.bits},r.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,i=this.bits,o=0;o<n;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==n*32){for(var a=n*32-this.size,c=e[0]>>>a,o=1;o<n;o++){var u=e[o];c|=u<<32-a,e[o-1]=c,c=u>>>a}e[n-1]=c}this.bits=e},r.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.size===t.size&&Ot.equals(this.bits,t.bits)},r.prototype.hashCode=function(){return 31*this.size+Ot.hashCode(this.bits)},r.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},r.prototype.clone=function(){return new r(this.size,this.bits.slice())},r.prototype.toArray=function(){for(var e=[],t=0,n=this.size;t<n;t++)e.push(this.get(t));return e},r})(),hh;(function(r){r[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",r[r.ASSUME_GS1=8]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(hh||(hh={}));const tt=hh;var TP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Z=(function(r){TP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e})(Rr),SP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qe;(function(r){r[r.Cp437=0]="Cp437",r[r.ISO8859_1=1]="ISO8859_1",r[r.ISO8859_2=2]="ISO8859_2",r[r.ISO8859_3=3]="ISO8859_3",r[r.ISO8859_4=4]="ISO8859_4",r[r.ISO8859_5=5]="ISO8859_5",r[r.ISO8859_6=6]="ISO8859_6",r[r.ISO8859_7=7]="ISO8859_7",r[r.ISO8859_8=8]="ISO8859_8",r[r.ISO8859_9=9]="ISO8859_9",r[r.ISO8859_10=10]="ISO8859_10",r[r.ISO8859_11=11]="ISO8859_11",r[r.ISO8859_13=12]="ISO8859_13",r[r.ISO8859_14=13]="ISO8859_14",r[r.ISO8859_15=14]="ISO8859_15",r[r.ISO8859_16=15]="ISO8859_16",r[r.SJIS=16]="SJIS",r[r.Cp1250=17]="Cp1250",r[r.Cp1251=18]="Cp1251",r[r.Cp1252=19]="Cp1252",r[r.Cp1256=20]="Cp1256",r[r.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",r[r.UTF8=22]="UTF8",r[r.ASCII=23]="ASCII",r[r.Big5=24]="Big5",r[r.GB18030=25]="GB18030",r[r.EUC_KR=26]="EUC_KR"})(qe||(qe={}));var Rt=(function(){function r(e,t,n){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,r.VALUE_IDENTIFIER_TO_ECI.set(e,this),r.NAME_TO_ECI.set(n,this);for(var c=this.values,u=0,l=c.length;u!==l;u++){var h=c[u];r.VALUES_TO_ECI.set(h,this)}try{for(var d=SP(s),p=d.next();!p.done;p=d.next()){var v=p.value;r.NAME_TO_ECI.set(v,this)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}return r.prototype.getValueIdentifier=function(){return this.valueIdentifier},r.prototype.getName=function(){return this.name},r.prototype.getValue=function(){return this.values[0]},r.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Z("incorect value");var t=r.VALUES_TO_ECI.get(e);if(t===void 0)throw new Z("incorect value");return t},r.getCharacterSetECIByName=function(e){var t=r.NAME_TO_ECI.get(e);if(t===void 0)throw new Z("incorect value");return t},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.getName()===t.getName()},r.VALUE_IDENTIFIER_TO_ECI=new Map,r.VALUES_TO_ECI=new Map,r.NAME_TO_ECI=new Map,r.Cp437=new r(qe.Cp437,Int32Array.from([0,2]),"Cp437"),r.ISO8859_1=new r(qe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),r.ISO8859_2=new r(qe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),r.ISO8859_3=new r(qe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),r.ISO8859_4=new r(qe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),r.ISO8859_5=new r(qe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),r.ISO8859_6=new r(qe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),r.ISO8859_7=new r(qe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),r.ISO8859_8=new r(qe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),r.ISO8859_9=new r(qe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),r.ISO8859_10=new r(qe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),r.ISO8859_11=new r(qe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),r.ISO8859_13=new r(qe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),r.ISO8859_14=new r(qe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),r.ISO8859_15=new r(qe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),r.ISO8859_16=new r(qe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),r.SJIS=new r(qe.SJIS,20,"SJIS","Shift_JIS"),r.Cp1250=new r(qe.Cp1250,21,"Cp1250","windows-1250"),r.Cp1251=new r(qe.Cp1251,22,"Cp1251","windows-1251"),r.Cp1252=new r(qe.Cp1252,23,"Cp1252","windows-1252"),r.Cp1256=new r(qe.Cp1256,24,"Cp1256","windows-1256"),r.UnicodeBigUnmarked=new r(qe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),r.UTF8=new r(qe.UTF8,26,"UTF8","UTF-8"),r.ASCII=new r(qe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),r.Big5=new r(qe.Big5,28,"Big5"),r.GB18030=new r(qe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),r.EUC_KR=new r(qe.EUC_KR,30,"EUC_KR","EUC-KR"),r})(),RP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),jc=(function(r){RP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e})(Rr),Kr=(function(){function r(){}return r.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},r.shouldDecodeOnFallback=function(e){return!r.isBrowser()&&e==="ISO-8859-1"},r.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},r.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},r.encodingName=function(e){return typeof e=="string"?e:e.getName()},r.encodingCharacterSet=function(e){return e instanceof Rt?e:Rt.getCharacterSetECIByName(e)},r.decodeFallback=function(e,t){var n=this.encodingCharacterSet(t);if(r.isDecodeFallbackSupported(n)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(n.equals(Rt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new jc("Encoding "+this.encodingName(t)+" not supported by fallback.")},r.isDecodeFallbackSupported=function(e){return e.equals(Rt.UTF8)||e.equals(Rt.ISO8859_1)||e.equals(Rt.ASCII)},r.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),n=t.split(""),i=[],o=0;o<n.length;o++)i.push(n[o].charCodeAt(0));return new Uint8Array(i)},r})(),Ne=(function(){function r(){}return r.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var n=t?t.getName():this.ISO88591;return Kr.decode(new Uint8Array([e]),n)},r.guessEncoding=function(e,t){if(t!=null&&t.get(tt.CHARACTER_SET)!==void 0)return t.get(tt.CHARACTER_SET).toString();for(var n=e.length,i=!0,o=!0,s=!0,a=0,c=0,u=0,l=0,h=0,d=0,p=0,v=0,y=0,w=0,_=0,x=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,T=0;T<n&&(i||o||s);T++){var D=e[T]&255;s&&(a>0?(D&128)===0?s=!1:a--:(D&128)!==0&&((D&64)===0?s=!1:(a++,(D&32)===0?c++:(a++,(D&16)===0?u++:(a++,(D&8)===0?l++:s=!1))))),i&&(D>127&&D<160?i=!1:D>159&&(D<192||D===215||D===247)&&_++),o&&(h>0?D<64||D===127||D>252?o=!1:h--:D===128||D===160||D>239?o=!1:D>160&&D<224?(d++,v=0,p++,p>y&&(y=p)):D>127?(h++,p=0,v++,v>w&&(w=v)):(p=0,v=0))}return s&&a>0&&(s=!1),o&&h>0&&(o=!1),s&&(x||c+u+l>0)?r.UTF8:o&&(r.ASSUME_SHIFT_JIS||y>=3||w>=3)?r.SHIFT_JIS:i&&o?y===2&&d===2||_*10>=n?r.SHIFT_JIS:r.ISO88591:i?r.ISO88591:o?r.SHIFT_JIS:s?r.UTF8:r.PLATFORM_DEFAULT_ENCODING},r.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=-1;function o(a,c,u,l,h,d){if(a==="%%")return"%";if(t[++i]!==void 0){a=l?parseInt(l.substr(1)):void 0;var p=h?parseInt(h.substr(1)):void 0,v;switch(d){case"s":v=t[i];break;case"c":v=t[i][0];break;case"f":v=parseFloat(t[i]).toFixed(a);break;case"p":v=parseFloat(t[i]).toPrecision(a);break;case"e":v=parseFloat(t[i]).toExponential(a);break;case"x":v=parseInt(t[i]).toString(p||16);break;case"d":v=parseFloat(parseInt(t[i],p||10).toPrecision(a)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(p);for(var y=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";v.length<y;)v=c!==void 0?v+w:w+v;return v}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},r.getBytes=function(e,t){return Kr.encode(e,t)},r.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},r.getCharAt=function(e){return String.fromCharCode(e)},r.SHIFT_JIS=Rt.SJIS.getName(),r.GB2312="GB2312",r.ISO88591=Rt.ISO8859_1.getName(),r.EUC_JP="EUC_JP",r.UTF8=Rt.UTF8.getName(),r.PLATFORM_DEFAULT_ENCODING=r.UTF8,r.ASSUME_SHIFT_JIS=!1,r})(),Ce=(function(){function r(e){e===void 0&&(e=""),this.value=e}return r.prototype.enableDecoding=function(e){return this.encoding=e,this},r.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=Ne.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},r.prototype.appendChars=function(e,t,n){for(var i=t;t<t+n;i++)this.append(e[i]);return this},r.prototype.length=function(){return this.value.length},r.prototype.charAt=function(e){return this.value.charAt(e)},r.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},r.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},r.prototype.substring=function(e,t){return this.value.substring(e,t)},r.prototype.setLengthToZero=function(){this.value=""},r.prototype.toString=function(){return this.value},r.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},r})(),On=(function(){function r(e,t,n,i){if(this.width=e,this.height=t,this.rowSize=n,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new fe("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return r.parseFromBooleanArray=function(e){for(var t=e.length,n=e[0].length,i=new r(n,t),o=0;o<t;o++)for(var s=e[o],a=0;a<n;a++)s[a]&&i.set(a,o);return i},r.parseFromString=function(e,t,n){if(e===null)throw new fe("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new fe("row lengths do not match");s=o,c++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[o]=!0,o++;else if(e.substring(u,u+n.length)===n)u+=n.length,i[o]=!1,o++;else throw new fe("illegal character encountered: "+e.substring(u));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new fe("row lengths do not match");c++}for(var l=new r(a,c),h=0;h<o;h++)i[h]&&l.set(Math.floor(h%a),Math.floor(h/a));return l},r.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},r.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},r.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},r.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},r.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new fe("input matrix dimensions do not match");for(var t=new Ft(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*n,c=e.getRow(o,t).getBitArray(),u=0;u<n;u++)i[a+u]^=c[u]},r.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},r.prototype.setRegion=function(e,t,n,i){if(t<0||e<0)throw new fe("Left and top must be nonnegative");if(i<1||n<1)throw new fe("Height and width must be at least 1");var o=e+n,s=t+i;if(s>this.height||o>this.width)throw new fe("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,u=t;u<s;u++)for(var l=u*a,h=e;h<o;h++)c[l+Math.floor(h/32)]|=1<<(h&31)&4294967295},r.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Ft(this.width):t.clear();for(var n=this.rowSize,i=this.bits,o=e*n,s=0;s<n;s++)t.setBulk(s*32,i[o+s]);return t},r.prototype.setRow=function(e,t){et.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},r.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new Ft(e),i=new Ft(e),o=0,s=Math.floor((t+1)/2);o<s;o++)n=this.getRow(o,n),i=this.getRow(t-1-o,i),n.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,n)},r.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,i=this.bits,o=e,s=t,a=-1,c=-1,u=0;u<t;u++)for(var l=0;l<n;l++){var h=i[u*n+l];if(h!==0){if(u<s&&(s=u),u>c&&(c=u),l*32<o){for(var d=0;(h<<31-d&4294967295)===0;)d++;l*32+d<o&&(o=l*32+d)}if(l*32+31>a){for(var d=31;!(h>>>d);)d--;l*32+d>a&&(a=l*32+d)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},r.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;for(var i=n/e,o=n%e*32,s=t[n],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},r.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&t[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),o=Math.floor(n%e)*32,s=t[n],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.getRowSize=function(){return this.rowSize},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Ot.equals(this.bits,t.bits)},r.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ot.hashCode(this.bits),e},r.prototype.toString=function(e,t,n){return e===void 0&&(e="X "),t===void 0&&(t="  "),n===void 0&&(n=`
`),this.buildToString(e,t,n)},r.prototype.buildToString=function(e,t,n){for(var i=new Ce,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:t);i.append(n)}return i.toString()},r.prototype.clone=function(){return new r(this.width,this.height,this.rowSize,this.bits.slice())},r})(),PP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),$=(function(r){PP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e})(Rr),OP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),DP=(function(r){OP(e,r);function e(t){var n=r.call(this,t)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(t,n){var i=this.getLuminanceSource(),o=i.getWidth();n==null||n.getSize()<o?n=new Ft(o):n.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<u&&n.set(c);else for(var l=s[0]&255,h=s[1]&255,c=1;c<o-1;c++){var d=s[c+1]&255;(h*4-l-d)/2<u&&n.set(c),l=h,h=d}return n},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight(),o=new On(n,i);this.initArrays(n);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),u=t.getRow(c,this.luminances),l=Math.floor(n*4/5),h=Math.floor(n/5);h<l;h++){var d=u[h]&255;s[d>>e.LUMINANCE_SHIFT]++}for(var p=e.estimateBlackPoint(s),v=t.getMatrix(),a=0;a<i;a++)for(var y=a*n,h=0;h<n;h++){var d=v[y+h]&255;d<p&&o.set(h,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(t){for(var n=t.length,i=0,o=0,s=0,a=0;a<n;a++)t[a]>s&&(o=a,s=t[a]),t[a]>i&&(i=t[a]);for(var c=0,u=0,a=0;a<n;a++){var l=a-o,h=t[a]*l*l;h>u&&(c=a,u=h)}if(o>c){var d=o;o=c,c=d}if(c-o<=n/16)throw new $;for(var p=c-1,v=-1,a=c-1;a>o;a--){var y=a-o,h=y*y*(c-a)*(i-t[a]);h>v&&(p=a,v=h)}return p<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e})(AP),NP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ww=(function(r){NP(e,r);function e(t){var n=r.call(this,t)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),n=t.getWidth(),i=t.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,n,i),u=new On(n,i);e.calculateThresholdForBlock(o,s,a,n,i,c,u),this.matrix=u}else this.matrix=r.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,n,i,o,s,a,c){for(var u=s-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,h=0;h<i;h++){var d=h<<e.BLOCK_SIZE_POWER;d>u&&(d=u);for(var p=e.cap(h,2,i-3),v=0;v<n;v++){var y=v<<e.BLOCK_SIZE_POWER;y>l&&(y=l);for(var w=e.cap(v,2,n-3),_=0,x=-2;x<=2;x++){var T=a[p+x];_+=T[w-2]+T[w-1]+T[w]+T[w+1]+T[w+2]}var D=_/25;e.thresholdBlock(t,y,d,D,o,c)}}},e.cap=function(t,n,i){return t<n?n:t>i?i:t},e.thresholdBlock=function(t,n,i,o,s,a){for(var c=0,u=i*s+n;c<e.BLOCK_SIZE;c++,u+=s)for(var l=0;l<e.BLOCK_SIZE;l++)(t[u+l]&255)<=o&&a.set(n+l,i+c)},e.calculateBlackPoints=function(t,n,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,u=new Array(i),l=0;l<i;l++){u[l]=new Int32Array(n);var h=l<<e.BLOCK_SIZE_POWER;h>a&&(h=a);for(var d=0;d<n;d++){var p=d<<e.BLOCK_SIZE_POWER;p>c&&(p=c);for(var v=0,y=255,w=0,_=0,x=h*o+p;_<e.BLOCK_SIZE;_++,x+=o){for(var T=0;T<e.BLOCK_SIZE;T++){var D=t[x+T]&255;v+=D,D<y&&(y=D),D>w&&(w=D)}if(w-y>e.MIN_DYNAMIC_RANGE)for(_++,x+=o;_<e.BLOCK_SIZE;_++,x+=o)for(var T=0;T<e.BLOCK_SIZE;T++)v+=t[x+T]&255}var F=v>>e.BLOCK_SIZE_POWER*2;if(w-y<=e.MIN_DYNAMIC_RANGE&&(F=y/2,l>0&&d>0)){var H=(u[l-1][d]+2*u[l][d-1]+u[l-1][d-1])/4;y<H&&(F=H)}u[l][d]=F}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e})(DP),Xa=(function(){function r(e,t){this.width=e,this.height=t}return r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.isCropSupported=function(){return!1},r.prototype.crop=function(e,t,n,i){throw new jc("This luminance source does not support cropping.")},r.prototype.isRotateSupported=function(){return!1},r.prototype.rotateCounterClockwise=function(){throw new jc("This luminance source does not support rotation by 90 degrees.")},r.prototype.rotateCounterClockwise45=function(){throw new jc("This luminance source does not support rotation by 45 degrees.")},r.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new Ce,n=0;n<this.height;n++){for(var i=this.getRow(n,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},r})(),MP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),xl=(function(r){MP(e,r);function e(t){var n=r.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return e.prototype.getRow=function(t,n){for(var i=this.delegate.getRow(t,n),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),o=0;o<n;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,n,i,o){return new e(this.delegate.crop(t,n,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e})(Xa),kP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),LP=(function(r){kP(e,r);function e(t,n){n===void 0&&(n=!1);var i=r.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,n),i}return e.makeBufferFromCanvasImageData=function(t,n){n===void 0&&(n=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,n)},e.toGrayscaleBuffer=function(t,n,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,c=0,u=t.length;a<u;a+=4,c++){var l=void 0,h=t[a+3];if(h===0)l=255;else{var d=t[a],p=t[a+1],v=t[a+2];l=306*d+601*p+117*v+512>>10}s[c]=l}else for(var a=0,c=0,y=t.length;a<y;a+=4,c++){var l=void 0,h=t[a+3];if(h===0)l=255;else{var d=t[a],p=t[a+1],v=t[a+2];l=306*d+601*p+117*v+512>>10}s[c]=255-l}return s},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return r.prototype.crop.call(this,t,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement(),i=n.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return n.width=c,n.height=u,i.translate(c/2,u/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new xl(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e})(Xa),BP=(function(){function r(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return r.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},r})(),hr=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(h){s(h)}}function c(l){try{u(n.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(r,e||[])).next())})},dr=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},FP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Es=(function(){function r(e,t,n){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(r.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),r.prototype.listVideoInputDevices=function(){return hr(this,void 0,void 0,function(){var e,t,n,i,o,s,a,c,u,l,h,d;return dr(this,function(p){switch(p.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(n=FP(e),i=n.next();!i.done;i=n.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(v){h={error:v}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,t]}})})},r.prototype.getVideoInputDevices=function(){return hr(this,void 0,void 0,function(){var e;return dr(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(n){return new BP(n.deviceId,n.label)})]}})})},r.prototype.findDeviceById=function(e){return hr(this,void 0,void 0,function(){var t;return dr(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},r.prototype.decodeFromInputVideoDevice=function(e,t){return hr(this,void 0,void 0,function(){return dr(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return hr(this,void 0,void 0,function(){var n,i;return dr(this,function(o){switch(o.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return hr(this,void 0,void 0,function(){var n;return dr(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return hr(this,void 0,void 0,function(){var n,i;return dr(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=o.sent(),[4,this.decodeOnce(n)];case 2:return i=o.sent(),[2,i]}})})},r.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return hr(this,void 0,void 0,function(){return dr(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,i.sent()]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return hr(this,void 0,void 0,function(){var i,o;return dr(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,n)];case 1:return[2,s.sent()]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return hr(this,void 0,void 0,function(){var i;return dr(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,n)];case 2:return[2,o.sent()]}})})},r.prototype.decodeFromStream=function(e,t,n){return hr(this,void 0,void 0,function(){var i;return dr(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,o.sent()]}})})},r.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},r.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},r.prototype.attachStreamToVideo=function(e,t){return hr(this,void 0,void 0,function(){var n;return dr(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},r.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(n,i){return t.playVideoOnLoad(e,function(){return n()})})},r.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},r.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},r.prototype.tryPlayVideo=function(e){return hr(this,void 0,void 0,function(){return dr(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},r.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new yt("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new yt("element with id '"+e+"' must be an "+t+" element");return n},r.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new yt("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},r.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new yt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},r.prototype.decodeFromVideoContinuously=function(e,t,n){if(e===void 0&&t===void 0)throw new yt("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},r.prototype.decodeFromImageElement=function(e){if(!e)throw new yt("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n},r.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},r.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},r.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new yt("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},r.prototype.decodeFromImageUrl=function(e){if(!e)throw new yt("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},r.prototype.decodeFromVideoUrl=function(e){if(!e)throw new yt("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},r.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new yt("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,t);return n.src=e,i},r.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(n,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",t.imageLoadedListener)})},r.prototype._decodeOnLoadVideo=function(e){return hr(this,void 0,void 0,function(){return dr(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},r.prototype._decodeOnLoadVideoContinuously=function(e,t){return hr(this,void 0,void 0,function(){return dr(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}})})},r.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},r.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.prototype.decodeOnce=function(e,t,n){var i=this;t===void 0&&(t=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new $("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(d){var u=t&&d instanceof $,l=d instanceof Et||d instanceof Z,h=l&&n;if(u||h)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(d)}};return new Promise(function(s,a){return o(s,a)})},r.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var o=n.decode(e);t(o,null),setTimeout(i,n.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof Et||c instanceof Z,a=c instanceof $;(s||a)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},r.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},r.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),i=new LP(n,t),o=new Ww(i);return new Gw(o)},r.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),n=void 0;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},r.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},r.prototype.drawFrameOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.drawImageOnCanvas=function(e,t,n){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},r.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=i+"px",t.width=n,t.height=i,t},r.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},r.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},r.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},r.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},r.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},r.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},r.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},r})(),lr=(function(){function r(e,t,n,i,o,s){n===void 0&&(n=t==null?0:8*t.length),s===void 0&&(s=et.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=et.currentTimeMillis():this.timestamp=s}return r.prototype.getText=function(){return this.text},r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.getBarcodeFormat=function(){return this.format},r.prototype.getResultMetadata=function(){return this.resultMetadata},r.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},r.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},r.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(t.length+e.length);et.arraycopy(t,0,n,0,t.length),et.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.toString=function(){return this.text},r})(),dh;(function(r){r[r.AZTEC=0]="AZTEC",r[r.CODABAR=1]="CODABAR",r[r.CODE_39=2]="CODE_39",r[r.CODE_93=3]="CODE_93",r[r.CODE_128=4]="CODE_128",r[r.DATA_MATRIX=5]="DATA_MATRIX",r[r.EAN_8=6]="EAN_8",r[r.EAN_13=7]="EAN_13",r[r.ITF=8]="ITF",r[r.MAXICODE=9]="MAXICODE",r[r.PDF_417=10]="PDF_417",r[r.QR_CODE=11]="QR_CODE",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(dh||(dh={}));const le=dh;var ph;(function(r){r[r.OTHER=0]="OTHER",r[r.ORIENTATION=1]="ORIENTATION",r[r.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",r[r.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",r[r.ISSUE_NUMBER=4]="ISSUE_NUMBER",r[r.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",r[r.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",r[r.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",r[r.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",r[r.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",r[r.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ph||(ph={}));const Kt=ph;var El=(function(){function r(e,t,n,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return r.prototype.getRawBytes=function(){return this.rawBytes},r.prototype.getNumBits=function(){return this.numBits},r.prototype.setNumBits=function(e){this.numBits=e},r.prototype.getText=function(){return this.text},r.prototype.getByteSegments=function(){return this.byteSegments},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getErrorsCorrected=function(){return this.errorsCorrected},r.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},r.prototype.getErasures=function(){return this.erasures},r.prototype.setErasures=function(e){this.erasures=e},r.prototype.getOther=function(){return this.other},r.prototype.setOther=function(e){this.other=e},r.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},r.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},r.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},r})(),qs=(function(){function r(){}return r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new fe;return this.logTable[e]},r.addOrSubtract=function(e,t){return e^t},r})(),Ci=(function(){function r(e,t){if(t.length===0)throw new fe;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),et.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,n;if(e===1){n=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];n=qs.addOrSubtract(n,s)}return n}n=t[0];for(var a=t.length,c=this.field,i=1;i<a;i++)n=qs.addOrSubtract(c.multiply(e,n),t[i]);return n},r.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new fe("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),s=n.length-t.length;et.arraycopy(n,0,o,0,s);for(var a=s;a<n.length;a++)o[a]=qs.addOrSubtract(t[a-s],n[a]);return new r(this.field,o)},r.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new fe("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,s=new Int32Array(n+o-1),a=this.field,c=0;c<n;c++)for(var u=t[c],l=0;l<o;l++)s[c+l]=qs.addOrSubtract(s[c+l],a.multiply(u,i[l]));return new r(a,s)},r.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,n=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=n.multiply(o[s],e);return new r(n,i)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new fe;if(t===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(n[a],t);return new r(s,o)},r.prototype.divide=function(e){if(!this.field.equals(e.field))throw new fe("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new fe("Divide by 0");for(var t=this.field,n=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(a,c),l=t.buildMonomial(a,c);n=n.addOrSubtract(l),i=i.addOrSubtract(u)}return[n,i]},r.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},r})(),VP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zw=(function(r){VP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ArithmeticException",e})(Rr),UP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Cr=(function(r){UP(e,r);function e(t,n,i){var o=r.call(this)||this;o.primitive=t,o.size=n,o.generatorBase=i;for(var s=new Int32Array(n),a=1,c=0;c<n;c++)s[c]=a,a*=2,a>=n&&(a^=t,a&=n-1);o.expTable=s;for(var u=new Int32Array(n),c=0;c<n-1;c++)u[s[c]]=c;return o.logTable=u,o.zero=new Ci(o,Int32Array.from([0])),o.one=new Ci(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new fe;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new Ci(this,i)},e.prototype.inverse=function(t){if(t===0)throw new zw;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,n){return t===0||n===0?0:this.expTable[(this.logTable[t]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+Te.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e})(qs),HP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ac=(function(r){HP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReedSolomonException",e})(Rr),$P=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ka=(function(r){$P(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="IllegalStateException",e})(Rr),Al=(function(){function r(e){this.field=e}return r.prototype.decode=function(e,t){for(var n=this.field,i=new Ci(n,e),o=new Int32Array(t),s=!0,a=0;a<t;a++){var c=i.evaluateAt(n.exp(a+n.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var u=new Ci(n,o),l=this.runEuclideanAlgorithm(n.buildMonomial(t,1),u,t),h=l[0],d=l[1],p=this.findErrorLocations(h),v=this.findErrorMagnitudes(d,p),a=0;a<p.length;a++){var y=e.length-1-n.log(p[a]);if(y<0)throw new Ac("Bad error location");e[y]=Cr.addOrSubtract(e[y],v[a])}},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,a=t,c=o.getZero(),u=o.getOne();a.getDegree()>=(n/2|0);){var l=s,h=c;if(s=a,c=u,s.isZero())throw new Ac("r_{i-1} was zero");a=l;for(var d=o.getZero(),p=s.getCoefficient(s.getDegree()),v=o.inverse(p);a.getDegree()>=s.getDegree()&&!a.isZero();){var y=a.getDegree()-s.getDegree(),w=o.multiply(a.getCoefficient(a.getDegree()),v);d=d.addOrSubtract(o.buildMonomial(y,w)),a=a.addOrSubtract(s.multiplyByMonomial(y,w))}if(u=d.multiply(c).addOrSubtract(h),a.getDegree()>=s.getDegree())throw new Ka("Division algorithm failed to reduce polynomial?")}var _=u.getCoefficient(0);if(_===0)throw new Ac("sigmaTilde(0) was zero");var x=o.inverse(_),T=u.multiplyScalar(x),D=a.multiplyScalar(x);return[T,D]},r.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(n[i]=o.inverse(s),i++);if(i!==t)throw new Ac("Error locator degree does not match number of roots");return n},r.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,i=new Int32Array(n),o=this.field,s=0;s<n;s++){for(var a=o.inverse(t[s]),c=1,u=0;u<n;u++)if(s!==u){var l=o.multiply(t[u],a),h=(l&1)===0?l|1:l&-2;c=o.multiply(c,h)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},r})(),Gt;(function(r){r[r.UPPER=0]="UPPER",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.DIGIT=3]="DIGIT",r[r.PUNCT=4]="PUNCT",r[r.BINARY=5]="BINARY"})(Gt||(Gt={}));var Eg=(function(){function r(){}return r.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),n=this.extractBits(t),i=this.correctBits(n),o=r.convertBoolArrayToByteArray(i),s=r.getEncodedData(i),a=new El(o,s,null,null);return a.setNumBits(i.length),a},r.highLevelDecode=function(e){return this.getEncodedData(e)},r.getEncodedData=function(e){for(var t=e.length,n=Gt.UPPER,i=Gt.UPPER,o="",s=0;s<t;)if(i===Gt.BINARY){if(t-s<5)break;var a=r.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=r.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(t-s<8){s=t;break}var u=r.readCode(e,s,8);o+=Ne.castAsNonUtf8Char(u),s+=8}i=n}else{var l=i===Gt.DIGIT?4:5;if(t-s<l)break;var u=r.readCode(e,s,l);s+=l;var h=r.getCharacter(i,u);h.startsWith("CTRL_")?(n=i,i=r.getTable(h.charAt(5)),h.charAt(6)==="L"&&(n=i)):(o+=h,i=n)}return o},r.getTable=function(e){switch(e){case"L":return Gt.LOWER;case"P":return Gt.PUNCT;case"M":return Gt.MIXED;case"D":return Gt.DIGIT;case"B":return Gt.BINARY;case"U":default:return Gt.UPPER}},r.getCharacter=function(e,t){switch(e){case Gt.UPPER:return r.UPPER_TABLE[t];case Gt.LOWER:return r.LOWER_TABLE[t];case Gt.MIXED:return r.MIXED_TABLE[t];case Gt.PUNCT:return r.PUNCT_TABLE[t];case Gt.DIGIT:return r.DIGIT_TABLE[t];default:throw new Ka("Bad table")}},r.prototype.correctBits=function(e){var t,n;this.ddata.getNbLayers()<=2?(n=6,t=Cr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=Cr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=Cr.AZTEC_DATA_10):(n=12,t=Cr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/n;if(o<i)throw new Z;for(var s=e.length%n,a=new Int32Array(o),c=0;c<o;c++,s+=n)a[c]=r.readCode(e,s,n);try{var u=new Al(t);u.decode(a,o-i)}catch(w){throw new Z(w)}for(var l=(1<<n)-1,h=0,c=0;c<i;c++){var d=a[c];if(d===0||d===l)throw new Z;(d===1||d===l-1)&&h++}for(var p=new Array(i*n-h),v=0,c=0;c<i;c++){var d=a[c];if(d===1||d===l-1)p.fill(d>1,v,v+n-1),v+=n-1;else for(var y=n-1;y>=0;--y)p[v++]=(d&1<<y)!==0}return p},r.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(t?11:14)+n*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(n,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*Te.truncDivision(Te.truncDivision(i,2)-1,15),u=i/2,l=Te.truncDivision(c,2),a=0;a<u;a++){var h=a+Te.truncDivision(a,15);o[u-a-1]=l-h-1,o[u+a]=l+h+1}for(var a=0,d=0;a<n;a++){for(var p=(n-a)*4+(t?9:12),v=a*2,y=i-1-v,w=0;w<p;w++)for(var _=w*2,x=0;x<2;x++)s[d+_+x]=e.get(o[v+x],o[v+w]),s[d+2*p+_+x]=e.get(o[v+w],o[y-x]),s[d+4*p+_+x]=e.get(o[y-x],o[y-w]),s[d+6*p+_+x]=e.get(o[y-w],o[v+x]);d+=p*8}return s},r.readCode=function(e,t,n){for(var i=0,o=t;o<t+n;o++)i<<=1,e[o]&&(i|=1);return i},r.readByte=function(e,t){var n=e.length-t;return n>=8?r.readCode(e,t,8):r.readCode(e,t,n)<<8-n},r.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),n=0;n<t.length;n++)t[n]=r.readByte(e,8*n);return t},r.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],r.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],r.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],r.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],r.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],r})(),Be=(function(){function r(){}return r.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},r.distance=function(e,t,n,i){var o=e-n,s=t-i;return Math.sqrt(o*o+s*s)},r.sum=function(e){for(var t=0,n=0,i=e.length;n!==i;n++){var o=e[n];t+=o}return t},r})(),gh=(function(){function r(){}return r.floatToIntBits=function(e){return e},r.MAX_VALUE=Number.MAX_SAFE_INTEGER,r})(),ae=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r.prototype.equals=function(e){if(e instanceof r){var t=e;return this.x===t.x&&this.y===t.y}return!1},r.prototype.hashCode=function(){return 31*gh.floatToIntBits(this.x)+gh.floatToIntBits(this.y)},r.prototype.toString=function(){return"("+this.x+","+this.y+")"},r.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(n>=t&&n>=i?(s=e[0],o=e[1],a=e[2]):i>=n&&i>=t?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},r.distance=function(e,t){return Be.distance(e.x,e.y,t.x,t.y)},r.crossProductZ=function(e,t,n){var i=t.x,o=t.y;return(n.x-i)*(e.y-o)-(n.y-o)*(e.x-i)},r})(),Kd=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),jP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),GP=(function(r){jP(e,r);function e(t,n,i,o,s){var a=r.call(this,t,n)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e})(Kd),vh=(function(){function r(e,t,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=r.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=n-o,this.rightInit=n+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}return r.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,u=!1,l=!1,h=!1,d=this.width,p=this.height;s;){s=!1;for(var v=!0;(v||!c)&&t<d;)v=this.containsBlackPoint(n,i,t,!1),v?(t++,s=!0,c=!0):c||t++;if(t>=d){o=!0;break}for(var y=!0;(y||!u)&&i<p;)y=this.containsBlackPoint(e,t,i,!0),y?(i++,s=!0,u=!0):u||i++;if(i>=p){o=!0;break}for(var w=!0;(w||!l)&&e>=0;)w=this.containsBlackPoint(n,i,e,!1),w?(e--,s=!0,l=!0):l||e--;if(e<0){o=!0;break}for(var _=!0;(_||!h)&&n>=0;)_=this.containsBlackPoint(e,t,n,!0),_?(n--,s=!0,h=!0):h||n--;if(n<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var x=t-e,T=null,D=1;T===null&&D<x;D++)T=this.getBlackPointOnSegment(e,i-D,e+D,i);if(T==null)throw new $;for(var F=null,D=1;F===null&&D<x;D++)F=this.getBlackPointOnSegment(e,n+D,e+D,n);if(F==null)throw new $;for(var H=null,D=1;H===null&&D<x;D++)H=this.getBlackPointOnSegment(t,n+D,t-D,n);if(H==null)throw new $;for(var C=null,D=1;C===null&&D<x;D++)C=this.getBlackPointOnSegment(t,i-D,t-D,i);if(C==null)throw new $;return this.centerEdges(C,T,H,F)}else throw new $},r.prototype.getBlackPointOnSegment=function(e,t,n,i){for(var o=Be.round(Be.distance(e,t,n,i)),s=(n-e)/o,a=(i-t)/o,c=this.image,u=0;u<o;u++){var l=Be.round(e+u*s),h=Be.round(t+u*a);if(c.get(l,h))return new ae(l,h)}return null},r.prototype.centerEdges=function(e,t,n,i){var o=e.getX(),s=e.getY(),a=t.getX(),c=t.getY(),u=n.getX(),l=n.getY(),h=i.getX(),d=i.getY(),p=r.CORR;return o<this.width/2?[new ae(h-p,d+p),new ae(a+p,c+p),new ae(u-p,l-p),new ae(o+p,s-p)]:[new ae(h+p,d+p),new ae(a+p,c-p),new ae(u-p,l+p),new ae(o-p,s-p)]},r.prototype.containsBlackPoint=function(e,t,n,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,n))return!0}else for(var a=e;a<=t;a++)if(o.get(n,a))return!0;return!1},r.INIT_SIZE=10,r.CORR=1,r})(),Ag=(function(){function r(){}return r.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>n||c<-1||c>i)throw new $;o=!1,a===-1?(t[s]=0,o=!0):a===n&&(t[s]=n-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>n||c<-1||c>i)throw new $;o=!1,a===-1?(t[s]=0,o=!0):a===n&&(t[s]=n-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},r})(),qw=(function(){function r(e,t,n,i,o,s,a,c,u){this.a11=e,this.a21=t,this.a31=n,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=u}return r.quadrilateralToQuadrilateral=function(e,t,n,i,o,s,a,c,u,l,h,d,p,v,y,w){var _=r.quadrilateralToSquare(e,t,n,i,o,s,a,c),x=r.squareToQuadrilateral(u,l,h,d,p,v,y,w);return x.times(_)},r.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,h=this.a33,d=0;d<t;d+=2){var p=e[d],v=e[d+1],y=o*p+c*v+h;e[d]=(n*p+s*v+u)/y,e[d+1]=(i*p+a*v+l)/y}},r.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,h=this.a33,d=e.length,p=0;p<d;p++){var v=e[p],y=t[p],w=o*v+c*y+h;e[p]=(n*v+s*y+u)/w,t[p]=(i*v+a*y+l)/w}},r.squareToQuadrilateral=function(e,t,n,i,o,s,a,c){var u=e-n+o-a,l=t-i+s-c;if(u===0&&l===0)return new r(n-e,o-n,e,i-t,s-i,t,0,0,1);var h=n-o,d=a-o,p=i-s,v=c-s,y=h*v-d*p,w=(u*v-d*l)/y,_=(h*l-u*p)/y;return new r(n-e+w*n,a-e+_*a,e,i-t+w*i,c-t+_*c,t,w,_,1)},r.quadrilateralToSquare=function(e,t,n,i,o,s,a,c){return r.squareToQuadrilateral(e,t,n,i,o,s,a,c).buildAdjoint()},r.prototype.buildAdjoint=function(){return new r(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},r.prototype.times=function(e){return new r(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},r})(),WP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zP=(function(r){WP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,n,i,o,s,a,c,u,l,h,d,p,v,y,w,_,x,T,D){var F=qw.quadrilateralToQuadrilateral(o,s,a,c,u,l,h,d,p,v,y,w,_,x,T,D);return this.sampleGridWithTransform(t,n,i,F)},e.prototype.sampleGridWithTransform=function(t,n,i,o){if(n<=0||i<=0)throw new $;for(var s=new On(n,i),a=new Float32Array(2*n),c=0;c<i;c++){for(var u=a.length,l=c+.5,h=0;h<u;h+=2)a[h]=h/2+.5,a[h+1]=l;o.transformPoints(a),Ag.checkAndNudgePoints(t,a);try{for(var h=0;h<u;h+=2)t.get(Math.floor(a[h]),Math.floor(a[h+1]))&&s.set(h/2,c)}catch{throw new $}}return s},e})(Ag),Yd=(function(){function r(){}return r.setGridSampler=function(e){r.gridSampler=e},r.getInstance=function(){return r.gridSampler},r.gridSampler=new zP,r})(),xr=(function(){function r(e,t){this.x=e,this.y=t}return r.prototype.toResultPoint=function(){return new ae(this.getX(),this.getY())},r.prototype.getX=function(){return this.x},r.prototype.getY=function(){return this.y},r})(),qP=(function(){function r(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return r.prototype.detect=function(){return this.detectMirror(!1)},r.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),s=this.getMatrixCornerPoints(n);return new GP(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},r.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new $;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var i=0,o=0;o<4;o++){var s=n[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},r.prototype.getRotation=function(e,t){var n=0;e.forEach(function(o,s,a){var c=(o>>t-2<<1)+(o&1);n=(n<<3)+c}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(Te.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new $},r.prototype.getCorrectedParameterData=function(e,t){var n,i;t?(n=7,i=2):(n=10,i=4);for(var o=n-i,s=new Int32Array(n),a=n-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new Al(Cr.AZTEC_PARAM);c.decode(s,o)}catch{throw new $}for(var u=0,a=0;a<i;a++)u=(u<<4)+s[a];return u},r.prototype.getBullsEyeCorners=function(e){var t=e,n=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(n,s,1,1),u=this.getFirstDifferent(i,s,-1,1),l=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var h=this.distancePoint(l,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(h<.75||h>1.25||!this.isWhiteOrBlackRectangle(a,c,u,l))break}t=a,n=c,i=u,o=l,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;var d=new ae(t.getX()+.5,t.getY()-.5),p=new ae(n.getX()+.5,n.getY()+.5),v=new ae(i.getX()-.5,i.getY()+.5),y=new ae(o.getX()-.5,o.getY()-.5);return this.expandSquare([d,p,v,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},r.prototype.getMatrixCenter=function(){var e,t,n,i;try{var o=new vh(this.image).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new xr(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new xr(s+7,a+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new xr(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new xr(s-7,a-7),!1,-1,-1).toResultPoint()}var c=Be.round((e.getX()+i.getX()+t.getX()+n.getX())/4),u=Be.round((e.getY()+i.getY()+t.getY()+n.getY())/4);try{var o=new vh(this.image,15,c,u).detect();e=o[0],t=o[1],n=o[2],i=o[3]}catch{e=this.getFirstDifferent(new xr(c+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new xr(c+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new xr(c-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new xr(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Be.round((e.getX()+i.getX()+t.getX()+n.getX())/4),u=Be.round((e.getY()+i.getY()+t.getY()+n.getY())/4),new xr(c,u)},r.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},r.prototype.sampleGrid=function(e,t,n,i,o){var s=Yd.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,u,c,u,u,c,u,t.getX(),t.getY(),n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY())},r.prototype.sampleLine=function(e,t,n){for(var i=0,o=this.distanceResultPoint(e,t),s=o/n,a=e.getX(),c=e.getY(),u=s*(t.getX()-e.getX())/o,l=s*(t.getY()-e.getY())/o,h=0;h<n;h++)this.image.get(Be.round(a+h*u),Be.round(c+h*l))&&(i|=1<<n-h-1);return i},r.prototype.isWhiteOrBlackRectangle=function(e,t,n,i){var o=3;e=new xr(e.getX()-o,e.getY()+o),t=new xr(t.getX()-o,t.getY()-o),n=new xr(n.getX()+o,n.getY()-o),i=new xr(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,t);return a!==s||(a=this.getColor(t,n),a!==s)?!1:(a=this.getColor(n,i),a===s)},r.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),i=(t.getX()-e.getX())/n,o=(t.getY()-e.getY())/n,s=0,a=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),l=Math.ceil(n),h=0;h<l;h++)a+=i,c+=o,this.image.get(Be.round(a),Be.round(c))!==u&&s++;var d=s/n;return d>.1&&d<.9?0:d<=.1===u?1:-1},r.prototype.getFirstDifferent=function(e,t,n,i){for(var o=e.getX()+n,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=n,s+=i;for(o-=n,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=n;for(o-=n;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new xr(o,s)},r.prototype.expandSquare=function(e,t,n){var i=n/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new ae(a+i*o,c+i*s),l=new ae(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var h=new ae(a+i*o,c+i*s),d=new ae(a-i*o,c-i*s),p=[u,h,l,d];return p},r.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},r.prototype.isValidPoint=function(e){var t=Be.round(e.getX()),n=Be.round(e.getY());return this.isValid(t,n)},r.prototype.distancePoint=function(e,t){return Be.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.distanceResultPoint=function(e,t){return Be.distance(e.getX(),e.getY(),t.getX(),t.getY())},r.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Te.truncDivision(this.nbLayers-4,8)+1)+15},r})(),Pu=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=null,i=new qP(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new Eg().decode(a)}catch(h){n=h}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new Eg().decode(a)}catch(h){throw n??h}var c=new lr(s.getText(),s.getRawBytes(),s.getNumBits(),o,le.AZTEC,et.currentTimeMillis()),u=s.getByteSegments();u!=null&&c.putMetadata(Kt.BYTE_SEGMENTS,u);var l=s.getECLevel();return l!=null&&c.putMetadata(Kt.ERROR_CORRECTION_LEVEL,l),c},r.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var n=e.get(tt.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach(function(i,o,s){n.foundPossibleResultPoint(i)})}},r.prototype.reset=function(){},r})(),XP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){XP(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Pu,t)||this}return e})(Es);var Dt=(function(){function r(){}return r.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var n=t&&t.get(tt.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(Kt.ORIENTATION)===!0&&(a=a+s.get(Kt.ORIENTATION)%360),o.putMetadata(Kt.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var u=i.getHeight(),l=0;l<c.length;l++)c[l]=new ae(u-c[l].getY()-1,c[l].getX());return o}else throw new $}},r.prototype.reset=function(){},r.prototype.doDecode=function(e,t){var n=e.getWidth(),i=e.getHeight(),o=new Ft(n),s=t&&t.get(tt.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var u=Math.trunc(i/2),l=0;l<c;l++){var h=Math.trunc((l+1)/2),d=(l&1)===0,p=u+a*(d?h:-h);if(p<0||p>=i)break;try{o=e.getBlackRow(p,o)}catch{continue}for(var v=function(x){if(x===1&&(o.reverse(),t&&t.get(tt.NEED_RESULT_POINT_CALLBACK)===!0)){var T=new Map;t.forEach(function(H,C){return T.set(C,H)}),T.delete(tt.NEED_RESULT_POINT_CALLBACK),t=T}try{var D=y.decodeRow(p,o,t);if(x===1){D.putMetadata(Kt.ORIENTATION,180);var F=D.getResultPoints();F!==null&&(F[0]=new ae(n-F[0].getX()-1,F[0].getY()),F[1]=new ae(n-F[1].getX()-1,F[1].getY()))}return{value:D}}catch{}},y=this,w=0;w<2;w++){var _=v(w);if(typeof _=="object")return _.value}}throw new $},r.recordPattern=function(e,t,n){for(var i=n.length,o=0;o<i;o++)n[o]=0;var s=e.getSize();if(t>=s)throw new $;for(var a=!e.get(t),c=0,u=t;u<s;){if(e.get(u)!==a)n[c]++;else{if(++c===i)break;n[c]=1,a=!a}u++}if(!(c===i||c===i-1&&u===s))throw new $},r.recordPatternInReverse=function(e,t,n){for(var i=n.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new $;r.recordPattern(e,t+1,n)},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;n*=c;for(var u=0,l=0;l<i;l++){var h=e[l],d=t[l]*c,p=h>d?h-d:d-h;if(p>n)return Number.POSITIVE_INFINITY;u+=p}return u/o},r})(),KP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ig=(function(r){KP(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var n=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,u=6,l=i;l<n;l++)if(t.get(l)!==c)s[o]++;else{if(o===u-1){for(var h=e.MAX_AVG_VARIANCE,d=-1,p=e.CODE_START_A;p<=e.CODE_START_C;p++){var v=Dt.patternMatchVariance(s,e.CODE_PATTERNS[p],e.MAX_INDIVIDUAL_VARIANCE);v<h&&(h=v,d=p)}if(d>=0&&t.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,d]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new $},e.decodeCode=function(t,n,i){Dt.recordPattern(t,i,n);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],u=this.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,s=a)}if(s>=0)return s;throw new $},e.prototype.decodeRow=function(t,n,i){var o=i&&i.get(tt.ASSUME_GS1)===!0,s=e.findStartPattern(n),a=s[2],c=0,u=new Uint8Array(20);u[c++]=a;var l;switch(a){case e.CODE_START_A:l=e.CODE_CODE_A;break;case e.CODE_START_B:l=e.CODE_CODE_B;break;case e.CODE_START_C:l=e.CODE_CODE_C;break;default:throw new Z}for(var h=!1,d=!1,p="",v=s[0],y=s[1],w=Int32Array.from([0,0,0,0,0,0]),_=0,x=0,T=a,D=0,F=!0,H=!1,C=!1;!h;){var A=d;switch(d=!1,_=x,x=e.decodeCode(n,w,y),u[c++]=x,x!==e.CODE_STOP&&(F=!0),x!==e.CODE_STOP&&(D++,T+=D*x),v=y,y+=w.reduce(function(be,Ie){return be+Ie},0),x){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Z}switch(l){case e.CODE_CODE_A:if(x<64)C===H?p+=String.fromCharCode(32+x):p+=String.fromCharCode(32+x+128),C=!1;else if(x<96)C===H?p+=String.fromCharCode(x-64):p+=String.fromCharCode(x+64),C=!1;else switch(x!==e.CODE_STOP&&(F=!1),x){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!H&&C?(H=!0,C=!1):H&&C?(H=!1,C=!1):C=!0;break;case e.CODE_SHIFT:d=!0,l=e.CODE_CODE_B;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_B:if(x<96)C===H?p+=String.fromCharCode(32+x):p+=String.fromCharCode(32+x+128),C=!1;else switch(x!==e.CODE_STOP&&(F=!1),x){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!H&&C?(H=!0,C=!1):H&&C?(H=!1,C=!1):C=!0;break;case e.CODE_SHIFT:d=!0,l=e.CODE_CODE_A;break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:h=!0;break}break;case e.CODE_CODE_C:if(x<100)x<10&&(p+="0"),p+=x;else switch(x!==e.CODE_STOP&&(F=!1),x){case e.CODE_FNC_1:o&&(p.length===0?p+="]C1":p+="");break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_STOP:h=!0;break}break}A&&(l=l===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var b=y-v;if(y=n.getNextUnset(y),!n.isRange(y,Math.min(n.getSize(),y+(y-v)/2),!1))throw new $;if(T-=D*_,T%103!==_)throw new Et;var P=p.length;if(P===0)throw new $;P>0&&F&&(l===e.CODE_CODE_C?p=p.substring(0,P-2):p=p.substring(0,P-1));for(var N=(s[1]+s[0])/2,M=v+b/2,S=u.length,Ke=new Uint8Array(S),vt=0;vt<S;vt++)Ke[vt]=u[vt];var ct=[new ae(N,t),new ae(M,t)];return new lr(p,Ke,0,ct,le.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e})(Dt),YP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),pf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cg=(function(r){YP(e,r);function e(t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=r.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,n,i){var o,s,a,c,u=this.counters;u.fill(0),this.decodeRowResult="";var l=e.findAsteriskPattern(n,u),h=n.getNextSet(l[1]),d=n.getSize(),p,v;do{e.recordPattern(n,h,u);var y=e.toNarrowWidePattern(u);if(y<0)throw new $;p=e.patternToChar(y),this.decodeRowResult+=p,v=h;try{for(var w=(o=void 0,pf(u)),_=w.next();!_.done;_=w.next()){var x=_.value;h+=x}}catch(S){o={error:S}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}h=n.getNextSet(h)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var D=pf(u),F=D.next();!F.done;F=D.next()){var x=F.value;T+=x}}catch(S){a={error:S}}finally{try{F&&!F.done&&(c=D.return)&&c.call(D)}finally{if(a)throw a.error}}var H=h-v-T;if(h!==d&&H*2<T)throw new $;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,A=0,b=0;b<C;b++)A+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(b));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(A%43))throw new Et;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new $;var P;this.extendedMode?P=e.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;var N=(l[1]+l[0])/2,M=v+T/2;return new lr(P,null,0,[new ae(N,t),new ae(M,t)],le.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,n){for(var i=t.getSize(),o=t.getNextSet(0),s=0,a=o,c=!1,u=n.length,l=o;l<i;l++)if(t.get(l)!==c)n[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=n[0]+n[1],n.copyWithin(0,2,2+s-1),n[s-1]=0,n[s]=0,s--}else s++;n[s]=1,c=!c}throw new $},e.toNarrowWidePattern=function(t){var n,i,o=t.length,s=0,a;do{var c=2147483647;try{for(var u=(n=void 0,pf(t)),l=u.next();!l.done;l=u.next()){var h=l.value;h<c&&h>s&&(c=h)}}catch(y){n={error:y}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}s=c,a=0;for(var d=0,p=0,v=0;v<o;v++){var h=t[v];h>s&&(p|=1<<o-1-v,a++,d+=h)}if(a===3){for(var v=0;v<o&&a>0;v++){var h=t[v];if(h>s&&(a--,h*2>=d))return-1}return p}}while(a>3);return-1},e.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);if(t===e.ASTERISK_ENCODING)return"*";throw new $},e.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=t.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new Z;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new Z;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="";else throw new Z;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new Z;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e})(Dt),QP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),gf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bg=(function(r){QP(e,r);function e(){var t=r.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,n,i){var o,s,a,c,u=this.findAsteriskPattern(n),l=n.getNextSet(u[1]),h=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var p,v;do{e.recordPattern(n,l,d);var y=this.toPattern(d);if(y<0)throw new $;p=this.patternToChar(y),this.decodeRowResult+=p,v=l;try{for(var w=(o=void 0,gf(d)),_=w.next();!_.done;_=w.next()){var x=_.value;l+=x}}catch(b){o={error:b}}finally{try{_&&!_.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}l=n.getNextSet(l)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var T=0;try{for(var D=gf(d),F=D.next();!F.done;F=D.next()){var x=F.value;T+=x}}catch(b){a={error:b}}finally{try{F&&!F.done&&(c=D.return)&&c.call(D)}finally{if(a)throw a.error}}if(l===h||!n.get(l))throw new $;if(this.decodeRowResult.length<2)throw new $;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var H=this.decodeExtended(this.decodeRowResult),C=(u[1]+u[0])/2,A=v+T/2;return new lr(H,null,0,[new ae(C,t),new ae(A,t)],le.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var n=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,u=0,l=i;l<n;l++)if(t.get(l)!==a)o[u]++;else{if(u===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,l]);s+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new $},e.prototype.toPattern=function(t){var n,i,o=0;try{for(var s=gf(t),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(v){n={error:v}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}for(var u=0,l=t.length,h=0;h<l;h++){var d=Math.round(t[h]*9/o);if(d<1||d>4)return-1;if((h&1)===0)for(var p=0;p<d;p++)u=u<<1|1;else u<<=d}return u},e.prototype.patternToChar=function(t){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===t)return e.ALPHABET_STRING.charAt(n);throw new $},e.prototype.decodeExtended=function(t){for(var n=t.length,i="",o=0;o<n;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=n-1)throw new Z;var a=t.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new Z;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new Z;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="";else throw new Z;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new Z;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var n=t.length;this.checkOneChecksum(t,n-2,20),this.checkOneChecksum(t,n-1,15)},e.prototype.checkOneChecksum=function(t,n,i){for(var o=1,s=0,a=n-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>i&&(o=1);if(t.charAt(n)!==e.ALPHABET_STRING[s%47])throw new Et},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e})(Dt),ZP=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),JP=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tg=(function(r){ZP(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,n,i){var o,s,a=this.decodeStart(n),c=this.decodeEnd(n),u=new Ce;e.decodeMiddle(n,a[1],c[0],u);var l=u.toString(),h=null;i!=null&&(h=i.get(tt.ALLOWED_LENGTHS)),h==null&&(h=e.DEFAULT_ALLOWED_LENGTHS);var d=l.length,p=!1,v=0;try{for(var y=JP(h),w=y.next();!w.done;w=y.next()){var _=w.value;if(d===_){p=!0;break}_>v&&(v=_)}}catch(D){o={error:D}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}if(!p&&d>v&&(p=!0),!p)throw new Z;var x=[new ae(a[1],t),new ae(c[0],t)],T=new lr(l,null,0,x,le.ITF,new Date().getTime());return T},e.decodeMiddle=function(t,n,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);n<i;){Dt.recordPattern(t,n,s);for(var u=0;u<5;u++){var l=2*u;a[u]=s[l],c[u]=s[l+1]}var h=e.decodeDigit(a);o.append(h.toString()),h=this.decodeDigit(c),o.append(h.toString()),s.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(t){var n=e.skipWhiteSpace(t),i=e.findGuardPattern(t,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var o=n-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new $},e.skipWhiteSpace=function(t){var n=t.getSize(),i=t.getNextSet(0);if(i===n)throw new $;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var n=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof $&&(i=e.findGuardPattern(t,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,n,i){var o=i.length,s=new Int32Array(o),a=t.getSize(),c=!1,u=0,l=n;s.fill(0);for(var h=n;h<a;h++)if(t.get(h)!==c)s[u]++;else{if(u===o-1){if(Dt.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[l,h];l+=s[0]+s[1],et.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,c=!c}throw new $},e.decodeDigit=function(t){for(var n=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=Dt.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);c<n?(n=c,i=s):c===n&&(i=-1)}if(i>=0)return i%10;throw new $},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e})(Dt),eO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),us=(function(r){eO(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var n=!1,i,o=0,s=Int32Array.from([0,0,0]);!n;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(n=t.isRange(c,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Z;i+=s}i*=3;for(var o=n-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Z;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,n,i,o){return this.findGuardPattern(t,n,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,n,i,o,s){var a=t.getSize();n=i?t.getNextUnset(n):t.getNextSet(n);for(var c=0,u=n,l=o.length,h=i,d=n;d<a;d++)if(t.get(d)!==h)s[c]++;else{if(c===l-1){if(Dt.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,d]);u+=s[0]+s[1];for(var p=s.slice(2,s.length),v=0;v<c-1;v++)s[v]=p[v];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,h=!h}throw new $},e.decodeDigit=function(t,n,i,o){this.recordPattern(t,i,n);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,u=0;u<c;u++){var l=o[u],h=Dt.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);h<s&&(s=h,a=u)}if(a>=0)return a;throw new $},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e})(Dt),tO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rO=(function(){function r(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),s=i.toString(),a=r.parseExtensionString(s),c=[new ae((n[0]+n[1])/2,e),new ae(o,e)],u=new lr(s,null,0,c,le.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},r.prototype.decodeMiddle=function(e,t,n){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<5&&c<a;l++){var h=us.decodeDigit(e,s,c,us.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,tO(s)),p=d.next();!p.done;p=d.next()){var v=p.value;c+=v}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(u|=1<<4-l),l!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==5)throw new $;var y=this.determineCheckDigit(u);if(r.extensionChecksum(n.toString())!==y)throw new $;return c},r.extensionChecksum=function(e){for(var t=e.length,n=0,i=t-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=t-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},r.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new $},r.parseExtensionString=function(e){if(e.length!==5)return null;var t=r.parseExtension5String(e);return t==null?null:new Map([[Kt.SUGGESTED_PRICE,t]])},r.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),o=n%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},r})(),nO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iO=(function(){function r(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return r.prototype.decodeRow=function(e,t,n){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,n,i),s=i.toString(),a=r.parseExtensionString(s),c=[new ae((n[0]+n[1])/2,e),new ae(o,e)],u=new lr(s,null,0,c,le.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},r.prototype.decodeMiddle=function(e,t,n){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<2&&c<a;l++){var h=us.decodeDigit(e,s,c,us.L_AND_G_PATTERNS);n+=String.fromCharCode(48+h%10);try{for(var d=(i=void 0,nO(s)),p=d.next();!p.done;p=d.next()){var v=p.value;c+=v}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}h>=10&&(u|=1<<1-l),l!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(n.length!==2)throw new $;if(parseInt(n.toString())%4!==u)throw new $;return c},r.parseExtensionString=function(e){return e.length!==2?null:new Map([[Kt.ISSUE_NUMBER,parseInt(e)]])},r})(),oO=(function(){function r(){}return r.decodeRow=function(e,t,n){var i=us.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new rO;return o.decodeRow(e,t,i)}catch{var s=new iO;return s.decodeRow(e,t,i)}},r.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),r})(),sO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),St=(function(r){sO(e,r);function e(){var t=r.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[n]=o}return t}return e.prototype.decodeRow=function(t,n,i){var o=e.findStartGuardPattern(n),s=i==null?null:i.get(tt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new ae((o[0]+o[1])/2,t);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(n,o,this.decodeRowStringBuffer),u=c.rowOffset,l=c.resultString;if(s!=null){var h=new ae(u,t);s.foundPossibleResultPoint(h)}var d=e.decodeEnd(n,u);if(s!=null){var p=new ae((d[0]+d[1])/2,t);s.foundPossibleResultPoint(p)}var v=d[1],y=v+(v-d[0]);if(y>=n.getSize()||!n.isRange(v,y,!1))throw new $;var w=l.toString();if(w.length<8)throw new Z;if(!e.checkChecksum(w))throw new Et;var _=(o[1]+o[0])/2,x=(d[1]+d[0])/2,T=this.getBarcodeFormat(),D=[new ae(_,t),new ae(x,t)],F=new lr(w,null,0,D,T,new Date().getTime()),H=0;try{var C=oO.decodeRow(t,n,d[1]);F.putMetadata(Kt.UPC_EAN_EXTENSION,C.getText()),F.putAllMetadata(C.getResultMetadata()),F.addResultPoints(C.getResultPoints()),H=C.getText().length}catch{}var A=i==null?null:i.get(tt.ALLOWED_EAN_EXTENSIONS);if(A!=null){var b=!1;for(var P in A)if(H.toString()===P){b=!0;break}if(!b)throw new $}return T===le.EAN_13||le.UPC_A,F},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var n=t.length;if(n===0)return!1;var i=parseInt(t.charAt(n-1),10);return e.getStandardUPCEANChecksum(t.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(t){for(var n=t.length,i=0,o=n-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Z;i+=s}i*=3;for(var o=n-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new Z;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,n){return e.findGuardPattern(t,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e})(us),aO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Sg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mh=(function(r){aO(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),h=n[1],d=0,p=0;p<6&&h<l;p++){var v=St.decodeDigit(t,u,h,St.L_AND_G_PATTERNS);i+=String.fromCharCode(48+v%10);try{for(var y=(o=void 0,Sg(u)),w=y.next();!w.done;w=y.next()){var _=w.value;h+=_}}catch(F){o={error:F}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}v>=10&&(d|=1<<5-p)}i=e.determineFirstDigit(i,d);var x=St.findGuardPattern(t,h,!0,St.MIDDLE_PATTERN,new Int32Array(St.MIDDLE_PATTERN.length).fill(0));h=x[1];for(var p=0;p<6&&h<l;p++){var v=St.decodeDigit(t,u,h,St.L_PATTERNS);i+=String.fromCharCode(48+v);try{for(var T=(a=void 0,Sg(u)),D=T.next();!D.done;D=T.next()){var _=D.value;h+=_}}catch(C){a={error:C}}finally{try{D&&!D.done&&(c=T.return)&&c.call(T)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return le.EAN_13},e.determineFirstDigit=function(t,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new $},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e})(St),cO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Rg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pg=(function(r){cO(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,n,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),h=n[1],d=0;d<4&&h<l;d++){var p=St.decodeDigit(t,u,h,St.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var v=(o=void 0,Rg(u)),y=v.next();!y.done;y=v.next()){var w=y.value;h+=w}}catch(D){o={error:D}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}}var _=St.findGuardPattern(t,h,!0,St.MIDDLE_PATTERN,new Int32Array(St.MIDDLE_PATTERN.length).fill(0));h=_[1];for(var d=0;d<4&&h<l;d++){var p=St.decodeDigit(t,u,h,St.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var x=(a=void 0,Rg(u)),T=x.next();!T.done;T=x.next()){var w=T.value;h+=w}}catch(H){a={error:H}}finally{try{T&&!T.done&&(c=x.return)&&c.call(x)}finally{if(a)throw a.error}}}return{rowOffset:h,resultString:i}},e.prototype.getBarcodeFormat=function(){return le.EAN_8},e})(St),uO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Og=(function(r){uO(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.ean13Reader=new mh,t}return e.prototype.getBarcodeFormat=function(){return le.UPC_A},e.prototype.decode=function(t,n){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,n,i))},e.prototype.decodeMiddle=function(t,n,i){return this.ean13Reader.decodeMiddle(t,n,i)},e.prototype.maybeReturnResult=function(t){var n=t.getText();if(n.charAt(0)==="0"){var i=new lr(n.substring(1),null,null,t.getResultPoints(),le.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new $},e.prototype.reset=function(){this.ean13Reader.reset()},e})(St),lO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),fO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dg=(function(r){lO(e,r);function e(){var t=r.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,n,i){var o,s,a=this.decodeMiddleCounters.map(function(w){return w});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=t.getSize(),u=n[1],l=0,h=0;h<6&&u<c;h++){var d=e.decodeDigit(t,a,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var p=(o=void 0,fO(a)),v=p.next();!v.done;v=p.next()){var y=v.value;u+=y}}catch(w){o={error:w}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}d>=10&&(l|=1<<5-h)}return e.determineNumSysAndCheckDigit(new Ce(i),l),u},e.prototype.decodeEnd=function(t,n){return e.findGuardPatternWithoutCounters(t,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return St.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,n){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw $.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return le.UPC_E},e.convertUPCEtoUPCA=function(t){var n=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new Ce;i.append(t.charAt(0));var o=n[5];switch(o){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(o),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e})(St),hO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Ng=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vf=(function(r){hO(e,r);function e(t){var n=r.call(this)||this,i=t==null?null:t.get(tt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(le.EAN_13)>-1&&o.push(new mh),i.indexOf(le.UPC_A)>-1&&o.push(new Og),i.indexOf(le.EAN_8)>-1&&o.push(new Pg),i.indexOf(le.UPC_E)>-1&&o.push(new Dg)),o.length===0&&(o.push(new mh),o.push(new Og),o.push(new Pg),o.push(new Dg)),n.readers=o,n}return e.prototype.decodeRow=function(t,n,i){var o,s;try{for(var a=Ng(this.readers),c=a.next();!c.done;c=a.next()){var u=c.value;try{var l=u.decodeRow(t,n,i),h=l.getBarcodeFormat()===le.EAN_13&&l.getText().charAt(0)==="0",d=i==null?null:i.get(tt.POSSIBLE_FORMATS),p=d==null||d.includes(le.UPC_A);if(h&&p){var v=l.getRawBytes(),y=new lr(l.getText().substring(1),v,v?v.length:null,l.getResultPoints(),le.UPC_A);return y.putAllMetadata(l.getResultMetadata()),y}return l}catch{}}}catch(w){o={error:w}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new $},e.prototype.reset=function(){var t,n;try{for(var i=Ng(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e})(Dt),dO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),pO=(function(r){dO(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,n,i){var o=this.getValidRowData(n);if(!o)throw new $;var s=this.codaBarDecodeRow(o.row);if(!s)throw new $;return new lr(s,null,0,[new ae(o.left,t),new ae(o.right,t)],le.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var n=t.toArray(),i=n.indexOf(!0);if(i===-1)return null;var o=n.lastIndexOf(!0);if(o<=i)return null;n=n.slice(i,o+1);for(var s=[],a=n[0],c=1,u=1;u<n.length;u++)n[u]===a?c++:(a=n[u],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var n=[],i=Math.ceil(t.reduce(function(c,u){return(c+u)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[s])}var a=n.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var n=/^[A-D].{1,}[A-D]$/;return n.test(t)},e})(Dt),gO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),vO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ki=(function(r){gO(e,r);function e(){var t=r.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,n){for(var i=0;i<n.length;i++)if(Dt.patternMatchVariance(t,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new $},e.count=function(t){return Be.sum(new Int32Array(t))},e.increment=function(t,n){for(var i=0,o=n[0],s=1;s<t.length;s++)n[s]>o&&(o=n[s],i=s);t[i]++},e.decrement=function(t,n){for(var i=0,o=n[0],s=1;s<t.length;s++)n[s]<o&&(o=n[s],i=s);t[i]--},e.isFinderPattern=function(t){var n,i,o=t[0]+t[1],s=o+t[2]+t[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var l=vO(t),h=l.next();!h.done;h=l.next()){var d=h.value;d>u&&(u=d),d<c&&(c=d)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e})(Dt),Ou=(function(){function r(e,t){this.value=e,this.checksumPortion=t}return r.prototype.getValue=function(){return this.value},r.prototype.getChecksumPortion=function(){return this.checksumPortion},r.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},r.prototype.hashCode=function(){return this.value^this.checksumPortion},r})(),Xw=(function(){function r(e,t,n,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ae(n,o)),this.resultPoints.push(new ae(i,o))}return r.prototype.getValue=function(){return this.value},r.prototype.getStartEnd=function(){return this.startEnd},r.prototype.getResultPoints=function(){return this.resultPoints},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.hashCode=function(){return this.value},r})(),mO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Oo=(function(){function r(){}return r.getRSSvalue=function(e,t,n){var i,o,s=0;try{for(var a=mO(e),c=a.next();!c.done;c=a.next()){var u=c.value;s+=u}}catch(x){i={error:x}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var l=0,h=0,d=e.length,p=0;p<d-1;p++){var v=void 0;for(v=1,h|=1<<p;v<e[p];v++,h&=~(1<<p)){var y=r.combins(s-v-1,d-p-2);if(n&&h===0&&s-v-(d-p-1)>=d-p-1&&(y-=r.combins(s-v-(d-p),d-p-2)),d-p-1>1){for(var w=0,_=s-v-(d-p-2);_>t;_--)w+=r.combins(s-v-_-1,d-p-3);y-=w*(d-1-p)}else s-v>t&&y--;l+=y}s-=v}return l},r.combins=function(e,t){var n,i;e-t>t?(i=t,n=e-t):(i=e-t,n=t);for(var o=1,s=1,a=e;a>n;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},r})(),yO=(function(){function r(){}return r.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var n=12*t,i=new Ft(n),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var u=e[c],l=u.getLeftChar().getValue(),h=11;h>=0;--h)(l&1<<h)!==0&&i.set(o),o++;if(u.getRightChar()!==null)for(var d=u.getRightChar().getValue(),h=11;h>=0;--h)(d&1<<h)!==0&&i.set(o),o++}return i},r})(),Wi=(function(){function r(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return r.prototype.getDecodedInformation=function(){return this.decodedInformation},r.prototype.isFinished=function(){return this.finished},r})(),Qd=(function(){function r(e){this.newPosition=e}return r.prototype.getNewPosition=function(){return this.newPosition},r})(),wO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),en=(function(r){wO(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e})(Qd),_O=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),zi=(function(r){_O(e,r);function e(t,n,i){var o=r.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=n,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e})(Qd),xO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Eo=(function(r){xO(e,r);function e(t,n,i){var o=r.call(this,t)||this;if(n<0||n>10||i<0||i>10)throw new Z;return o.firstDigit=n,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e})(Qd),Ic=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EO=(function(){function r(){}return r.parseFieldsInGeneralPurpose=function(e){var t,n,i,o,s,a,c,u;if(!e)return null;if(e.length<2)throw new $;var l=e.substring(0,2);try{for(var h=Ic(r.TWO_DIGIT_DATA_LENGTH),d=h.next();!d.done;d=h.next()){var p=d.value;if(p[0]===l)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(2,p[2],e):r.processFixedAI(2,p[1],e)}}catch(H){t={error:H}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}if(e.length<3)throw new $;var v=e.substring(0,3);try{for(var y=Ic(r.THREE_DIGIT_DATA_LENGTH),w=y.next();!w.done;w=y.next()){var p=w.value;if(p[0]===v)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(3,p[2],e):r.processFixedAI(3,p[1],e)}}catch(H){i={error:H}}finally{try{w&&!w.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var _=Ic(r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),x=_.next();!x.done;x=_.next()){var p=x.value;if(p[0]===v)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,p[2],e):r.processFixedAI(4,p[1],e)}}catch(H){s={error:H}}finally{try{x&&!x.done&&(a=_.return)&&a.call(_)}finally{if(s)throw s.error}}if(e.length<4)throw new $;var T=e.substring(0,4);try{for(var D=Ic(r.FOUR_DIGIT_DATA_LENGTH),F=D.next();!F.done;F=D.next()){var p=F.value;if(p[0]===T)return p[1]===r.VARIABLE_LENGTH?r.processVariableAI(4,p[2],e):r.processFixedAI(4,p[1],e)}}catch(H){c={error:H}}finally{try{F&&!F.done&&(u=D.return)&&u.call(D)}finally{if(c)throw c.error}}throw new $},r.processFixedAI=function(e,t,n){if(n.length<e)throw new $;var i=n.substring(0,e);if(n.length<e+t)throw new $;var o=n.substring(e,e+t),s=n.substring(e+t),a="("+i+")"+o,c=r.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},r.processVariableAI=function(e,t,n){var i=n.substring(0,e),o;n.length<e+t?o=n.length:o=e+t;var s=n.substring(e,o),a=n.substring(o),c="("+i+")"+s,u=r.parseFieldsInGeneralPurpose(a);return u==null?c:c+u},r.VARIABLE_LENGTH=[],r.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",r.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",r.VARIABLE_LENGTH,20],["22",r.VARIABLE_LENGTH,29],["30",r.VARIABLE_LENGTH,8],["37",r.VARIABLE_LENGTH,8],["90",r.VARIABLE_LENGTH,30],["91",r.VARIABLE_LENGTH,30],["92",r.VARIABLE_LENGTH,30],["93",r.VARIABLE_LENGTH,30],["94",r.VARIABLE_LENGTH,30],["95",r.VARIABLE_LENGTH,30],["96",r.VARIABLE_LENGTH,30],["97",r.VARIABLE_LENGTH,3],["98",r.VARIABLE_LENGTH,30],["99",r.VARIABLE_LENGTH,30]],r.THREE_DIGIT_DATA_LENGTH=[["240",r.VARIABLE_LENGTH,30],["241",r.VARIABLE_LENGTH,30],["242",r.VARIABLE_LENGTH,6],["250",r.VARIABLE_LENGTH,30],["251",r.VARIABLE_LENGTH,30],["253",r.VARIABLE_LENGTH,17],["254",r.VARIABLE_LENGTH,20],["400",r.VARIABLE_LENGTH,30],["401",r.VARIABLE_LENGTH,30],["402",17],["403",r.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",r.VARIABLE_LENGTH,20],["421",r.VARIABLE_LENGTH,15],["422",3],["423",r.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],r.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",r.VARIABLE_LENGTH,15],["391",r.VARIABLE_LENGTH,18],["392",r.VARIABLE_LENGTH,15],["393",r.VARIABLE_LENGTH,18],["703",r.VARIABLE_LENGTH,30]],r.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",r.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",r.VARIABLE_LENGTH,20],["8003",r.VARIABLE_LENGTH,30],["8004",r.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",r.VARIABLE_LENGTH,30],["8008",r.VARIABLE_LENGTH,12],["8018",18],["8020",r.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",r.VARIABLE_LENGTH,70],["8200",r.VARIABLE_LENGTH,70]],r})(),Gc=(function(){function r(e){this.buffer=new Ce,this.information=e}return r.prototype.decodeAllCodes=function(e,t){var n=t,i=null;do{var o=this.decodeGeneralPurposeField(n,i),s=EO.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,n===o.getNewPosition())break;n=o.getNewPosition()}while(!0);return e.toString()},r.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},r.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Eo(this.information.getSize(),Eo.FNC1,Eo.FNC1):new Eo(this.information.getSize(),t-1,Eo.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,o=(n-8)%11;return new Eo(e+7,i,o)},r.prototype.extractNumericValueFromBitArray=function(e,t){return r.extractNumericValueFromBitArray(this.information,e,t)},r.extractNumericValueFromBitArray=function(e,t,n){for(var i=0,o=0;o<n;++o)e.get(t+o)&&(i|=1<<n-o-1);return i},r.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new zi(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new zi(this.current.getPosition(),this.buffer.toString())},r.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},r.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new zi(this.current.getPosition(),this.buffer.toString()):t=new zi(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Wi(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new zi(this.current.getPosition(),this.buffer.toString());return new Wi(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wi(!1)},r.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new zi(this.current.getPosition(),this.buffer.toString());return new Wi(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wi(!1)},r.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new zi(this.current.getPosition(),this.buffer.toString());return new Wi(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wi(!1)},r.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},r.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new en(e+5,en.FNC1);if(t>=5&&t<15)return new en(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new en(e+7,""+(n+1));if(n>=90&&n<116)return new en(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new Z}return new en(e+8,o)},r.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},r.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new en(e+5,en.FNC1);if(t>=5&&t<15)return new en(e+5,"0"+(t-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new en(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Ka("Decoding invalid alphanumeric value: "+n)}return new en(e+6,i)},r.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},r.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},r.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},r})(),Kw=(function(){function r(e){this.information=e,this.generalDecoder=new Gc(e)}return r.prototype.getInformation=function(){return this.information},r.prototype.getGeneralDecoder=function(){return this.generalDecoder},r})(),AO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),nn=(function(r){AO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,n){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,n,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,n){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+n).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e})(Kw),IO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),CO=(function(r){IO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ce;t.append("(01)");var n=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e})(nn),bO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),TO=(function(r){bO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new Ce;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e})(Kw),SO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Wc=(function(r){SO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,n,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&t.append("0"),a/=10;t.append(s)},e})(nn),RO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Yw=(function(r){RO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Wc.GTIN_SIZE+e.WEIGHT_SIZE)throw new $;var t=new Ce;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Wc.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e})(Wc),PO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),OO=(function(r){PO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e})(Yw),DO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),NO=(function(r){DO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.addWeightCode=function(t,n){n<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e})(Yw),MO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),kO=(function(r){MO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+nn.GTIN_SIZE)throw new $;var t=new Ce;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+nn.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+nn.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e})(nn),LO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),BO=(function(r){LO(e,r);function e(t){return r.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+nn.GTIN_SIZE)throw new $;var t=new Ce;this.encodeCompressedGtin(t,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+nn.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+nn.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+nn.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e})(nn),FO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),oi=(function(r){FO(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=n,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new $;var t=new Ce;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e})(Wc);function VO(r){try{if(r.get(1))return new CO(r);if(!r.get(2))return new TO(r);var e=Gc.extractNumericValueFromBitArray(r,1,4);switch(e){case 4:return new OO(r);case 5:return new NO(r)}var t=Gc.extractNumericValueFromBitArray(r,1,5);switch(t){case 12:return new kO(r);case 13:return new BO(r)}var n=Gc.extractNumericValueFromBitArray(r,1,7);switch(n){case 56:return new oi(r,"310","11");case 57:return new oi(r,"320","11");case 58:return new oi(r,"310","13");case 59:return new oi(r,"320","13");case 60:return new oi(r,"310","15");case 61:return new oi(r,"320","15");case 62:return new oi(r,"310","17");case 63:return new oi(r,"320","17")}}catch(i){throw console.log(i),new Ka("unknown decoder: "+r)}}var Mg=(function(){function r(e,t,n,i){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=i}return r.prototype.mayBeLast=function(){return this.maybeLast},r.prototype.getLeftChar=function(){return this.leftchar},r.prototype.getRightChar=function(){return this.rightchar},r.prototype.getFinderPattern=function(){return this.finderpattern},r.prototype.mustBeLast=function(){return this.rightchar==null},r.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},r.equals=function(e,t){return e instanceof r?r.equalsOrNull(e.leftchar,t.leftchar)&&r.equalsOrNull(e.rightchar,t.rightchar)&&r.equalsOrNull(e.finderpattern,t.finderpattern):!1},r.equalsOrNull=function(e,t){return e===null?t===null:r.equals(e,t)},r.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},r})(),UO=(function(){function r(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return r.prototype.getPairs=function(){return this.pairs},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.isReversed=function(){return this.wasReversed},r.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},r.prototype.toString=function(){return"{ "+this.pairs+" }"},r.prototype.equals=function(e,t){return e instanceof r?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},r.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var n;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}},r})(),HO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),si=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$O=(function(r){HO(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,t))}catch(a){if(a instanceof $){if(!this.pairs.length)throw new $;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new $},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(t,n){for(var i,o,s=n;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,si(t)),u=c.next();!u.done;u=c.next()){var l=u.value;this.pairs.push(l.getPairs())}}catch(d){i={error:d}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var h=new Array(t);h.push(a);try{return this.checkRows(h,s+1)}catch(d){console.log(d)}}}throw new $},e.isValidSequence=function(t){var n,i;try{for(var o=si(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(t.length>a.length)){for(var c=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==a[u]){c=!1;break}if(c)return!0}}}catch(l){n={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(t,n){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new UO(this.pairs,t,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,n){var i,o,s,a,c,u;try{for(var l=si(n),h=l.next();!h.done;h=l.next()){var d=h.value;if(d.getPairs().length!==t.length){var p=!0;try{for(var v=(s=void 0,si(d.getPairs())),y=v.next();!y.done;y=v.next()){var w=y.value,_=!1;try{for(var x=(c=void 0,si(t)),T=x.next();!T.done;T=x.next()){var D=T.value;if(Mg.equals(w,D)){_=!0;break}}}catch(F){c={error:F}}finally{try{T&&!T.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}_||(p=!1)}}catch(F){s={error:F}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}}}}catch(F){i={error:F}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,n){var i,o,s,a,c,u;try{for(var l=si(n),h=l.next();!h.done;h=l.next()){var d=h.value,p=!0;try{for(var v=(s=void 0,si(t)),y=v.next();!y.done;y=v.next()){var w=y.value,_=!1;try{for(var x=(c=void 0,si(d.getPairs())),T=x.next();!T.done;T=x.next()){var D=T.value;if(w.equals(D)){_=!0;break}}}catch(F){c={error:F}}finally{try{T&&!T.done&&(u=x.return)&&u.call(x)}finally{if(c)throw c.error}}if(!_){p=!1;break}}}catch(F){s={error:F}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(s)throw s.error}}if(p)return!0}}catch(F){i={error:F}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var n=yO.buildBitArray(t),i=VO(n),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new lr(o,null,null,c,le.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),n=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var u=c.getRightChar();u!=null&&(o+=u.getChecksumPortion(),s++)}o%=211;var l=211*(s-4)+o;return l===n.getValue()},e.getNextSecondBar=function(t,n){var i;return t.get(n)?(i=t.getNextUnset(n),i=t.getNextSet(i)):(i=t.getNextSet(n),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,n,i){var o=n.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(t,n,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var u=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new $;var l;try{l=this.decodeDataCharacter(t,s,o,!1)}catch(h){l=null,console.log(h)}return new Mg(u,l,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,n,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(n))a=0;else{var c=n[n.length-1];a=c.getFinderPattern().getStartEnd()[1]}var u=n.length%2!==0;this.startFromEven&&(u=!u);for(var l=!1;a<s&&(l=!t.get(a),!!l);)a++;for(var h=0,d=a,p=a;p<s;p++)if(t.get(p)!==l)o[h]++;else{if(h===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=d,this.startEnd[1]=p;return}u&&e.reverseCounters(o),d+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,l=!l}throw new $},e.reverseCounters=function(t){for(var n=t.length,i=0;i<n/2;++i){var o=t[i];t[i]=t[n-i-1],t[n-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,n,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var u=this.getDecodeFinderCounters();et.arraycopy(u,0,u,1,u.length-1),u[0]=o;var l;try{l=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Xw(l,[s,a],s,a,n)},e.prototype.decodeDataCharacter=function(t,n,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(t,n.getStartEnd()[0],s);else{e.recordPattern(t,n.getStartEnd()[1],s);for(var c=0,u=s.length-1;c<u;c++,u--){var l=s[c];s[c]=s[u],s[u]=l}}var h=17,d=Be.sum(new Int32Array(s))/h,p=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new $;for(var v=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),_=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var x=1*s[c]/d,T=x+.5;if(T<1){if(x<.3)throw new $;T=1}else if(T>8){if(x>8.7)throw new $;T=8}var D=c/2;(c&1)===0?(v[D]=T,w[D]=x-T):(y[D]=T,_[D]=x-T)}this.adjustOddEvenCounts(h);for(var F=4*n.getValue()+(i?0:2)+(o?0:1)-1,H=0,C=0,c=v.length-1;c>=0;c--){if(e.isNotA1left(n,i,o)){var A=e.WEIGHTS[F][2*c];C+=v[c]*A}H+=v[c]}for(var b=0,c=y.length-1;c>=0;c--)if(e.isNotA1left(n,i,o)){var A=e.WEIGHTS[F][2*c+1];b+=y[c]*A}var P=C+b;if((H&1)!==0||H>13||H<4)throw new $;var N=(13-H)/2,M=e.SYMBOL_WIDEST[N],S=9-M,Ke=Oo.getRSSvalue(v,M,!0),vt=Oo.getRSSvalue(y,S,!1),ct=e.EVEN_TOTAL_SUBSET[N],be=e.GSUM[N],Ie=Ke*ct+vt+be;return new Ou(Ie,P)},e.isNotA1left=function(t,n,i){return!(t.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(t){var n=Be.sum(new Int32Array(this.getOddCounts())),i=Be.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var u=n+i-t,l=(n&1)===1,h=(i&1)===0;if(u===1)if(l){if(h)throw new $;s=!0}else{if(!h)throw new $;c=!0}else if(u===-1)if(l){if(h)throw new $;o=!0}else{if(!h)throw new $;a=!0}else if(u===0){if(l){if(!h)throw new $;n<i?(o=!0,c=!0):(s=!0,a=!0)}else if(h)throw new $}else throw new $;if(o){if(s)throw new $;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new $;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e})(Ki),jO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),GO=(function(r){jO(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e})(Ou),WO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),mf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kg=(function(r){WO(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,n,i){var o,s,a,c,u=this.decodePair(n,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),n.reverse();var l=this.decodePair(n,!0,t,i);e.addOrTally(this.possibleRightPairs,l),n.reverse();try{for(var h=mf(this.possibleLeftPairs),d=h.next();!d.done;d=h.next()){var p=d.value;if(p.getCount()>1)try{for(var v=(a=void 0,mf(this.possibleRightPairs)),y=v.next();!y.done;y=v.next()){var w=y.value;if(w.getCount()>1&&e.checkChecksum(p,w))return e.constructResult(p,w)}}catch(_){a={error:_}}finally{try{y&&!y.done&&(c=v.return)&&c.call(v)}finally{if(a)throw a.error}}}}catch(_){o={error:_}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}throw new $},e.addOrTally=function(t,n){var i,o;if(n!=null){var s=!1;try{for(var a=mf(t),c=a.next();!c.done;c=a.next()){var u=c.value;if(u.getValue()===n.getValue()){u.incrementCount(),s=!0;break}}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||t.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,n){for(var i=4537077*t.getValue()+n.getValue(),o=new String(i).toString(),s=new Ce,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var u=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*u:u}c=10-c%10,c===10&&(c=0),s.append(c.toString());var l=t.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new lr(s.toString(),null,0,[l[0],l[1],h[0],h[1]],le.RSS_14,new Date().getTime())},e.checkChecksum=function(t,n){var i=(t.getChecksumPortion()+16*n.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+n.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,n,i,o){try{var s=this.findFinderPattern(t,n),a=this.parseFoundFinderPattern(t,i,n,s),c=o==null?null:o.get(tt.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(s[0]+s[1])/2;n&&(u=t.getSize()-1-u),c.foundPossibleResultPoint(new ae(u,i))}var l=this.decodeDataCharacter(t,a,!0),h=this.decodeDataCharacter(t,a,!1);return new GO(1597*l.getValue()+h.getValue(),l.getChecksumPortion()+4*h.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,n,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)Dt.recordPatternInReverse(t,n.getStartEnd()[0],o);else{Dt.recordPattern(t,n.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var u=o[a];o[a]=o[c],o[c]=u}}for(var l=i?16:15,h=Be.sum(new Int32Array(o))/l,d=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var w=o[a]/h,_=Math.floor(w+.5);_<1?_=1:_>8&&(_=8);var x=Math.floor(a/2);(a&1)===0?(d[x]=_,v[x]=w-_):(p[x]=_,y[x]=w-_)}this.adjustOddEvenCounts(i,l);for(var T=0,D=0,a=d.length-1;a>=0;a--)D*=9,D+=d[a],T+=d[a];for(var F=0,H=0,a=p.length-1;a>=0;a--)F*=9,F+=p[a],H+=p[a];var C=D+3*F;if(i){if((T&1)!==0||T>12||T<4)throw new $;var A=(12-T)/2,b=e.OUTSIDE_ODD_WIDEST[A],P=9-b,N=Oo.getRSSvalue(d,b,!1),M=Oo.getRSSvalue(p,P,!0),S=e.OUTSIDE_EVEN_TOTAL_SUBSET[A],Ke=e.OUTSIDE_GSUM[A];return new Ou(N*S+M+Ke,C)}else{if((H&1)!==0||H>10||H<4)throw new $;var A=(10-H)/2,b=e.INSIDE_ODD_WIDEST[A],P=9-b,N=Oo.getRSSvalue(d,b,!0),M=Oo.getRSSvalue(p,P,!1),vt=e.INSIDE_ODD_TOTAL_SUBSET[A],Ke=e.INSIDE_GSUM[A];return new Ou(M*vt+N+Ke,C)}},e.prototype.findFinderPattern=function(t,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,a=0;a<o&&(s=!t.get(a),n!==s);)a++;for(var c=0,u=a,l=a;l<o;l++)if(t.get(l)!==s)i[c]++;else{if(c===3){if(Ki.isFinderPattern(i))return[u,l];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new $},e.prototype.parseFoundFinderPattern=function(t,n,i,o){for(var s=t.get(o[0]),a=o[0]-1;a>=0&&s!==t.get(a);)a--;a++;var c=o[0]-a,u=this.getDecodeFinderCounters(),l=new Int32Array(u.length);et.arraycopy(u,0,l,1,u.length-1),l[0]=c;var h=this.parseFinderValue(l,e.FINDER_PATTERNS),d=a,p=o[1];return i&&(d=t.getSize()-1-d,p=t.getSize()-1-p),new Xw(h,[a,o[1]],d,p,n)},e.prototype.adjustOddEvenCounts=function(t,n){var i=Be.sum(new Int32Array(this.getOddCounts())),o=Be.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,u=!1;t?(i>12?a=!0:i<4&&(s=!0),o>12?u=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?u=!0:o<4&&(c=!0));var l=i+o-n,h=(i&1)===(t?1:0),d=(o&1)===1;if(l===1)if(h){if(d)throw new $;a=!0}else{if(!d)throw new $;u=!0}else if(l===-1)if(h){if(d)throw new $;s=!0}else{if(!d)throw new $;c=!0}else if(l===0){if(h){if(!d)throw new $;i<o?(s=!0,u=!0):(a=!0,c=!0)}else if(d)throw new $}else throw new $;if(s){if(a)throw new $;Ki.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Ki.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new $;Ki.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Ki.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e})(Ki),zO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),Do=(function(r){zO(e,r);function e(t){var n=r.call(this)||this;n.readers=[];var i=t?t.get(tt.POSSIBLE_FORMATS):null,o=t&&t.get(tt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(tt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(le.EAN_13)||i.includes(le.UPC_A)||i.includes(le.EAN_8)||i.includes(le.UPC_E))&&n.readers.push(new vf(t)),i.includes(le.CODE_39)&&n.readers.push(new Cg(o,s)),i.includes(le.CODE_93)&&n.readers.push(new bg),i.includes(le.CODE_128)&&n.readers.push(new Ig),i.includes(le.ITF)&&n.readers.push(new Tg),i.includes(le.CODABAR)&&n.readers.push(new pO),i.includes(le.RSS_14)&&n.readers.push(new kg),i.includes(le.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new $O))),n.readers.length===0&&(n.readers.push(new vf(t)),n.readers.push(new Cg),n.readers.push(new bg),n.readers.push(new vf(t)),n.readers.push(new Ig),n.readers.push(new Tg),n.readers.push(new kg)),n}return e.prototype.decodeRow=function(t,n,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,n,i)}catch{}throw new $},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e})(Dt),qO=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){qO(e,r);function e(t,n){return t===void 0&&(t=500),r.call(this,new Do(n),t,n)||this}return e})(Es);var Lg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$e=(function(){function r(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return r.prototype.getECCodewords=function(){return this.ecCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),Ve=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),XO=(function(){function r(e,t,n,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var u=0,l=s.getECCodewords(),h=s.getECBlocks();try{for(var d=Lg(h),p=d.next();!p.done;p=d.next()){var v=p.value;u+=v.getCount()*(v.getDataCodewords()+l)}}catch(y){a={error:y}}finally{try{p&&!p.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}this.totalCodewords=u}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},r.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},r.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},r.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getECBlocks=function(){return this.ecBlocks},r.getVersionForDimensions=function(e,t){var n,i;if((e&1)!==0||(t&1)!==0)throw new Z;try{for(var o=Lg(r.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new Z},r.prototype.toString=function(){return""+this.versionNumber},r.buildVersions=function(){return[new r(1,10,10,8,8,new $e(5,new Ve(1,3))),new r(2,12,12,10,10,new $e(7,new Ve(1,5))),new r(3,14,14,12,12,new $e(10,new Ve(1,8))),new r(4,16,16,14,14,new $e(12,new Ve(1,12))),new r(5,18,18,16,16,new $e(14,new Ve(1,18))),new r(6,20,20,18,18,new $e(18,new Ve(1,22))),new r(7,22,22,20,20,new $e(20,new Ve(1,30))),new r(8,24,24,22,22,new $e(24,new Ve(1,36))),new r(9,26,26,24,24,new $e(28,new Ve(1,44))),new r(10,32,32,14,14,new $e(36,new Ve(1,62))),new r(11,36,36,16,16,new $e(42,new Ve(1,86))),new r(12,40,40,18,18,new $e(48,new Ve(1,114))),new r(13,44,44,20,20,new $e(56,new Ve(1,144))),new r(14,48,48,22,22,new $e(68,new Ve(1,174))),new r(15,52,52,24,24,new $e(42,new Ve(2,102))),new r(16,64,64,14,14,new $e(56,new Ve(2,140))),new r(17,72,72,16,16,new $e(36,new Ve(4,92))),new r(18,80,80,18,18,new $e(48,new Ve(4,114))),new r(19,88,88,20,20,new $e(56,new Ve(4,144))),new r(20,96,96,22,22,new $e(68,new Ve(4,174))),new r(21,104,104,24,24,new $e(56,new Ve(6,136))),new r(22,120,120,18,18,new $e(68,new Ve(6,175))),new r(23,132,132,20,20,new $e(62,new Ve(8,163))),new r(24,144,144,22,22,new $e(62,new Ve(8,156),new Ve(2,155))),new r(25,8,18,6,16,new $e(7,new Ve(1,5))),new r(26,8,32,6,14,new $e(11,new Ve(1,10))),new r(27,12,26,10,24,new $e(14,new Ve(1,16))),new r(28,12,36,10,16,new $e(18,new Ve(1,22))),new r(29,16,36,14,16,new $e(24,new Ve(1,32))),new r(30,16,48,14,22,new $e(28,new Ve(1,49)))]},r.VERSIONS=r.buildVersions(),r})(),KO=(function(){function r(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new Z;this.version=r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new On(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return r.prototype.getVersion=function(){return this.version},r.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return XO.getVersionForDimensions(t,n)},r.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,u=!1,l=!1;do if(n===o&&i===0&&!a)e[t++]=this.readCorner1(o,s)&255,n-=2,i+=2,a=!0;else if(n===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,n-=2,i+=2,c=!0;else if(n===o+4&&i===2&&(s&7)===0&&!u)e[t++]=this.readCorner3(o,s)&255,n-=2,i+=2,u=!0;else if(n===o-2&&i===0&&(s&7)===4&&!l)e[t++]=this.readCorner4(o,s)&255,n-=2,i+=2,l=!0;else{do n<o&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,s)&255),n-=2,i+=2;while(n>=0&&i<s);n+=1,i+=3;do n>=0&&i<s&&!this.readMappingMatrix.get(i,n)&&(e[t++]=this.readUtah(n,i,o,s)&255),n+=2,i-=2;while(n<o&&i>=0);n+=3,i+=1}while(n<o||i<s);if(t!==this.version.getTotalCodewords())throw new Z;return e},r.prototype.readModule=function(e,t,n,i){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},r.prototype.readUtah=function(e,t,n,i){var o=0;return this.readModule(e-2,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e-1,t,n,i)&&(o|=1),o<<=1,this.readModule(e,t-2,n,i)&&(o|=1),o<<=1,this.readModule(e,t-1,n,i)&&(o|=1),o<<=1,this.readModule(e,t,n,i)&&(o|=1),o},r.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},r.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},r.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new fe("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,a=n/o|0,c=s*i,u=a*o,l=new On(u,c),h=0;h<s;++h)for(var d=h*i,p=0;p<a;++p)for(var v=p*o,y=0;y<i;++y)for(var w=h*(i+2)+1+y,_=d+y,x=0;x<o;++x){var T=p*(o+2)+1+x;if(e.get(T,w)){var D=v+x;l.set(D,_)}}return l},r})(),Bg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YO=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t){var n,i,o,s,a=t.getECBlocks(),c=0,u=a.getECBlocks();try{for(var l=Bg(u),h=l.next();!h.done;h=l.next()){var d=h.value;c+=d.getCount()}}catch(Ke){n={error:Ke}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}var p=new Array(c),v=0;try{for(var y=Bg(u),w=y.next();!w.done;w=y.next())for(var d=w.value,_=0;_<d.getCount();_++){var x=d.getDataCodewords(),T=a.getECCodewords()+x;p[v++]=new r(x,new Uint8Array(T))}}catch(Ke){o={error:Ke}}finally{try{w&&!w.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}for(var D=p[0].codewords.length,F=D-a.getECCodewords(),H=F-1,C=0,_=0;_<H;_++)for(var A=0;A<v;A++)p[A].codewords[_]=e[C++];for(var b=t.getVersionNumber()===24,P=b?8:v,A=0;A<P;A++)p[A].codewords[F-1]=e[C++];for(var N=p[0].codewords.length,_=F;_<N;_++)for(var A=0;A<v;A++){var M=b?(A+8)%v:A,S=b&&M>7?_-1:_;p[M].codewords[S]=e[C++]}if(C!==e.length)throw new fe;return p},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),Qw=(function(){function r(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return r.prototype.getBitOffset=function(){return this.bitOffset},r.prototype.getByteOffset=function(){return this.byteOffset},r.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new fe(""+e);var t=0,n=this.bitOffset,i=this.byteOffset,o=this.bytes;if(n>0){var s=8-n,a=e<s?e:s,c=s-a,u=255>>8-a<<c;t=(o[i]&u)>>c,e-=a,n+=a,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;t=t<<e|(o[i]&u)>>c,n+=e}}return this.bitOffset=n,this.byteOffset=i,t},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r})(),Ct;(function(r){r[r.PAD_ENCODE=0]="PAD_ENCODE",r[r.ASCII_ENCODE=1]="ASCII_ENCODE",r[r.C40_ENCODE=2]="C40_ENCODE",r[r.TEXT_ENCODE=3]="TEXT_ENCODE",r[r.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",r[r.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",r[r.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));var QO=(function(){function r(){}return r.decode=function(e){var t=new Qw(e),n=new Ce,i=new Ce,o=new Array,s=Ct.ASCII_ENCODE;do if(s===Ct.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,i);else{switch(s){case Ct.C40_ENCODE:this.decodeC40Segment(t,n);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(t,n,o);break;default:throw new Z}s=Ct.ASCII_ENCODE}while(s!==Ct.PAD_ENCODE&&t.available()>0);return i.length()>0&&n.append(i.toString()),new El(e,n.toString(),o.length===0?null:o,null)},r.decodeAsciiSegment=function(e,t,n){var i=!1;do{var o=e.readBits(8);if(o===0)throw new Z;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),Ct.ASCII_ENCODE;if(o===129)return Ct.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new Z;break}}while(e.available()>0);return Ct.ASCII_ENCODE},r.decodeC40Segment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new Z;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new Z}o=0;break;case 3:n?(t.append(String.fromCharCode(c+224)),n=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new Z}}}while(e.available()>0)},r.decodeTextSegment=function(e,t){var n=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new Z;break;case 1:n?(t.append(String.fromCharCode(c+128)),n=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:n=!0;break;default:throw new Z}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u),o=0}else throw new Z;break;default:throw new Z}}}while(e.available()>0)},r.decodeAnsiX12Segment=function(e,t){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var o=0;o<3;o++){var s=n[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new Z;break}}}while(e.available()>0)},r.parseTwoBytes=function(e,t,n){var i=(e<<8)+t-1,o=Math.floor(i/1600);n[0]=o,i-=o*1600,o=Math.floor(i/40),n[1]=o,n[2]=i-o*40},r.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},r.decodeBase256Segment=function(e,t,n){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new Z;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new Z;a[c]=this.unrandomize255State(e.readBits(8),i++)}n.push(a);try{t.append(Kr.decode(a,Ne.ISO88591))}catch(u){throw new Ka("Platform does not support required encoding: "+u.message)}},r.unrandomize255State=function(e,t){var n=149*t%255+1,i=e-n;return i>=0?i:i+256},r.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],r.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r.TEXT_SHIFT2_SET_CHARS=r.C40_SHIFT2_SET_CHARS,r.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],r})(),ZO=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JO=(function(){function r(){this.rsDecoder=new Al(Cr.DATA_MATRIX_FIELD_256)}return r.prototype.decode=function(e){var t,n,i=new KO(e),o=i.getVersion(),s=i.readCodewords(),a=YO.getDataBlocks(s,o),c=0;try{for(var u=ZO(a),l=u.next();!l.done;l=u.next()){var h=l.value;c+=h.getNumDataCodewords()}}catch(T){t={error:T}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}for(var d=new Uint8Array(c),p=a.length,v=0;v<p;v++){var y=a[v],w=y.getCodewords(),_=y.getNumDataCodewords();this.correctErrors(w,_);for(var x=0;x<_;x++)d[x*p+v]=w[x]}return QO.decode(d)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Et}for(var i=0;i<t;i++)e[i]=n[i]},r})(),e5=(function(){function r(e){this.image=e,this.rectangleDetector=new vh(this.image)}return r.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new $;t=this.shiftToModuleCenter(t);var n=t[0],i=t[1],o=t[2],s=t[3],a=this.transitionsBetween(n,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var u=r.sampleGrid(this.image,n,i,o,s,a,c);return new Kd(u,[n,i,o,s])},r.shiftPoint=function(e,t,n){var i=(t.getX()-e.getX())/(n+1),o=(t.getY()-e.getY())/(n+1);return new ae(e.getX()+i,e.getY()+o)},r.moveAway=function(e,t,n){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<n?o-=1:o+=1,new ae(i,o)},r.prototype.detectSolid1=function(e){var t=e[0],n=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,n),a=this.transitionsBetween(n,i),c=this.transitionsBetween(i,o),u=this.transitionsBetween(o,t),l=s,h=[o,t,n,i];return l>a&&(l=a,h[0]=t,h[1]=n,h[2]=i,h[3]=o),l>c&&(l=c,h[0]=n,h[1]=i,h[2]=o,h[3]=t),l>u&&(h[0]=i,h[1]=o,h[2]=t,h[3]=n),h},r.prototype.detectSolid2=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=r.shiftPoint(n,i,(s+1)*4),c=r.shiftPoint(i,n,(s+1)*4),u=this.transitionsBetween(a,t),l=this.transitionsBetween(c,o);return u<l?(e[0]=t,e[1]=n,e[2]=i,e[3]=o):(e[0]=n,e[1]=i,e[2]=o,e[3]=t),e},r.prototype.correctTopRight=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=this.transitionsBetween(n,o),c=r.shiftPoint(t,n,(a+1)*4),u=r.shiftPoint(i,n,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(u,o);var l=new ae(o.getX()+(i.getX()-n.getX())/(s+1),o.getY()+(i.getY()-n.getY())/(s+1)),h=new ae(o.getX()+(t.getX()-n.getX())/(a+1),o.getY()+(t.getY()-n.getY())/(a+1));if(!this.isValid(l))return this.isValid(h)?h:null;if(!this.isValid(h))return l;var d=this.transitionsBetween(c,l)+this.transitionsBetween(u,l),p=this.transitionsBetween(c,h)+this.transitionsBetween(u,h);return d>p?l:h},r.prototype.shiftToModuleCenter=function(e){var t=e[0],n=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,a=this.transitionsBetween(i,o)+1,c=r.shiftPoint(t,n,a*4),u=r.shiftPoint(i,n,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(u,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var l=(t.getX()+n.getX()+i.getX()+o.getX())/4,h=(t.getY()+n.getY()+i.getY()+o.getY())/4;t=r.moveAway(t,l,h),n=r.moveAway(n,l,h),i=r.moveAway(i,l,h),o=r.moveAway(o,l,h);var d,p;return c=r.shiftPoint(t,n,a*4),c=r.shiftPoint(c,o,s*4),d=r.shiftPoint(n,t,a*4),d=r.shiftPoint(d,i,s*4),u=r.shiftPoint(i,o,a*4),u=r.shiftPoint(u,n,s*4),p=r.shiftPoint(o,i,a*4),p=r.shiftPoint(p,t,s*4),[c,d,u,p]},r.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},r.sampleGrid=function(e,t,n,i,o,s,a){var c=Yd.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),n.getX(),n.getY())},r.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(o-n);if(a){var c=n;n=i,i=c,c=o,o=s,s=c}for(var u=Math.abs(o-n),l=Math.abs(s-i),h=-u/2,d=i<s?1:-1,p=n<o?1:-1,v=0,y=this.image.get(a?i:n,a?n:i),w=n,_=i;w!==o;w+=p){var x=this.image.get(a?_:w,a?w:_);if(x!==y&&(v++,y=x),h+=l,h>0){if(_===s)break;_+=d,h-=u}}return v},r})(),Du=(function(){function r(){this.decoder=new JO}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n,i;if(t!=null&&t.has(tt.PURE_BARCODE)){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(o),i=r.NO_POINTS}else{var s=new e5(e.getBlackMatrix()).detect();n=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=n.getRawBytes(),c=new lr(n.getText(),a,8*a.length,i,le.DATA_MATRIX,et.currentTimeMillis()),u=n.getByteSegments();u!=null&&c.putMetadata(Kt.BYTE_SEGMENTS,u);var l=n.getECLevel();return l!=null&&c.putMetadata(Kt.ERROR_CORRECTION_LEVEL,l),c},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new $;var i=this.moduleSize(t,e),o=t[1],s=n[1],a=t[0],c=n[0],u=(c-a+1)/i,l=(s-o+1)/i;if(u<=0||l<=0)throw new $;var h=i/2;o+=h,a+=h;for(var d=new On(u,l),p=0;p<l;p++)for(var v=o+p*i,y=0;y<u;y++)e.get(a+y*i,v)&&d.set(y,p);return d},r.moduleSize=function(e,t){for(var n=t.getWidth(),i=e[0],o=e[1];i<n&&t.get(i,o);)i++;if(i===n)throw new $;var s=i-e[0];if(s===0)throw new $;return s},r.NO_POINTS=[],r})(),t5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){t5(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Du,t)||this}return e})(Es);var No;(function(r){r[r.L=0]="L",r[r.M=1]="M",r[r.Q=2]="Q",r[r.H=3]="H"})(No||(No={}));var r5=(function(){function r(e,t,n){this.value=e,this.stringValue=t,this.bits=n,r.FOR_BITS.set(n,this),r.FOR_VALUE.set(e,this)}return r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.fromString=function(e){switch(e){case"L":return r.L;case"M":return r.M;case"Q":return r.Q;case"H":return r.H;default:throw new yt(e+"not available")}},r.prototype.toString=function(){return this.stringValue},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.forBits=function(e){if(e<0||e>=r.FOR_BITS.size)throw new fe;return r.FOR_BITS.get(e)},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.L=new r(No.L,"L",1),r.M=new r(No.M,"M",0),r.Q=new r(No.Q,"Q",3),r.H=new r(No.H,"H",2),r})(),n5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zw=(function(){function r(e){this.errorCorrectionLevel=r5.forBits(e>>3&3),this.dataMask=e&7}return r.numBitsDiffering=function(e,t){return Te.bitCount(e^t)},r.decodeFormatInformation=function(e,t){var n=r.doDecodeFormatInformation(e,t);return n!==null?n:r.doDecodeFormatInformation(e^r.FORMAT_INFO_MASK_QR,t^r.FORMAT_INFO_MASK_QR)},r.doDecodeFormatInformation=function(e,t){var n,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=n5(r.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var u=c.value,l=u[0];if(l===e||l===t)return new r(u[1]);var h=r.numBitsDiffering(e,l);h<o&&(s=u[1],o=h),e!==t&&(h=r.numBitsDiffering(t,l),h<o&&(s=u[1],o=h))}}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o<=3?new r(s):null},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getDataMask=function(){return this.dataMask},r.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},r.FORMAT_INFO_MASK_QR=21522,r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],r})(),i5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B=(function(){function r(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return r.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},r.prototype.getNumBlocks=function(){var e,t,n=0,i=this.ecBlocks;try{for(var o=i5(i),s=o.next();!s.done;s=o.next()){var a=s.value;n+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},r.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},r.prototype.getECBlocks=function(){return this.ecBlocks},r})(),I=(function(){function r(e,t){this.count=e,this.dataCodewords=t}return r.prototype.getCount=function(){return this.count},r.prototype.getDataCodewords=function(){return this.dataCodewords},r})(),o5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ro=(function(){function r(e,t){for(var n,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var l=o5(u),h=l.next();!h.done;h=l.next()){var d=h.value;a+=d.getCount()*(d.getDataCodewords()+c)}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}this.totalCodewords=a}return r.prototype.getVersionNumber=function(){return this.versionNumber},r.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},r.prototype.getTotalCodewords=function(){return this.totalCodewords},r.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},r.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},r.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Z;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Z}},r.getVersionForNumber=function(e){if(e<1||e>40)throw new fe;return r.VERSIONS[e-1]},r.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,n=0,i=0;i<r.VERSION_DECODE_INFO.length;i++){var o=r.VERSION_DECODE_INFO[i];if(o===e)return r.getVersionForNumber(i+7);var s=Zw.numBitsDiffering(e,o);s<t&&(n=i+7,t=s)}return t<=3?r.getVersionForNumber(n):null},r.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new On(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<n;s++)i===0&&(s===0||s===n-1)||i===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},r.prototype.toString=function(){return""+this.versionNumber},r.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),r.VERSIONS=[new r(1,new Int32Array(0),new B(7,new I(1,19)),new B(10,new I(1,16)),new B(13,new I(1,13)),new B(17,new I(1,9))),new r(2,Int32Array.from([6,18]),new B(10,new I(1,34)),new B(16,new I(1,28)),new B(22,new I(1,22)),new B(28,new I(1,16))),new r(3,Int32Array.from([6,22]),new B(15,new I(1,55)),new B(26,new I(1,44)),new B(18,new I(2,17)),new B(22,new I(2,13))),new r(4,Int32Array.from([6,26]),new B(20,new I(1,80)),new B(18,new I(2,32)),new B(26,new I(2,24)),new B(16,new I(4,9))),new r(5,Int32Array.from([6,30]),new B(26,new I(1,108)),new B(24,new I(2,43)),new B(18,new I(2,15),new I(2,16)),new B(22,new I(2,11),new I(2,12))),new r(6,Int32Array.from([6,34]),new B(18,new I(2,68)),new B(16,new I(4,27)),new B(24,new I(4,19)),new B(28,new I(4,15))),new r(7,Int32Array.from([6,22,38]),new B(20,new I(2,78)),new B(18,new I(4,31)),new B(18,new I(2,14),new I(4,15)),new B(26,new I(4,13),new I(1,14))),new r(8,Int32Array.from([6,24,42]),new B(24,new I(2,97)),new B(22,new I(2,38),new I(2,39)),new B(22,new I(4,18),new I(2,19)),new B(26,new I(4,14),new I(2,15))),new r(9,Int32Array.from([6,26,46]),new B(30,new I(2,116)),new B(22,new I(3,36),new I(2,37)),new B(20,new I(4,16),new I(4,17)),new B(24,new I(4,12),new I(4,13))),new r(10,Int32Array.from([6,28,50]),new B(18,new I(2,68),new I(2,69)),new B(26,new I(4,43),new I(1,44)),new B(24,new I(6,19),new I(2,20)),new B(28,new I(6,15),new I(2,16))),new r(11,Int32Array.from([6,30,54]),new B(20,new I(4,81)),new B(30,new I(1,50),new I(4,51)),new B(28,new I(4,22),new I(4,23)),new B(24,new I(3,12),new I(8,13))),new r(12,Int32Array.from([6,32,58]),new B(24,new I(2,92),new I(2,93)),new B(22,new I(6,36),new I(2,37)),new B(26,new I(4,20),new I(6,21)),new B(28,new I(7,14),new I(4,15))),new r(13,Int32Array.from([6,34,62]),new B(26,new I(4,107)),new B(22,new I(8,37),new I(1,38)),new B(24,new I(8,20),new I(4,21)),new B(22,new I(12,11),new I(4,12))),new r(14,Int32Array.from([6,26,46,66]),new B(30,new I(3,115),new I(1,116)),new B(24,new I(4,40),new I(5,41)),new B(20,new I(11,16),new I(5,17)),new B(24,new I(11,12),new I(5,13))),new r(15,Int32Array.from([6,26,48,70]),new B(22,new I(5,87),new I(1,88)),new B(24,new I(5,41),new I(5,42)),new B(30,new I(5,24),new I(7,25)),new B(24,new I(11,12),new I(7,13))),new r(16,Int32Array.from([6,26,50,74]),new B(24,new I(5,98),new I(1,99)),new B(28,new I(7,45),new I(3,46)),new B(24,new I(15,19),new I(2,20)),new B(30,new I(3,15),new I(13,16))),new r(17,Int32Array.from([6,30,54,78]),new B(28,new I(1,107),new I(5,108)),new B(28,new I(10,46),new I(1,47)),new B(28,new I(1,22),new I(15,23)),new B(28,new I(2,14),new I(17,15))),new r(18,Int32Array.from([6,30,56,82]),new B(30,new I(5,120),new I(1,121)),new B(26,new I(9,43),new I(4,44)),new B(28,new I(17,22),new I(1,23)),new B(28,new I(2,14),new I(19,15))),new r(19,Int32Array.from([6,30,58,86]),new B(28,new I(3,113),new I(4,114)),new B(26,new I(3,44),new I(11,45)),new B(26,new I(17,21),new I(4,22)),new B(26,new I(9,13),new I(16,14))),new r(20,Int32Array.from([6,34,62,90]),new B(28,new I(3,107),new I(5,108)),new B(26,new I(3,41),new I(13,42)),new B(30,new I(15,24),new I(5,25)),new B(28,new I(15,15),new I(10,16))),new r(21,Int32Array.from([6,28,50,72,94]),new B(28,new I(4,116),new I(4,117)),new B(26,new I(17,42)),new B(28,new I(17,22),new I(6,23)),new B(30,new I(19,16),new I(6,17))),new r(22,Int32Array.from([6,26,50,74,98]),new B(28,new I(2,111),new I(7,112)),new B(28,new I(17,46)),new B(30,new I(7,24),new I(16,25)),new B(24,new I(34,13))),new r(23,Int32Array.from([6,30,54,78,102]),new B(30,new I(4,121),new I(5,122)),new B(28,new I(4,47),new I(14,48)),new B(30,new I(11,24),new I(14,25)),new B(30,new I(16,15),new I(14,16))),new r(24,Int32Array.from([6,28,54,80,106]),new B(30,new I(6,117),new I(4,118)),new B(28,new I(6,45),new I(14,46)),new B(30,new I(11,24),new I(16,25)),new B(30,new I(30,16),new I(2,17))),new r(25,Int32Array.from([6,32,58,84,110]),new B(26,new I(8,106),new I(4,107)),new B(28,new I(8,47),new I(13,48)),new B(30,new I(7,24),new I(22,25)),new B(30,new I(22,15),new I(13,16))),new r(26,Int32Array.from([6,30,58,86,114]),new B(28,new I(10,114),new I(2,115)),new B(28,new I(19,46),new I(4,47)),new B(28,new I(28,22),new I(6,23)),new B(30,new I(33,16),new I(4,17))),new r(27,Int32Array.from([6,34,62,90,118]),new B(30,new I(8,122),new I(4,123)),new B(28,new I(22,45),new I(3,46)),new B(30,new I(8,23),new I(26,24)),new B(30,new I(12,15),new I(28,16))),new r(28,Int32Array.from([6,26,50,74,98,122]),new B(30,new I(3,117),new I(10,118)),new B(28,new I(3,45),new I(23,46)),new B(30,new I(4,24),new I(31,25)),new B(30,new I(11,15),new I(31,16))),new r(29,Int32Array.from([6,30,54,78,102,126]),new B(30,new I(7,116),new I(7,117)),new B(28,new I(21,45),new I(7,46)),new B(30,new I(1,23),new I(37,24)),new B(30,new I(19,15),new I(26,16))),new r(30,Int32Array.from([6,26,52,78,104,130]),new B(30,new I(5,115),new I(10,116)),new B(28,new I(19,47),new I(10,48)),new B(30,new I(15,24),new I(25,25)),new B(30,new I(23,15),new I(25,16))),new r(31,Int32Array.from([6,30,56,82,108,134]),new B(30,new I(13,115),new I(3,116)),new B(28,new I(2,46),new I(29,47)),new B(30,new I(42,24),new I(1,25)),new B(30,new I(23,15),new I(28,16))),new r(32,Int32Array.from([6,34,60,86,112,138]),new B(30,new I(17,115)),new B(28,new I(10,46),new I(23,47)),new B(30,new I(10,24),new I(35,25)),new B(30,new I(19,15),new I(35,16))),new r(33,Int32Array.from([6,30,58,86,114,142]),new B(30,new I(17,115),new I(1,116)),new B(28,new I(14,46),new I(21,47)),new B(30,new I(29,24),new I(19,25)),new B(30,new I(11,15),new I(46,16))),new r(34,Int32Array.from([6,34,62,90,118,146]),new B(30,new I(13,115),new I(6,116)),new B(28,new I(14,46),new I(23,47)),new B(30,new I(44,24),new I(7,25)),new B(30,new I(59,16),new I(1,17))),new r(35,Int32Array.from([6,30,54,78,102,126,150]),new B(30,new I(12,121),new I(7,122)),new B(28,new I(12,47),new I(26,48)),new B(30,new I(39,24),new I(14,25)),new B(30,new I(22,15),new I(41,16))),new r(36,Int32Array.from([6,24,50,76,102,128,154]),new B(30,new I(6,121),new I(14,122)),new B(28,new I(6,47),new I(34,48)),new B(30,new I(46,24),new I(10,25)),new B(30,new I(2,15),new I(64,16))),new r(37,Int32Array.from([6,28,54,80,106,132,158]),new B(30,new I(17,122),new I(4,123)),new B(28,new I(29,46),new I(14,47)),new B(30,new I(49,24),new I(10,25)),new B(30,new I(24,15),new I(46,16))),new r(38,Int32Array.from([6,32,58,84,110,136,162]),new B(30,new I(4,122),new I(18,123)),new B(28,new I(13,46),new I(32,47)),new B(30,new I(48,24),new I(14,25)),new B(30,new I(42,15),new I(32,16))),new r(39,Int32Array.from([6,26,54,82,110,138,166]),new B(30,new I(20,117),new I(4,118)),new B(28,new I(40,47),new I(7,48)),new B(30,new I(43,24),new I(22,25)),new B(30,new I(10,15),new I(67,16))),new r(40,Int32Array.from([6,30,58,86,114,142,170]),new B(30,new I(19,118),new I(6,119)),new B(28,new I(18,47),new I(31,48)),new B(30,new I(34,24),new I(34,25)),new B(30,new I(20,15),new I(61,16)))],r})(),Mt;(function(r){r[r.DATA_MASK_000=0]="DATA_MASK_000",r[r.DATA_MASK_001=1]="DATA_MASK_001",r[r.DATA_MASK_010=2]="DATA_MASK_010",r[r.DATA_MASK_011=3]="DATA_MASK_011",r[r.DATA_MASK_100=4]="DATA_MASK_100",r[r.DATA_MASK_101=5]="DATA_MASK_101",r[r.DATA_MASK_110=6]="DATA_MASK_110",r[r.DATA_MASK_111=7]="DATA_MASK_111"})(Mt||(Mt={}));var Fg=(function(){function r(e,t){this.value=e,this.isMasked=t}return r.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var i=0;i<t;i++)this.isMasked(n,i)&&e.flip(i,n)},r.values=new Map([[Mt.DATA_MASK_000,new r(Mt.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Mt.DATA_MASK_001,new r(Mt.DATA_MASK_001,function(e,t){return(e&1)===0})],[Mt.DATA_MASK_010,new r(Mt.DATA_MASK_010,function(e,t){return t%3===0})],[Mt.DATA_MASK_011,new r(Mt.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Mt.DATA_MASK_100,new r(Mt.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Mt.DATA_MASK_101,new r(Mt.DATA_MASK_101,function(e,t){return e*t%6===0})],[Mt.DATA_MASK_110,new r(Mt.DATA_MASK_110,function(e,t){return e*t%6<3})],[Mt.DATA_MASK_111,new r(Mt.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),r})(),s5=(function(){function r(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new Z;this.bitMatrix=e}return r.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,n=i-1;n>=s;n--)o=this.copyBit(8,n,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=Zw.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Z},r.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return ro.getVersionForNumber(t);for(var n=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)n=this.copyBit(s,o,n);var a=ro.decodeVersionInformation(n);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;n=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)n=this.copyBit(s,o,n);if(a=ro.decodeVersionInformation(n),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new Z},r.prototype.copyBit=function(e,t,n){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?n<<1|1:n<<1},r.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=Fg.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),c=0,u=0,l=0,h=i-1;h>0;h-=2){h===6&&h--;for(var d=0;d<i;d++)for(var p=s?i-1-d:d,v=0;v<2;v++)o.get(h-v,p)||(l++,u<<=1,this.bitMatrix.get(h-v,p)&&(u|=1),l===8&&(a[c++]=u,l=0,u=0));s=!s}if(c!==t.getTotalCodewords())throw new Z;return a},r.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Fg.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},r.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},r.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},r})(),Vg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a5=(function(){function r(e,t){this.numDataCodewords=e,this.codewords=t}return r.getDataBlocks=function(e,t,n){var i,o,s,a;if(e.length!==t.getTotalCodewords())throw new fe;var c=t.getECBlocksForLevel(n),u=0,l=c.getECBlocks();try{for(var h=Vg(l),d=h.next();!d.done;d=h.next()){var p=d.value;u+=p.getCount()}}catch(S){i={error:S}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var v=new Array(u),y=0;try{for(var w=Vg(l),_=w.next();!_.done;_=w.next())for(var p=_.value,x=0;x<p.getCount();x++){var T=p.getDataCodewords(),D=c.getECCodewordsPerBlock()+T;v[y++]=new r(T,new Uint8Array(D))}}catch(S){s={error:S}}finally{try{_&&!_.done&&(a=w.return)&&a.call(w)}finally{if(s)throw s.error}}for(var F=v[0].codewords.length,H=v.length-1;H>=0;){var C=v[H].codewords.length;if(C===F)break;H--}H++;for(var A=F-c.getECCodewordsPerBlock(),b=0,x=0;x<A;x++)for(var P=0;P<y;P++)v[P].codewords[x]=e[b++];for(var P=H;P<y;P++)v[P].codewords[A]=e[b++];for(var N=v[0].codewords.length,x=A;x<N;x++)for(var P=0;P<y;P++){var M=P<H?x:x+1;v[P].codewords[M]=e[b++]}return v},r.prototype.getNumDataCodewords=function(){return this.numDataCodewords},r.prototype.getCodewords=function(){return this.codewords},r})(),$r;(function(r){r[r.TERMINATOR=0]="TERMINATOR",r[r.NUMERIC=1]="NUMERIC",r[r.ALPHANUMERIC=2]="ALPHANUMERIC",r[r.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",r[r.BYTE=4]="BYTE",r[r.ECI=5]="ECI",r[r.KANJI=6]="KANJI",r[r.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",r[r.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",r[r.HANZI=9]="HANZI"})($r||($r={}));var ot=(function(){function r(e,t,n,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=i,r.FOR_BITS.set(i,this),r.FOR_VALUE.set(e,this)}return r.forBits=function(e){var t=r.FOR_BITS.get(e);if(t===void 0)throw new fe;return t},r.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]},r.prototype.getValue=function(){return this.value},r.prototype.getBits=function(){return this.bits},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;return this.value===t.value},r.prototype.toString=function(){return this.stringValue},r.FOR_BITS=new Map,r.FOR_VALUE=new Map,r.TERMINATOR=new r($r.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),r.NUMERIC=new r($r.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),r.ALPHANUMERIC=new r($r.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),r.STRUCTURED_APPEND=new r($r.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),r.BYTE=new r($r.BYTE,"BYTE",Int32Array.from([8,16,16]),4),r.ECI=new r($r.ECI,"ECI",Int32Array.from([0,0,0]),7),r.KANJI=new r($r.KANJI,"KANJI",Int32Array.from([8,10,12]),8),r.FNC1_FIRST_POSITION=new r($r.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),r.FNC1_SECOND_POSITION=new r($r.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),r.HANZI=new r($r.HANZI,"HANZI",Int32Array.from([8,10,12]),13),r})(),c5=(function(){function r(){}return r.decode=function(e,t,n,i){var o=new Qw(e),s=new Ce,a=new Array,c=-1,u=-1;try{var l=null,h=!1,d=void 0;do{if(o.available()<4)d=ot.TERMINATOR;else{var p=o.readBits(4);d=ot.forBits(p)}switch(d){case ot.TERMINATOR:break;case ot.FNC1_FIRST_POSITION:case ot.FNC1_SECOND_POSITION:h=!0;break;case ot.STRUCTURED_APPEND:if(o.available()<16)throw new Z;c=o.readBits(8),u=o.readBits(8);break;case ot.ECI:var v=r.parseECIValue(o);if(l=Rt.getCharacterSetECIByValue(v),l===null)throw new Z;break;case ot.HANZI:var y=o.readBits(4),w=o.readBits(d.getCharacterCountBits(t));y===r.GB2312_SUBSET&&r.decodeHanziSegment(o,s,w);break;default:var _=o.readBits(d.getCharacterCountBits(t));switch(d){case ot.NUMERIC:r.decodeNumericSegment(o,s,_);break;case ot.ALPHANUMERIC:r.decodeAlphanumericSegment(o,s,_,h);break;case ot.BYTE:r.decodeByteSegment(o,s,_,l,a,i);break;case ot.KANJI:r.decodeKanjiSegment(o,s,_);break;default:throw new Z}break}}while(d!==ot.TERMINATOR)}catch{throw new Z}return new El(e,s.toString(),a.length===0?null:a,n===null?null:n.toString(),c,u)},r.decodeHanziSegment=function(e,t,n){if(n*13>e.available())throw new Z;for(var i=new Uint8Array(2*n),o=0;n>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,n--}try{t.append(Kr.decode(i,Ne.GB2312))}catch(c){throw new Z(c)}},r.decodeKanjiSegment=function(e,t,n){if(n*13>e.available())throw new Z;for(var i=new Uint8Array(2*n),o=0;n>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,n--}try{t.append(Kr.decode(i,Ne.SHIFT_JIS))}catch(c){throw new Z(c)}},r.decodeByteSegment=function(e,t,n,i,o,s){if(8*n>e.available())throw new Z;for(var a=new Uint8Array(n),c=0;c<n;c++)a[c]=e.readBits(8);var u;i===null?u=Ne.guessEncoding(a,s):u=i.getName();try{t.append(Kr.decode(a,u))}catch(l){throw new Z(l)}o.push(a)},r.toAlphaNumericChar=function(e){if(e>=r.ALPHANUMERIC_CHARS.length)throw new Z;return r.ALPHANUMERIC_CHARS[e]},r.decodeAlphanumericSegment=function(e,t,n,i){for(var o=t.length();n>1;){if(e.available()<11)throw new Z;var s=e.readBits(11);t.append(r.toAlphaNumericChar(Math.floor(s/45))),t.append(r.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new Z;t.append(r.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},r.decodeNumericSegment=function(e,t,n){for(;n>=3;){if(e.available()<10)throw new Z;var i=e.readBits(10);if(i>=1e3)throw new Z;t.append(r.toAlphaNumericChar(Math.floor(i/100))),t.append(r.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(r.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new Z;var o=e.readBits(7);if(o>=100)throw new Z;t.append(r.toAlphaNumericChar(Math.floor(o/10))),t.append(r.toAlphaNumericChar(o%10))}else if(n===1){if(e.available()<4)throw new Z;var s=e.readBits(4);if(s>=10)throw new Z;t.append(r.toAlphaNumericChar(s))}},r.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new Z},r.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r.GB2312_SUBSET=1,r})(),Jw=(function(){function r(e){this.mirrored=e}return r.prototype.isMirrored=function(){return this.mirrored},r.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},r})(),Ug=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u5=(function(){function r(){this.rsDecoder=new Al(Cr.QR_CODE_FIELD_256)}return r.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(On.parseFromBooleanArray(e),t)},r.prototype.decodeBitMatrix=function(e,t){var n=new s5(e),i=null;try{return this.decodeBitMatrixParser(n,t)}catch(s){i=s}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var o=this.decodeBitMatrixParser(n,t);return o.setOther(new Jw(!0)),o}catch(s){throw i!==null?i:s}},r.prototype.decodeBitMatrixParser=function(e,t){var n,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),l=a5.getDataBlocks(u,a,c),h=0;try{for(var d=Ug(l),p=d.next();!p.done;p=d.next()){var v=p.value;h+=v.getNumDataCodewords()}}catch(H){n={error:H}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var y=new Uint8Array(h),w=0;try{for(var _=Ug(l),x=_.next();!x.done;x=_.next()){var v=x.value,T=v.getCodewords(),D=v.getNumDataCodewords();this.correctErrors(T,D);for(var F=0;F<D;F++)y[w++]=T[F]}}catch(H){o={error:H}}finally{try{x&&!x.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}return c5.decode(y,a,c,t)},r.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new Et}for(var i=0;i<t;i++)e[i]=n[i]},r})(),l5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),f5=(function(r){l5(e,r);function e(t,n,i){var o=r.call(this,t,n)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=(this.getX()+n)/2,s=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e})(ae),h5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d5=(function(){function r(e,t,n,i,o,s,a){this.image=e,this.startX=t,this.startY=n,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return r.prototype.find=function(){for(var e=this.startX,t=this.height,n=this.width,i=e+n,o=this.startY+t/2,s=new Int32Array(3),a=this.image,c=0;c<t;c++){var u=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var l=e;l<i&&!a.get(l,u);)l++;for(var h=0;l<i;){if(a.get(l,u))if(h===1)s[1]++;else if(h===2){if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,u,l);if(d!==null)return d}s[0]=s[2],s[1]=1,s[2]=0,h=1}else s[++h]++;else h===1&&h++,s[h]++;l++}if(this.foundPatternCross(s)){var d=this.handlePossibleCenter(s,u,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $},r.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},r.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=n)return!1;return!0},r.prototype.crossCheckVertical=function(e,t,n,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(t,c)&&a[1]<=n;)a[1]++,c--;if(c<0||a[1]>n)return NaN;for(;c>=0&&!o.get(t,c)&&a[0]<=n;)a[0]++,c--;if(a[0]>n)return NaN;for(c=e+1;c<s&&o.get(t,c)&&a[1]<=n;)a[1]++,c++;if(c===s||a[1]>n)return NaN;for(;c<s&&!o.get(t,c)&&a[2]<=n;)a[2]++,c++;if(a[2]>n)return NaN;var u=a[0]+a[1]+a[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(a)?r.centerFromEnd(a,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n){var i,o,s=e[0]+e[1]+e[2],a=r.centerFromEnd(e,n),c=this.crossCheckVertical(t,a,2*e[1],s);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var l=h5(this.possibleCenters),h=l.next();!h.done;h=l.next()){var d=h.value;if(d.aboutEquals(u,c,a))return d.combineEstimate(c,a,u)}}catch(v){i={error:v}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}var p=new f5(a,c,u);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null},r})(),p5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),g5=(function(r){p5(e,r);function e(t,n,i,o){var s=r.call(this,t,n)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,n,i){if(Math.abs(n-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,n,i){var o=this.count+1,s=(this.count*this.getX()+n)/o,a=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e})(ae),v5=(function(){function r(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r})(),Us=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m5=(function(){function r(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return r.prototype.getImage=function(){return this.image},r.prototype.getPossibleCenters=function(){return this.possibleCenters},r.prototype.find=function(e){var t=e!=null&&e.get(tt.TRY_HARDER)!==void 0,n=e!=null&&e.get(tt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*r.MAX_MODULES));(a<r.MIN_SKIP||t)&&(a=r.MIN_SKIP);for(var c=!1,u=new Int32Array(5),l=a-1;l<o&&!c;l+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var h=0,d=0;d<s;d++)if(i.get(d,l))(h&1)===1&&h++,u[h]++;else if((h&1)===0)if(h===4)if(r.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,d,n);if(p===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(l+=v-u[2]-a,d=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,h=3;continue}h=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,h=3;else u[++h]++;else u[h]++;if(r.foundPatternCross(u)){var p=this.handlePossibleCenter(u,l,s,n);p===!0&&(a=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return ae.orderBestPatterns(y),new v5(y)},r.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},r.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},r.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},r.prototype.crossCheckDiagonal=function(e,t,n,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&t>=s&&a.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&o[1]<=n;)o[1]++,s++;if(e<s||t<s||o[1]>n)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&o[0]<=n;)o[0]++,s++;if(o[0]>n)return!1;var c=a.getHeight(),u=a.getWidth();for(s=1;e+s<c&&t+s<u&&a.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=u)return!1;for(;e+s<c&&t+s<u&&!a.get(t+s,e+s)&&o[3]<n;)o[3]++,s++;if(e+s>=c||t+s>=u||o[3]>=n)return!1;for(;e+s<c&&t+s<u&&a.get(t+s,e+s)&&o[4]<n;)o[4]++,s++;if(o[4]>=n)return!1;var l=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(l-i)<2*i&&r.foundPatternCross(o)},r.prototype.crossCheckVertical=function(e,t,n,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&a[1]<=n;)a[1]++,c--;if(c<0||a[1]>n)return NaN;for(;c>=0&&o.get(t,c)&&a[0]<=n;)a[0]++,c--;if(a[0]>n)return NaN;for(c=e+1;c<s&&o.get(t,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&a[3]<n;)a[3]++,c++;if(c===s||a[3]>=n)return NaN;for(;c<s&&o.get(t,c)&&a[4]<n;)a[4]++,c++;if(a[4]>=n)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=2*i?NaN:r.foundPatternCross(a)?r.centerFromEnd(a,c):NaN},r.prototype.crossCheckHorizontal=function(e,t,n,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&a[1]<=n;)a[1]++,c--;if(c<0||a[1]>n)return NaN;for(;c>=0&&o.get(c,t)&&a[0]<=n;)a[0]++,c--;if(a[0]>n)return NaN;for(c=e+1;c<s&&o.get(c,t);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&a[3]<n;)a[3]++,c++;if(c===s||a[3]>=n)return NaN;for(;c<s&&o.get(c,t)&&a[4]<n;)a[4]++,c++;if(a[4]>=n)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=i?NaN:r.foundPatternCross(a)?r.centerFromEnd(a,c):NaN},r.prototype.handlePossibleCenter=function(e,t,n,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=r.centerFromEnd(e,n),a=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,u=!1,l=this.possibleCenters,h=0,d=l.length;h<d;h++){var p=l[h];if(p.aboutEquals(c,a,s)){l[h]=p.combineEstimate(a,s,c),u=!0;break}}if(!u){var v=new g5(s,a,c);l.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},r.prototype.findRowSkip=function(){var e,t,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var o=Us(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=r.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},r.prototype.haveMultiplyConfirmedCenters=function(){var e,t,n,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=Us(this.possibleCenters),u=c.next();!u.done;u=c.next()){var l=u.value;l.getCount()>=r.CENTER_QUORUM&&(o++,s+=l.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var h=s/a,d=0;try{for(var p=Us(this.possibleCenters),v=p.next();!v.done;v=p.next()){var l=v.value;d+=Math.abs(l.getEstimatedModuleSize()-h)}}catch(y){n={error:y}}finally{try{v&&!v.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}return d<=.05*s},r.prototype.selectBestPatterns=function(){var e,t,n,i,o=this.possibleCenters.length;if(o<3)throw new $;var s=this.possibleCenters,a;if(o>3){var c=0,u=0;try{for(var l=Us(this.possibleCenters),h=l.next();!h.done;h=l.next()){var d=h.value,p=d.getEstimatedModuleSize();c+=p,u+=p*p}}catch(F){e={error:F}}finally{try{h&&!h.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}a=c/o;var v=Math.sqrt(u/o-a*a);s.sort(function(F,H){var C=Math.abs(H.getEstimatedModuleSize()-a),A=Math.abs(F.getEstimatedModuleSize()-a);return C<A?-1:C>A?1:0});for(var y=Math.max(.2*a,v),w=0;w<s.length&&s.length>3;w++){var _=s[w];Math.abs(_.getEstimatedModuleSize()-a)>y&&(s.splice(w,1),w--)}}if(s.length>3){var c=0;try{for(var x=Us(s),T=x.next();!T.done;T=x.next()){var D=T.value;c+=D.getEstimatedModuleSize()}}catch(H){n={error:H}}finally{try{T&&!T.done&&(i=x.return)&&i.call(x)}finally{if(n)throw n.error}}a=c/s.length,s.sort(function(H,C){if(C.getCount()===H.getCount()){var A=Math.abs(C.getEstimatedModuleSize()-a),b=Math.abs(H.getEstimatedModuleSize()-a);return A<b?1:A>b?-1:0}else return C.getCount()-H.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},r.CENTER_QUORUM=2,r.MIN_SKIP=3,r.MAX_MODULES=57,r})(),y5=(function(){function r(e){this.image=e}return r.prototype.getImage=function(){return this.image},r.prototype.getResultPointCallback=function(){return this.resultPointCallback},r.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(tt.NEED_RESULT_POINT_CALLBACK);var t=new m5(this.image,this.resultPointCallback),n=t.find(e);return this.processFinderPatternInfo(n)},r.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,n,i);if(o<1)throw new $("No pattern found in proccess finder.");var s=r.computeDimension(t,n,i,o),a=ro.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var l=n.getX()-t.getX()+i.getX(),h=n.getY()-t.getY()+i.getY(),d=1-3/c,p=Math.floor(t.getX()+d*(l-t.getX())),v=Math.floor(t.getY()+d*(h-t.getY())),y=4;y<=16;y<<=1)try{u=this.findAlignmentInRegion(o,p,v,y);break}catch(T){if(!(T instanceof $))throw T}var w=r.createTransform(t,n,i,u,s),_=r.sampleGrid(this.image,w,s),x;return u===null?x=[i,t,n]:x=[i,t,n,u],new Kd(_,x)},r.createTransform=function(e,t,n,i,o){var s=o-3.5,a,c,u,l;return i!==null?(a=i.getX(),c=i.getY(),u=s-3,l=u):(a=t.getX()-e.getX()+n.getX(),c=t.getY()-e.getY()+n.getY(),u=s,l=s),qw.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,l,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,c,n.getX(),n.getY())},r.sampleGrid=function(e,t,n){var i=Yd.getInstance();return i.sampleGridWithTransform(e,n,n,t)},r.computeDimension=function(e,t,n,i){var o=Be.round(ae.distance(e,t)/i),s=Be.round(ae.distance(e,n)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new $("Dimensions could be not found.")}return a},r.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},r.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},r.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,n,i),s=1,a=e-(n-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,a,c),o-1},r.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,i){var o=Math.abs(i-t)>Math.abs(n-e);if(o){var s=e;e=t,t=s,s=n,n=i,i=s}for(var a=Math.abs(n-e),c=Math.abs(i-t),u=-a/2,l=e<n?1:-1,h=t<i?1:-1,d=0,p=n+l,v=e,y=t;v!==p;v+=l){var w=o?y:v,_=o?v:y;if(d===1===this.image.get(w,_)){if(d===2)return Be.distance(v,y,e,t);d++}if(u+=c,u>0){if(y===i)break;y+=h,u-=a}}return d===2?Be.distance(n+l,i,e,t):NaN},r.prototype.findAlignmentInRegion=function(e,t,n,i){var o=Math.floor(i*e),s=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-s<e*3)throw new $("Alignment top exceeds estimated module size.");var c=Math.max(0,n-o),u=Math.min(this.image.getHeight()-1,n+o);if(u-c<e*3)throw new $("Alignment bottom exceeds estimated module size.");var l=new d5(this.image,s,c,a-s,u-c,e,this.resultPointCallback);return l.find()},r})(),Nu=(function(){function r(){this.decoder=new u5}return r.prototype.getDecoder=function(){return this.decoder},r.prototype.decode=function(e,t){var n,i;if(t!=null&&t.get(tt.PURE_BARCODE)!==void 0){var o=r.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(o,t),i=r.NO_POINTS}else{var s=new y5(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}n.getOther()instanceof Jw&&n.getOther().applyMirroredCorrection(i);var a=new lr(n.getText(),n.getRawBytes(),void 0,i,le.QR_CODE,void 0),c=n.getByteSegments();c!==null&&a.putMetadata(Kt.BYTE_SEGMENTS,c);var u=n.getECLevel();return u!==null&&a.putMetadata(Kt.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(a.putMetadata(Kt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),a.putMetadata(Kt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),a},r.prototype.reset=function(){},r.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new $;var i=this.moduleSize(t,e),o=t[1],s=n[1],a=t[0],c=n[0];if(a>=c||o>=s)throw new $;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new $;var u=Math.round((c-a+1)/i),l=Math.round((s-o+1)/i);if(u<=0||l<=0)throw new $;if(l!==u)throw new $;var h=Math.floor(i/2);o+=h,a+=h;var d=a+Math.floor((u-1)*i)-c;if(d>0){if(d>h)throw new $;a-=d}var p=o+Math.floor((l-1)*i)-s;if(p>0){if(p>h)throw new $;o-=p}for(var v=new On(u,l),y=0;y<l;y++)for(var w=o+Math.floor(y*i),_=0;_<u;_++)e.get(a+Math.floor(_*i),w)&&v.set(_,y);return v},r.moduleSize=function(e,t){for(var n=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<n;){if(a!==t.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===n)throw new $;return(o-e[0])/7},r.NO_POINTS=new Array,r})(),w5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Me=(function(){function r(){}return r.prototype.PDF417Common=function(){},r.getBitCountSum=function(e){return Be.sum(e)},r.toIntArray=function(e){var t,n;if(e==null||!e.length)return r.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=w5(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},r.getCodeword=function(e){var t=Ot.binarySearch(r.SYMBOL_TABLE,e&262143);return t<0?-1:(r.CODEWORD_TABLE[t]-1)%r.NUMBER_OF_CODEWORDS},r.NUMBER_OF_CODEWORDS=929,r.MAX_CODEWORDS_IN_BARCODE=r.NUMBER_OF_CODEWORDS-1,r.MIN_ROWS_IN_BARCODE=3,r.MAX_ROWS_IN_BARCODE=90,r.MODULES_IN_CODEWORD=17,r.MODULES_IN_STOP_PATTERN=18,r.BARS_IN_MODULE=8,r.EMPTY_INT_ARRAY=new Int32Array([]),r.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),r.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),r})(),_5=(function(){function r(e,t){this.bits=e,this.points=t}return r.prototype.getBits=function(){return this.bits},r.prototype.getPoints=function(){return this.points},r})(),x5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E5=(function(){function r(){}return r.detectMultiple=function(e,t,n){var i=e.getBlackMatrix(),o=r.detect(n,i);return o.length||(i=i.clone(),i.rotate180(),o=r.detect(n,i)),new _5(i,o)},r.detect=function(e,t){for(var n,i,o=new Array,s=0,a=0,c=!1;s<t.getHeight();){var u=r.findVertices(t,s,a);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,a=0;try{for(var l=(n=void 0,x5(o)),h=l.next();!h.done;h=l.next()){var d=h.value;d[1]!=null&&(s=Math.trunc(Math.max(s,d[1].getY()))),d[3]!=null&&(s=Math.max(s,Math.trunc(d[3].getY())))}}catch(p){n={error:p}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}s+=r.ROW_STEP;continue}if(c=!0,o.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return o},r.findVertices=function(e,t,n){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return r.copyToResult(s,r.findRowsWithPattern(e,i,o,t,n,r.START_PATTERN),r.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),r.copyToResult(s,r.findRowsWithPattern(e,i,o,t,n,r.STOP_PATTERN),r.INDEXES_STOP_PATTERN),s},r.copyToResult=function(e,t,n){for(var i=0;i<n.length;i++)e[n[i]]=t[i]},r.findRowsWithPattern=function(e,t,n,i,o,s){for(var a=new Array(4),c=!1,u=new Int32Array(s.length);i<t;i+=r.ROW_STEP){var l=r.findGuardPattern(e,o,i,n,!1,s,u);if(l!=null){for(;i>0;){var h=r.findGuardPattern(e,o,--i,n,!1,s,u);if(h!=null)l=h;else{i++;break}}a[0]=new ae(l[0],i),a[1]=new ae(l[1],i),c=!0;break}}var d=i+1;if(c){for(var p=0,h=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);d<t;d++){var l=r.findGuardPattern(e,h[0],d,n,!1,s,u);if(l!=null&&Math.abs(h[0]-l[0])<r.MAX_PATTERN_DRIFT&&Math.abs(h[1]-l[1])<r.MAX_PATTERN_DRIFT)h=l,p=0;else{if(p>r.SKIPPED_ROW_COUNT_MAX)break;p++}}d-=p+1,a[2]=new ae(h[0],d),a[3]=new ae(h[1],d)}return d-i<r.BARCODE_MIN_HEIGHT&&Ot.fill(a,null),a},r.findGuardPattern=function(e,t,n,i,o,s,a){Ot.fillWithin(a,0,a.length,0);for(var c=t,u=0;e.get(c,n)&&c>0&&u++<r.MAX_PIXEL_DRIFT;)c--;for(var l=c,h=0,d=s.length,p=o;l<i;l++){var v=e.get(l,n);if(v!==p)a[h]++;else{if(h===d-1){if(r.patternMatchVariance(a,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE)return new Int32Array([c,l]);c+=a[0]+a[1],et.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,p=!p}}return h===d-1&&r.patternMatchVariance(a,s,r.MAX_INDIVIDUAL_VARIANCE)<r.MAX_AVG_VARIANCE?new Int32Array([c,l-1]):null},r.patternMatchVariance=function(e,t,n){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return 1/0;var c=o/s;n*=c;for(var u=0,l=0;l<i;l++){var h=e[l],d=t[l]*c,p=h>d?h-d:d-h;if(p>n)return 1/0;u+=p}return u/o},r.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),r.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),r.MAX_AVG_VARIANCE=.42,r.MAX_INDIVIDUAL_VARIANCE=.8,r.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),r.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),r.MAX_PIXEL_DRIFT=3,r.MAX_PATTERN_DRIFT=5,r.SKIPPED_ROW_COUNT_MAX=25,r.ROW_STEP=5,r.BARCODE_MIN_HEIGHT=10,r})(),A5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qi=(function(){function r(e,t){if(t.length===0)throw new fe;this.field=e;var n=t.length;if(n>1&&t[0]===0){for(var i=1;i<n&&t[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),et.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return r.prototype.getCoefficients=function(){return this.coefficients},r.prototype.getDegree=function(){return this.coefficients.length-1},r.prototype.isZero=function(){return this.coefficients[0]===0},r.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},r.prototype.evaluateAt=function(e){var t,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=A5(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],u=this.coefficients.length,l=1;l<u;l++)c=this.field.add(this.field.multiply(e,c),this.coefficients[l]);return c},r.prototype.add=function(e){if(!this.field.equals(e.field))throw new fe("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,n=e.coefficients;if(t.length>n.length){var i=t;t=n,n=i}var o=new Int32Array(n.length),s=n.length-t.length;et.arraycopy(n,0,o,0,s);for(var a=s;a<n.length;a++)o[a]=this.field.add(t[a-s],n[a]);return new r(this.field,o)},r.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new fe("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},r.prototype.multiply=function(e){return e instanceof r?this.multiplyOther(e):this.multiplyScalar(e)},r.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new fe("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new r(this.field,new Int32Array([0]));for(var t=this.coefficients,n=t.length,i=e.coefficients,o=i.length,s=new Int32Array(n+o-1),a=0;a<n;a++)for(var c=t[a],u=0;u<o;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(c,i[u]));return new r(this.field,s)},r.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new r(this.field,t)},r.prototype.multiplyScalar=function(e){if(e===0)return new r(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,n=new Int32Array(t),i=0;i<t;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new r(this.field,n)},r.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new fe;if(t===0)return new r(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),o=0;o<n;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new r(this.field,i)},r.prototype.toString=function(){for(var e=new Ce,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},r})(),I5=(function(){function r(){}return r.prototype.add=function(e,t){return(e+t)%this.modulus},r.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},r.prototype.exp=function(e){return this.expTable[e]},r.prototype.log=function(e){if(e===0)throw new fe;return this.logTable[e]},r.prototype.inverse=function(e){if(e===0)throw new zw;return this.expTable[this.modulus-this.logTable[e]-1]},r.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},r.prototype.getSize=function(){return this.modulus},r.prototype.equals=function(e){return e===this},r})(),C5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),b5=(function(r){C5(e,r);function e(t,n){var i=r.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*n%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Qi(i,new Int32Array([0])),i.one=new Qi(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,n){if(t<0)throw new fe;if(n===0)return this.zero;var i=new Int32Array(t+1);return i[0]=n,new Qi(this,i)},e.PDF417_GF=new e(Me.NUMBER_OF_CODEWORDS,3),e})(I5),T5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S5=(function(){function r(){this.field=b5.PDF417_GF}return r.prototype.decode=function(e,t,n){for(var i,o,s=new Qi(this.field,e),a=new Int32Array(t),c=!1,u=t;u>0;u--){var l=s.evaluateAt(this.field.exp(u));a[t-u]=l,l!==0&&(c=!0)}if(!c)return 0;var h=this.field.getOne();if(n!=null)try{for(var d=T5(n),p=d.next();!p.done;p=d.next()){var v=p.value,y=this.field.exp(e.length-1-v),w=new Qi(this.field,new Int32Array([this.field.subtract(0,y),1]));h=h.multiply(w)}}catch(A){i={error:A}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}for(var _=new Qi(this.field,a),x=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),_,t),T=x[0],D=x[1],F=this.findErrorLocations(T),H=this.findErrorMagnitudes(D,T,F),u=0;u<F.length;u++){var C=e.length-1-this.field.log(F[u]);if(C<0)throw Et.getChecksumInstance();e[C]=this.field.subtract(e[C],H[u])}return F.length},r.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(n/2);){var u=o,l=a;if(o=s,a=c,o.isZero())throw Et.getChecksumInstance();s=u;for(var h=this.field.getZero(),d=o.getCoefficient(o.getDegree()),p=this.field.inverse(d);s.getDegree()>=o.getDegree()&&!s.isZero();){var v=s.getDegree()-o.getDegree(),y=this.field.multiply(s.getCoefficient(s.getDegree()),p);h=h.add(this.field.buildMonomial(v,y)),s=s.subtract(o.multiplyByMonomial(v,y))}c=h.multiply(a).subtract(l).negative()}var w=c.getCoefficient(0);if(w===0)throw Et.getChecksumInstance();var _=this.field.inverse(w),x=c.multiply(_),T=s.multiply(_);return[x,T]},r.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(n[i]=this.field.inverse(o),i++);if(i!==t)throw Et.getChecksumInstance();return n},r.prototype.findErrorMagnitudes=function(e,t,n){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var a=new Qi(this.field,o),c=n.length,u=new Int32Array(c),s=0;s<c;s++){var l=this.field.inverse(n[s]),h=this.field.subtract(0,e.evaluateAt(l)),d=this.field.inverse(a.evaluateAt(l));u[s]=this.field.multiply(h,d)}return u},r})(),yh=(function(){function r(e,t,n,i,o){e instanceof r?this.constructor_2(e):this.constructor_1(e,t,n,i,o)}return r.prototype.constructor_1=function(e,t,n,i,o){var s=t==null||n==null,a=i==null||o==null;if(s&&a)throw new $;s?(t=new ae(0,i.getY()),n=new ae(0,o.getY())):a&&(i=new ae(e.getWidth()-1,t.getY()),o=new ae(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),o.getY()))},r.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},r.merge=function(e,t){return e==null?t:t==null?e:new r(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},r.prototype.addMissingRows=function(e,t,n){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=n?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var l=new ae(c.getX(),u);n?i=l:s=l}if(t>0){var h=n?this.bottomLeft:this.bottomRight,d=Math.trunc(h.getY()+t);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var p=new ae(h.getX(),d);n?o=p:a=p}return new r(this.image,i,o,s,a)},r.prototype.getMinX=function(){return this.minX},r.prototype.getMaxX=function(){return this.maxX},r.prototype.getMinY=function(){return this.minY},r.prototype.getMaxY=function(){return this.maxY},r.prototype.getTopLeft=function(){return this.topLeft},r.prototype.getTopRight=function(){return this.topRight},r.prototype.getBottomLeft=function(){return this.bottomLeft},r.prototype.getBottomRight=function(){return this.bottomRight},r})(),R5=(function(){function r(e,t,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return r.prototype.getColumnCount=function(){return this.columnCount},r.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},r.prototype.getRowCount=function(){return this.rowCount},r.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},r.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},r})(),Zd=(function(){function r(){this.buffer=""}return r.form=function(e,t){var n=-1;function i(s,a,c,u,l,h){if(s==="%%")return"%";if(t[++n]!==void 0){s=u?parseInt(u.substr(1)):void 0;var d=l?parseInt(l.substr(1)):void 0,p;switch(h){case"s":p=t[n];break;case"c":p=t[n][0];break;case"f":p=parseFloat(t[n]).toFixed(s);break;case"p":p=parseFloat(t[n]).toPrecision(s);break;case"e":p=parseFloat(t[n]).toExponential(s);break;case"x":p=parseInt(t[n]).toString(d||16);break;case"d":p=parseFloat(parseInt(t[n],d||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(d);for(var v=parseInt(c),y=c&&c[0]+""=="0"?"0":" ";p.length<v;)p=a!==void 0?p+y:y+p;return p}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},r.prototype.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.buffer+=r.form(e,t)},r.prototype.toString=function(){return this.buffer},r})(),P5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e_=(function(){function r(e){this.boundingBox=new yh(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return r.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var n=1;n<r.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},r.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},r.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},r.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.getCodewords=function(){return this.codewords},r.prototype.toString=function(){var e,t,n=new Zd,i=0;try{for(var o=P5(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n.toString()},r.MAX_NEARBY_DISTANCE=5,r})(),O5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D5=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return o},Xs=(function(){function r(){this.values=new Map}return r.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},r.prototype.getValue=function(){var e,t,n=-1,i=new Array,o=function(h,d){var p={getKey:function(){return h},getValue:function(){return d}};p.getValue()>n?(n=p.getValue(),i=[],i.push(p.getKey())):p.getValue()===n&&i.push(p.getKey())};try{for(var s=O5(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=D5(a.value,2),u=c[0],l=c[1];o(u,l)}}catch(h){e={error:h}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Me.toIntArray(i)},r.prototype.getConfidence=function(e){return this.values.get(e)},r})(),N5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),yf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hg=(function(r){N5(e,r);function e(t,n){var i=r.call(this,t)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var t,n;try{for(var i=yf(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,l=1,h=0,d=a;d<c;d++)if(n[d]!=null){var p=n[d],v=p.getRowNumber()-u;if(v===0)h++;else if(v===1)l=Math.max(l,h),h=1,u=p.getRowNumber();else if(v<0||p.getRowNumber()>=t.getRowCount()||v>d)n[d]=null;else{var y=void 0;l>2?y=(l-2)*v:y=v;for(var w=y>=d,_=1;_<=y&&!w;_++)w=n[d-_]!=null;w?n[d]=null:(u=p.getRowNumber(),h=1)}}},e.prototype.getRowHeights=function(){var t,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=yf(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var u=c.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),o=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),u=-1,l=s;l<a;l++)if(c[l]!=null){var h=c[l];h.setRowNumberAsRowIndicatorColumn();var d=h.getRowNumber()-u;d===0||(d===1?u=h.getRowNumber():h.getRowNumber()>=t.getRowCount()?c[l]=null:u=h.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,n,i=this.getCodewords(),o=new Xs,s=new Xs,a=new Xs,c=new Xs;try{for(var u=yf(i),l=u.next();!l.done;l=u.next()){var h=l.value;if(h!=null){h.setRowNumberAsRowIndicatorColumn();var d=h.getValue()%30,p=h.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:s.setValue(d*3+1);break;case 1:c.setValue(d/3),a.setValue(d%3);break;case 2:o.setValue(d+1);break}}}}catch(y){t={error:y}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<Me.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>Me.MAX_ROWS_IN_BARCODE)return null;var v=new R5(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,v),v},e.prototype.removeIncorrectCodewords=function(t,n){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>n.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==n.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==n.getErrorCorrectionLevel()||s%3!==n.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==n.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+r.prototype.toString.call(this)},e})(e_),M5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k5=(function(){function r(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return r.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Me.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},r.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},r.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,n));return e},r.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},r.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[n];o!=null&&(o.setRowNumber(e[n].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},r.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[n];a!=null&&(o=r.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},r.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),n=0;n<t.length;n++)if(t[n]!=null)for(var i=t[n].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[n];a!=null&&(o=r.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},r.adjustRowNumberIfValid=function(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},r.prototype.adjustRowNumbers=function(e,t,n){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=n[t],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[t],u[3]=c[t],t>0&&(u[0]=n[t-1],u[4]=a[t-1],u[5]=c[t-1]),t>1&&(u[8]=n[t-2],u[10]=a[t-2],u[11]=c[t-2]),t<n.length-1&&(u[1]=n[t+1],u[6]=a[t+1],u[7]=c[t+1]),t<n.length-2&&(u[9]=n[t+2],u[12]=a[t+2],u[13]=c[t+2]);try{for(var l=M5(u),h=l.next();!h.done;h=l.next()){var d=h.value;if(r.adjustRowNumber(s,d))return}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}},r.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},r.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},r.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},r.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},r.prototype.setBoundingBox=function(e){this.boundingBox=e},r.prototype.getBoundingBox=function(){return this.boundingBox},r.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},r.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},r.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Zd,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[n];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},r})(),L5=(function(){function r(e,t,n,i){this.rowNumber=r.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return r.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},r.prototype.isValidRowNumber=function(e){return e!==r.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},r.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},r.prototype.getWidth=function(){return this.endX-this.startX},r.prototype.getStartX=function(){return this.startX},r.prototype.getEndX=function(){return this.endX},r.prototype.getBucket=function(){return this.bucket},r.prototype.getValue=function(){return this.value},r.prototype.getRowNumber=function(){return this.rowNumber},r.prototype.setRowNumber=function(e){this.rowNumber=e},r.prototype.toString=function(){return this.rowNumber+"|"+this.value},r.BARCODE_ROW_UNKNOWN=-1,r})(),B5=(function(){function r(){}return r.initialize=function(){for(var e=0;e<Me.SYMBOL_TABLE.length;e++)for(var t=Me.SYMBOL_TABLE[e],n=t&1,i=0;i<Me.BARS_IN_MODULE;i++){for(var o=0;(t&1)===n;)o+=1,t>>=1;n=t&1,r.RATIOS_TABLE[e]||(r.RATIOS_TABLE[e]=new Array(Me.BARS_IN_MODULE)),r.RATIOS_TABLE[e][Me.BARS_IN_MODULE-i-1]=Math.fround(o/Me.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},r.getDecodedValue=function(e){var t=r.getDecodedCodewordValue(r.sampleBitCounts(e));return t!==-1?t:r.getClosestDecodedValue(e)},r.sampleBitCounts=function(e){for(var t=Be.sum(e),n=new Int32Array(Me.BARS_IN_MODULE),i=0,o=0,s=0;s<Me.MODULES_IN_CODEWORD;s++){var a=t/(2*Me.MODULES_IN_CODEWORD)+s*t/Me.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),n[i]++}return n},r.getDecodedCodewordValue=function(e){var t=r.getBitValue(e);return Me.getCodeword(t)===-1?-1:t},r.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)},r.getClosestDecodedValue=function(e){var t=Be.sum(e),n=new Array(Me.BARS_IN_MODULE);if(t>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/t);var o=gh.MAX_VALUE,s=-1;this.bSymbolTableReady||r.initialize();for(var a=0;a<r.RATIOS_TABLE.length;a++){for(var c=0,u=r.RATIOS_TABLE[a],l=0;l<Me.BARS_IN_MODULE;l++){var h=Math.fround(u[l]-n[l]);if(c+=Math.fround(h*h),c>=o)break}c<o&&(o=c,s=Me.SYMBOL_TABLE[a])}return s},r.bSymbolTableReady=!1,r.RATIOS_TABLE=new Array(Me.SYMBOL_TABLE.length).map(function(e){return new Array(Me.BARS_IN_MODULE)}),r})(),F5=(function(){function r(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return r.prototype.getSegmentIndex=function(){return this.segmentIndex},r.prototype.setSegmentIndex=function(e){this.segmentIndex=e},r.prototype.getFileId=function(){return this.fileId},r.prototype.setFileId=function(e){this.fileId=e},r.prototype.getOptionalData=function(){return this.optionalData},r.prototype.setOptionalData=function(e){this.optionalData=e},r.prototype.isLastSegment=function(){return this.lastSegment},r.prototype.setLastSegment=function(e){this.lastSegment=e},r.prototype.getSegmentCount=function(){return this.segmentCount},r.prototype.setSegmentCount=function(e){this.segmentCount=e},r.prototype.getSender=function(){return this.sender||null},r.prototype.setSender=function(e){this.sender=e},r.prototype.getAddressee=function(){return this.addressee||null},r.prototype.setAddressee=function(e){this.addressee=e},r.prototype.getFileName=function(){return this.fileName},r.prototype.setFileName=function(e){this.fileName=e},r.prototype.getFileSize=function(){return this.fileSize},r.prototype.setFileSize=function(e){this.fileSize=e},r.prototype.getChecksum=function(){return this.checksum},r.prototype.setChecksum=function(e){this.checksum=e},r.prototype.getTimestamp=function(){return this.timestamp},r.prototype.setTimestamp=function(e){this.timestamp=e},r})(),$g=(function(){function r(){}return r.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},r})(),V5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),U5=(function(r){V5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="NullPointerException",e})(Rr),H5=(function(){function r(){}return r.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},r.prototype.writeBytesOffset=function(e,t,n){if(e==null)throw new U5;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Xd;if(n===0)return;for(var i=0;i<n;i++)this.write(e[t+i])},r.prototype.flush=function(){},r.prototype.close=function(){},r})(),$5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),j5=(function(r){$5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e})(Rr),G5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),W5=(function(r){G5(e,r);function e(t){t===void 0&&(t=32);var n=r.call(this)||this;if(n.count=0,t<0)throw new fe("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var n=this.buf.length,i=n<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new j5;i=Te.MAX_VALUE}this.buf=Ot.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,n,i){if(n<0||n>t.length||i<0||n+i-t.length>0)throw new Xd;this.ensureCapacity(this.count+i),et.arraycopy(t,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ot.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e})(H5),Ye;(function(r){r[r.ALPHA=0]="ALPHA",r[r.LOWER=1]="LOWER",r[r.MIXED=2]="MIXED",r[r.PUNCT=3]="PUNCT",r[r.ALPHA_SHIFT=4]="ALPHA_SHIFT",r[r.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ye||(Ye={}));function t_(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Cc;function li(r){if(typeof Cc>"u"&&(Cc=t_()),Cc===null)throw new Error("BigInt is not supported!");return Cc(r)}function z5(){var r=[];r[0]=li(1);var e=li(900);r[1]=e;for(var t=2;t<16;t++)r[t]=r[t-1]*e;return r}var q5=(function(){function r(){}return r.decode=function(e,t){var n=new Ce(""),i=Rt.ISO8859_1;n.enableDecoding(i);for(var o=1,s=e[o++],a=new F5;o<e[0];){switch(s){case r.TEXT_COMPACTION_MODE_LATCH:o=r.textCompaction(e,o,n);break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:o=r.byteCompaction(s,e,i,o,n);break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o++]);break;case r.NUMERIC_COMPACTION_MODE_LATCH:o=r.numericCompaction(e,o,n);break;case r.ECI_CHARSET:Rt.getCharacterSetECIByValue(e[o++]);break;case r.ECI_GENERAL_PURPOSE:o+=2;break;case r.ECI_USER_DEFINED:o++;break;case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=r.decodeMacroBlock(e,o,a);break;case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:throw new Z;default:o--,o=r.textCompaction(e,o,n);break}if(o<e.length)s=e[o++];else throw Z.getFormatInstance()}if(n.length()===0)throw Z.getFormatInstance();var c=new El(null,n.toString(),null,t);return c.setOther(a),c},r.decodeMacroBlock=function(e,t,n){if(t+r.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Z.getFormatInstance();for(var i=new Int32Array(r.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<r.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];n.setSegmentIndex(Te.parseInt(r.decodeBase900toBase10(i,r.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new Ce;t=r.textCompaction(e,t,s),n.setFileId(s.toString());var a=-1;for(e[t]===r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new Ce;t=r.textCompaction(e,t+1,c),n.setFileName(c.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new Ce;t=r.textCompaction(e,t+1,u),n.setSender(u.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new Ce;t=r.textCompaction(e,t+1,l),n.setAddressee(l.toString());break;case r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var h=new Ce;t=r.numericCompaction(e,t+1,h),n.setSegmentCount(Te.parseInt(h.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new Ce;t=r.numericCompaction(e,t+1,d),n.setTimestamp($g.parseLong(d.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var p=new Ce;t=r.numericCompaction(e,t+1,p),n.setChecksum(Te.parseInt(p.toString()));break;case r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new Ce;t=r.numericCompaction(e,t+1,v),n.setFileSize($g.parseLong(v.toString()));break;default:throw Z.getFormatInstance()}break;case r.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw Z.getFormatInstance()}if(a!==-1){var y=t-a;n.isLastSegment()&&y--,n.setOptionalData(Ot.copyOfRange(e,a,a+y))}return t},r.textCompaction=function(e,t,n){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,a=!1;t<e[0]&&!a;){var c=e[t++];if(c<r.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case r.TEXT_COMPACTION_MODE_LATCH:i[s++]=r.TEXT_COMPACTION_MODE_LATCH;break;case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return r.decodeTextCompaction(i,o,s,n),t},r.decodeTextCompaction=function(e,t,n,i){for(var o=Ye.ALPHA,s=Ye.ALPHA,a=0;a<n;){var c=e[a],u="";switch(o){case Ye.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case r.LL:o=Ye.LOWER;break;case r.ML:o=Ye.MIXED;break;case r.PS:s=o,o=Ye.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case r.AS:s=o,o=Ye.ALPHA_SHIFT;break;case r.ML:o=Ye.MIXED;break;case r.PS:s=o,o=Ye.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.MIXED:if(c<r.PL)u=r.MIXED_CHARS[c];else switch(c){case r.PL:o=Ye.PUNCT;break;case 26:u=" ";break;case r.LL:o=Ye.LOWER;break;case r.AL:o=Ye.ALPHA;break;case r.PS:s=o,o=Ye.PUNCT_SHIFT;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.PUNCT:if(c<r.PAL)u=r.PUNCT_CHARS[c];else switch(c){case r.PAL:o=Ye.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.ALPHA_SHIFT:if(o=s,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break;case Ye.PUNCT_SHIFT:if(o=s,c<r.PAL)u=r.PUNCT_CHARS[c];else switch(c){case r.PAL:o=Ye.ALPHA;break;case r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case r.TEXT_COMPACTION_MODE_LATCH:o=Ye.ALPHA;break}break}u!==""&&i.append(u),a++}},r.byteCompaction=function(e,t,n,i,o){var s=new W5,a=0,c=0,u=!1;switch(e){case r.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),h=t[i++];i<t[0]&&!u;)switch(l[a++]=h,c=900*c+h,h=t[i++],h){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(li(c)>>li(8*(5-d))));c=0,a=0}break}i===t[0]&&h<r.TEXT_COMPACTION_MODE_LATCH&&(l[a++]=h);for(var p=0;p<a;p++)s.write(l[p]);break;case r.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var v=t[i++];if(v<r.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+v;else switch(v){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.NUMERIC_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(a%5===0&&a>0){for(var d=0;d<6;++d)s.write(Number(li(c)>>li(8*(5-d))));c=0,a=0}}break}return o.append(Kr.decode(s.toByteArray(),n)),i},r.numericCompaction=function(e,t,n){for(var i=0,o=!1,s=new Int32Array(r.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var a=e[t++];if(t===e[0]&&(o=!0),a<r.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case r.TEXT_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH:case r.BYTE_COMPACTION_MODE_LATCH_6:case r.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case r.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%r.MAX_NUMERIC_CODEWORDS===0||a===r.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(n.append(r.decodeBase900toBase10(s,i)),i=0)}return t},r.decodeBase900toBase10=function(e,t){for(var n=li(0),i=0;i<t;i++)n+=r.EXP900[t-i-1]*li(e[i]);var o=n.toString();if(o.charAt(0)!=="1")throw new Z;return o.substring(1)},r.TEXT_COMPACTION_MODE_LATCH=900,r.BYTE_COMPACTION_MODE_LATCH=901,r.NUMERIC_COMPACTION_MODE_LATCH=902,r.BYTE_COMPACTION_MODE_LATCH_6=924,r.ECI_USER_DEFINED=925,r.ECI_GENERAL_PURPOSE=926,r.ECI_CHARSET=927,r.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,r.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,r.MACRO_PDF417_TERMINATOR=922,r.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,r.MAX_NUMERIC_CODEWORDS=15,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,r.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,r.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,r.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,r.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,r.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,r.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,r.PL=25,r.LL=27,r.AS=27,r.ML=28,r.AL=28,r.PS=29,r.PAL=29,r.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,r.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",r.EXP900=t_()?z5():[],r.NUMBER_OF_SEQUENCE_CODEWORDS=2,r})(),Hs=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},X5=(function(){function r(){}return r.decode=function(e,t,n,i,o,s,a){for(var c=new yh(e,t,n,i,o),u=null,l=null,h,d=!0;;d=!1){if(t!=null&&(u=r.getRowIndicatorColumn(e,c,t,!0,s,a)),i!=null&&(l=r.getRowIndicatorColumn(e,c,i,!1,s,a)),h=r.merge(u,l),h==null)throw $.getNotFoundInstance();var p=h.getBoundingBox();if(d&&p!=null&&(p.getMinY()<c.getMinY()||p.getMaxY()>c.getMaxY()))c=p;else break}h.setBoundingBox(c);var v=h.getBarcodeColumnCount()+1;h.setDetectionResultColumn(0,u),h.setDetectionResultColumn(v,l);for(var y=u!=null,w=1;w<=v;w++){var _=y?w:v-w;if(h.getDetectionResultColumn(_)===void 0){var x=void 0;_===0||_===v?x=new Hg(c,_===0):x=new e_(c),h.setDetectionResultColumn(_,x);for(var T=-1,D=T,F=c.getMinY();F<=c.getMaxY();F++){if(T=r.getStartColumn(h,_,F,y),T<0||T>c.getMaxX()){if(D===-1)continue;T=D}var H=r.detectCodeword(e,c.getMinX(),c.getMaxX(),y,T,F,s,a);H!=null&&(x.setCodeword(F,H),D=T,s=Math.min(s,H.getWidth()),a=Math.max(a,H.getWidth()))}}}return r.createDecoderResult(h)},r.merge=function(e,t){if(e==null&&t==null)return null;var n=r.getBarcodeMetadata(e,t);if(n==null)return null;var i=yh.merge(r.adjustBoundingBox(e),r.adjustBoundingBox(t));return new k5(n,i)},r.adjustBoundingBox=function(e){var t,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=r.getMax(i),s=0;try{for(var a=Hs(i),c=a.next();!c.done;c=a.next()){var u=c.value;if(s+=o-u,u>0)break}}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}for(var l=e.getCodewords(),h=0;s>0&&l[h]==null;h++)s--;for(var d=0,h=i.length-1;h>=0&&(d+=o-i[h],!(i[h]>0));h--);for(var h=l.length-1;d>0&&l[h]==null;h--)d--;return e.getBoundingBox().addMissingRows(s,d,e.isLeft())},r.getMax=function(e){var t,n,i=-1;try{for(var o=Hs(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},r.getBarcodeMetadata=function(e,t){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},r.getRowIndicatorColumn=function(e,t,n,i,o,s){for(var a=new Hg(t,i),c=0;c<2;c++)for(var u=c===0?1:-1,l=Math.trunc(Math.trunc(n.getX())),h=Math.trunc(Math.trunc(n.getY()));h<=t.getMaxY()&&h>=t.getMinY();h+=u){var d=r.detectCodeword(e,0,e.getWidth(),i,l,h,o,s);d!=null&&(a.setCodeword(h,d),i?l=d.getStartX():l=d.getEndX())}return a},r.adjustCodewordCount=function(e,t){var n=t[0][1],i=n.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-r.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Me.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();n.setValue(o)}else i[0]!==o&&n.setValue(o)},r.createDecoderResult=function(e){var t=r.createBarcodeMatrix(e);r.adjustCodewordCount(e,t);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=t[a][c+1].getValue(),l=a*e.getBarcodeColumnCount()+c;u.length===0?n.push(l):u.length===1?i[l]=u[0]:(s.push(l),o.push(u))}for(var h=new Array(o.length),d=0;d<h.length;d++)h[d]=o[d];return r.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Me.toIntArray(n),Me.toIntArray(s),h)},r.createDecoderResultFromAmbiguousValues=function(e,t,n,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return r.decodeCodewords(t,e,n)}catch(l){var u=l instanceof Et;if(!u)throw l}if(s.length===0)throw Et.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw Et.getChecksumInstance()}throw Et.getChecksumInstance()},r.createBarcodeMatrix=function(e){for(var t,n,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new Xs;var u=0;try{for(var l=Hs(e.getDetectionResultColumns()),h=l.next();!h.done;h=l.next()){var d=h.value;if(d!=null)try{for(var p=(i=void 0,Hs(d.getCodewords())),v=p.next();!v.done;v=p.next()){var y=v.value;if(y!=null){var w=y.getRowNumber();if(w>=0){if(w>=s.length)continue;s[w][u].setValue(y.getValue())}}}}catch(_){i={error:_}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}u++}}catch(_){t={error:_}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}return s},r.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},r.getStartColumn=function(e,t,n,i){var o,s,a=i?1:-1,c=null;if(r.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodeword(n)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(n),c!=null)return i?c.getStartX():c.getEndX();if(r.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodewordNearby(n)),c!=null)return i?c.getEndX():c.getStartX();for(var u=0;r.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var l=(o=void 0,Hs(e.getDetectionResultColumn(t).getCodewords())),h=l.next();!h.done;h=l.next()){var d=h.value;if(d!=null)return(i?d.getEndX():d.getStartX())+a*u*(d.getEndX()-d.getStartX())}}catch(p){o={error:p}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},r.detectCodeword=function(e,t,n,i,o,s,a,c){o=r.adjustCodewordStartColumn(e,t,n,i,o,s);var u=r.getModuleBitCount(e,t,n,i,o,s);if(u==null)return null;var l,h=Be.sum(u);if(i)l=o+h;else{for(var d=0;d<u.length/2;d++){var p=u[d];u[d]=u[u.length-1-d],u[u.length-1-d]=p}l=o,o=l-h}if(!r.checkCodewordSkew(h,a,c))return null;var v=B5.getDecodedValue(u),y=Me.getCodeword(v);return y===-1?null:new L5(o,l,r.getCodewordBucketNumber(v),y)},r.getModuleBitCount=function(e,t,n,i,o,s){for(var a=o,c=new Int32Array(8),u=0,l=i?1:-1,h=i;(i?a<n:a>=t)&&u<c.length;)e.get(a,s)===h?(c[u]++,a+=l):(u++,h=!h);return u===c.length||a===(i?n:t)&&u===c.length-1?c:null},r.getNumberOfECCodeWords=function(e){return 2<<e},r.adjustCodewordStartColumn=function(e,t,n,i,o,s){for(var a=o,c=i?-1:1,u=0;u<2;u++){for(;(i?a>=t:a<n)&&i===e.get(a,s);){if(Math.abs(o-a)>r.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},r.checkCodewordSkew=function(e,t,n){return t-r.CODEWORD_SKEW_SIZE<=e&&e<=n+r.CODEWORD_SKEW_SIZE},r.decodeCodewords=function(e,t,n){if(e.length===0)throw Z.getFormatInstance();var i=1<<t+1,o=r.correctErrors(e,n,i);r.verifyCodewordCount(e,i);var s=q5.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(n.length),s},r.correctErrors=function(e,t,n){if(t!=null&&t.length>n/2+r.MAX_ERRORS||n<0||n>r.MAX_EC_CODEWORDS)throw Et.getChecksumInstance();return r.errorCorrection.decode(e,n,t)},r.verifyCodewordCount=function(e,t){if(e.length<4)throw Z.getFormatInstance();var n=e[0];if(n>e.length)throw Z.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw Z.getFormatInstance()},r.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,i=t.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)t[i]++,e>>=1;return t},r.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},r.getCodewordBucketNumber_number=function(e){return r.getCodewordBucketNumber(r.getBitCountForCodeword(e))},r.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},r.toString=function(e){for(var t=new Zd,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var o=e[n][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},r.CODEWORD_SKEW_SIZE=2,r.MAX_ERRORS=3,r.MAX_EC_CODEWORDS=512,r.errorCorrection=new S5,r})(),K5=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mu=(function(){function r(){}return r.prototype.decode=function(e,t){t===void 0&&(t=null);var n=r.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw $.getNotFoundInstance();return n[0]},r.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return r.decode(e,t,!0)}catch(n){throw n instanceof Z||n instanceof Et?$.getNotFoundInstance():n}},r.decode=function(e,t,n){var i,o,s=new Array,a=E5.detectMultiple(e,t,n);try{for(var c=K5(a.getPoints()),u=c.next();!u.done;u=c.next()){var l=u.value,h=X5.decode(a.getBits(),l[4],l[5],l[6],l[7],r.getMinCodewordWidth(l),r.getMaxCodewordWidth(l)),d=new lr(h.getText(),h.getRawBytes(),void 0,l,le.PDF_417);d.putMetadata(Kt.ERROR_CORRECTION_LEVEL,h.getECLevel());var p=h.getOther();p!=null&&d.putMetadata(Kt.PDF417_EXTRA_METADATA,p),s.push(d)}}catch(v){i={error:v}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(v){return v})},r.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMinWidth=function(e,t){return e==null||t==null?Te.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},r.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(r.getMaxWidth(e[0],e[4]),r.getMaxWidth(e[6],e[2])*Me.MODULES_IN_CODEWORD/Me.MODULES_IN_STOP_PATTERN),Math.max(r.getMaxWidth(e[1],e[5]),r.getMaxWidth(e[7],e[3])*Me.MODULES_IN_CODEWORD/Me.MODULES_IN_STOP_PATTERN)))},r.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(r.getMinWidth(e[0],e[4]),r.getMinWidth(e[6],e[2])*Me.MODULES_IN_CODEWORD/Me.MODULES_IN_STOP_PATTERN),Math.min(r.getMinWidth(e[1],e[5]),r.getMinWidth(e[7],e[3])*Me.MODULES_IN_CODEWORD/Me.MODULES_IN_STOP_PATTERN)))},r.prototype.reset=function(){},r})(),Y5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),jg=(function(r){Y5(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="ReaderException",e})(Rr),Gg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},r_=(function(){function r(){}return r.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},r.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},r.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(tt.TRY_HARDER)!==void 0,n=e==null?null:e.get(tt.POSSIBLE_FORMATS),i=new Array;if(n!=null){var o=n.some(function(s){return s===le.UPC_A||s===le.UPC_E||s===le.EAN_13||s===le.EAN_8||s===le.CODABAR||s===le.CODE_39||s===le.CODE_93||s===le.CODE_128||s===le.ITF||s===le.RSS_14||s===le.RSS_EXPANDED});o&&!t&&i.push(new Do(e)),n.includes(le.QR_CODE)&&i.push(new Nu),n.includes(le.DATA_MATRIX)&&i.push(new Du),n.includes(le.AZTEC)&&i.push(new Pu),n.includes(le.PDF_417)&&i.push(new Mu),o&&t&&i.push(new Do(e))}i.length===0&&(t||i.push(new Do(e)),i.push(new Nu),i.push(new Du),i.push(new Pu),i.push(new Mu),t&&i.push(new Do(e))),this.readers=i},r.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var n=Gg(this.readers),i=n.next();!i.done;i=n.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r.prototype.decodeInternal=function(e){var t,n;if(this.readers===null)throw new jg("No readers where selected, nothing can be read.");try{for(var i=Gg(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof jg)continue}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}throw new $("No MultiFormat Readers were able to detect the code.")},r})(),Q5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Q5(e,r);function e(t,n){t===void 0&&(t=null),n===void 0&&(n=500);var i=this,o=new r_;return o.setHints(t),i=r.call(this,o,n)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e})(Es);var Z5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){Z5(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Mu,t)||this}return e})(Es);var J5=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){J5(e,r);function e(t){return t===void 0&&(t=500),r.call(this,new Nu,t)||this}return e})(Es);var wh;(function(r){r[r.ERROR_CORRECTION=0]="ERROR_CORRECTION",r[r.CHARACTER_SET=1]="CHARACTER_SET",r[r.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",r[r.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",r[r.MIN_SIZE=4]="MIN_SIZE",r[r.MAX_SIZE=5]="MAX_SIZE",r[r.MARGIN=6]="MARGIN",r[r.PDF417_COMPACT=7]="PDF417_COMPACT",r[r.PDF417_COMPACTION=8]="PDF417_COMPACTION",r[r.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",r[r.AZTEC_LAYERS=10]="AZTEC_LAYERS",r[r.QR_VERSION=11]="QR_VERSION",r[r.GS1_FORMAT=12]="GS1_FORMAT",r[r.FORCE_C40=13]="FORCE_C40"})(wh||(wh={}));const bc=wh;var n_=(function(){function r(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Ci(e,Int32Array.from([1])))}return r.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=n.multiply(new Ci(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),n=s}return t[e]},r.prototype.encode=function(e,t){if(t===0)throw new fe("No error correction bytes");var n=e.length-t;if(n<=0)throw new fe("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(n);et.arraycopy(e,0,o,0,n);var s=new Ci(this.field,o);s=s.multiplyByMonomial(t,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),u=t-c.length,l=0;l<u;l++)e[n+l]=0;et.arraycopy(c,0,e,n+u,c.length)},r})(),Ks=(function(){function r(){}return r.applyMaskPenaltyRule1=function(e){return r.applyMaskPenaltyRule1Internal(e,!0)+r.applyMaskPenaltyRule1Internal(e,!1)},r.applyMaskPenaltyRule2=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=n[s],c=0;c<i-1;c++){var u=a[c];u===a[c+1]&&u===n[s+1][c]&&u===n[s+1][c+1]&&t++}return r.N2*t},r.applyMaskPenaltyRule3=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=n[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(r.isWhiteHorizontal(c,a-4,a)||r.isWhiteHorizontal(c,a+7,a+11))&&t++,s+6<o&&n[s][a]===1&&n[s+1][a]===0&&n[s+2][a]===1&&n[s+3][a]===1&&n[s+4][a]===1&&n[s+5][a]===0&&n[s+6][a]===1&&(r.isWhiteVertical(n,a,s-4,s)||r.isWhiteVertical(n,a,s+7,s+11))&&t++}return t*r.N3},r.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var i=t;i<n;i++)if(e[i]===1)return!1;return!0},r.isWhiteVertical=function(e,t,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var o=n;o<i;o++)if(e[o][t]===1)return!1;return!0},r.applyMaskPenaltyRule4=function(e){for(var t=0,n=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=n[s],c=0;c<i;c++)a[c]===1&&t++;var u=e.getHeight()*e.getWidth(),l=Math.floor(Math.abs(t*2-u)*10/u);return l*r.N4},r.getDataMaskBit=function(e,t,n){var i,o;switch(e){case 0:i=n+t&1;break;case 1:i=n&1;break;case 2:i=t%3;break;case 3:i=(n+t)%3;break;case 4:i=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:o=n*t,i=(o&1)+o%3;break;case 6:o=n*t,i=(o&1)+o%3&1;break;case 7:o=n*t,i=o%3+(n+t&1)&1;break;default:throw new fe("Invalid mask pattern: "+e)}return i===0},r.applyMaskPenaltyRule1Internal=function(e,t){for(var n=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,u=-1,l=0;l<o;l++){var h=t?s[a][l]:s[l][a];h===u?c++:(c>=5&&(n+=r.N1+(c-5)),c=1,u=h)}c>=5&&(n+=r.N1+(c-5))}return n},r.N1=3,r.N2=3,r.N3=40,r.N4=10,r})(),eD=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tD=(function(){function r(e,t){this.width=e,this.height=t;for(var n=new Array(t),i=0;i!==t;i++)n[i]=new Uint8Array(e);this.bytes=n}return r.prototype.getHeight=function(){return this.height},r.prototype.getWidth=function(){return this.width},r.prototype.get=function(e,t){return this.bytes[t][e]},r.prototype.getArray=function(){return this.bytes},r.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},r.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},r.prototype.clear=function(e){var t,n;try{for(var i=eD(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;Ot.fill(s,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype.equals=function(e){if(!(e instanceof r))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var o=this.bytes[n],s=t.bytes[n],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},r.prototype.toString=function(){for(var e=new Ce,t=0,n=this.height;t<n;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},r})(),_h=(function(){function r(){this.maskPattern=-1}return r.prototype.getMode=function(){return this.mode},r.prototype.getECLevel=function(){return this.ecLevel},r.prototype.getVersion=function(){return this.version},r.prototype.getMaskPattern=function(){return this.maskPattern},r.prototype.getMatrix=function(){return this.matrix},r.prototype.toString=function(){var e=new Ce;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},r.prototype.setMode=function(e){this.mode=e},r.prototype.setECLevel=function(e){this.ecLevel=e},r.prototype.setVersion=function(e){this.version=e},r.prototype.setMaskPattern=function(e){this.maskPattern=e},r.prototype.setMatrix=function(e){this.matrix=e},r.isValidMaskPattern=function(e){return e>=0&&e<r.NUM_MASK_PATTERNS},r.NUM_MASK_PATTERNS=8,r})(),rD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),it=(function(r){rD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.kind="WriterException",e})(Rr),Wg=(function(){function r(){}return r.clearMatrix=function(e){e.clear(255)},r.buildMatrix=function(e,t,n,i,o){r.clearMatrix(o),r.embedBasicPatterns(n,o),r.embedTypeInfo(t,i,o),r.maybeEmbedVersionInfo(n,o),r.embedDataBits(e,i,o)},r.embedBasicPatterns=function(e,t){r.embedPositionDetectionPatternsAndSeparators(t),r.embedDarkDotAtLeftBottomCorner(t),r.maybeEmbedPositionAdjustmentPatterns(e,t),r.embedTimingPatterns(t)},r.embedTypeInfo=function(e,t,n){var i=new Ft;r.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=r.TYPE_INFO_COORDINATES[o],u=c[0],l=c[1];if(n.setBoolean(u,l,a),o<8){var h=n.getWidth()-o-1,d=8;n.setBoolean(h,d,a)}else{var h=8,d=n.getHeight()-7+(o-8);n.setBoolean(h,d,a)}}},r.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var n=new Ft;r.makeVersionInfoBits(e,n);for(var i=17,o=0;o<6;++o)for(var s=0;s<3;++s){var a=n.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,o,a)}}},r.embedDataBits=function(e,t,n){for(var i=0,o=-1,s=n.getWidth()-1,a=n.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<n.getHeight();){for(var c=0;c<2;++c){var u=s-c;if(r.isEmpty(n.get(u,a))){var l=void 0;i<e.getSize()?(l=e.get(i),++i):l=!1,t!==255&&Ks.getDataMaskBit(t,u,a)&&(l=!l),n.setBoolean(u,a,l)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new it("Not all bits consumed: "+i+"/"+e.getSize())},r.findMSBSet=function(e){return 32-Te.numberOfLeadingZeros(e)},r.calculateBCHCode=function(e,t){if(t===0)throw new fe("0 polynomial");var n=r.findMSBSet(t);for(e<<=n-1;r.findMSBSet(e)>=n;)e^=t<<r.findMSBSet(e)-n;return e},r.makeTypeInfoBits=function(e,t,n){if(!_h.isValidMaskPattern(t))throw new it("Invalid mask pattern");var i=e.getBits()<<3|t;n.appendBits(i,5);var o=r.calculateBCHCode(i,r.TYPE_INFO_POLY);n.appendBits(o,10);var s=new Ft;if(s.appendBits(r.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new it("should not happen but we got: "+n.getSize())},r.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var n=r.calculateBCHCode(e.getVersionNumber(),r.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new it("should not happen but we got: "+t.getSize())},r.isEmpty=function(e){return e===255},r.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var n=(t+1)%2;r.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),r.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}},r.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new it;e.setNumber(8,e.getHeight()-8,1)},r.embedHorizontalSeparationPattern=function(e,t,n){for(var i=0;i<8;++i){if(!r.isEmpty(n.get(e+i,t)))throw new it;n.setNumber(e+i,t,0)}},r.embedVerticalSeparationPattern=function(e,t,n){for(var i=0;i<7;++i){if(!r.isEmpty(n.get(e,t+i)))throw new it;n.setNumber(e,t+i,0)}},r.embedPositionAdjustmentPattern=function(e,t,n){for(var i=0;i<5;++i)for(var o=r.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)n.setNumber(e+s,t+i,o[s])},r.embedPositionDetectionPattern=function(e,t,n){for(var i=0;i<7;++i)for(var o=r.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)n.setNumber(e+s,t+i,o[s])},r.embedPositionDetectionPatternsAndSeparators=function(e){var t=r.POSITION_DETECTION_PATTERN[0].length;r.embedPositionDetectionPattern(0,0,e),r.embedPositionDetectionPattern(e.getWidth()-t,0,e),r.embedPositionDetectionPattern(0,e.getWidth()-t,e);var n=8;r.embedHorizontalSeparationPattern(0,n-1,e),r.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),r.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;r.embedVerticalSeparationPattern(i,0,e),r.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),r.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},r.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var u=i[c];u>=0&&r.isEmpty(t.get(u,a))&&r.embedPositionAdjustmentPattern(u-2,a-2,t)}}},r.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),r.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),r.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),r.VERSION_INFO_POLY=7973,r.TYPE_INFO_POLY=1335,r.TYPE_INFO_MASK_PATTERN=21522,r})(),nD=(function(){function r(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return r.prototype.getDataBytes=function(){return this.dataBytes},r.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},r})(),zg=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.calculateMaskPenalty=function(e){return Ks.applyMaskPenaltyRule1(e)+Ks.applyMaskPenaltyRule2(e)+Ks.applyMaskPenaltyRule3(e)+Ks.applyMaskPenaltyRule4(e)},r.encode=function(e,t,n){n===void 0&&(n=null);var i=r.DEFAULT_BYTE_MODE_ENCODING,o=n!==null&&n.get(bc.CHARACTER_SET)!==void 0;o&&(i=n.get(bc.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new Ft;if(s===ot.BYTE&&(o||r.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Rt.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var u=new Ft;this.appendBytes(e,s,u,i);var l;if(n!==null&&n.get(bc.QR_VERSION)!==void 0){var h=Number.parseInt(n.get(bc.QR_VERSION).toString(),10);l=ro.getVersionForNumber(h);var d=this.calculateBitsNeeded(s,a,u,l);if(!this.willFit(d,l,t))throw new it("Data too big for requested version")}else l=this.recommendVersion(t,s,a,u);var p=new Ft;p.appendBitArray(a);var v=s===ot.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(v,l,s,p),p.appendBitArray(u);var y=l.getECBlocksForLevel(t),w=l.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(w,p);var _=this.interleaveWithECBytes(p,l.getTotalCodewords(),w,y.getNumBlocks()),x=new _h;x.setECLevel(t),x.setMode(s),x.setVersion(l);var T=l.getDimensionForVersion(),D=new tD(T,T),F=this.chooseMaskPattern(_,t,l,D);return x.setMaskPattern(F),Wg.buildMatrix(_,t,l,F,D),x.setMatrix(D),x},r.recommendVersion=function(e,t,n,i){var o=this.calculateBitsNeeded(t,n,i,ro.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,n,i,s);return this.chooseVersion(a,e)},r.calculateBitsNeeded=function(e,t,n,i){return t.getSize()+e.getCharacterCountBits(i)+n.getSize()},r.getAlphanumericCode=function(e){return e<r.ALPHANUMERIC_TABLE.length?r.ALPHANUMERIC_TABLE[e]:-1},r.chooseMode=function(e,t){if(t===void 0&&(t=null),Rt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return ot.KANJI;for(var n=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(r.isDigit(a))n=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return ot.BYTE}return i?ot.ALPHANUMERIC:n?ot.NUMERIC:ot.BYTE},r.isOnlyDoubleByteKanji=function(e){var t;try{t=Kr.encode(e,Rt.SJIS)}catch{return!1}var n=t.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},r.chooseMaskPattern=function(e,t,n,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<_h.NUM_MASK_PATTERNS;a++){Wg.buildMatrix(e,t,n,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},r.chooseVersion=function(e,t){for(var n=1;n<=40;n++){var i=ro.getVersionForNumber(n);if(r.willFit(e,i,t))return i}throw new it("Data too big")},r.willFit=function(e,t,n){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(n),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},r.terminateBits=function(e,t){var n=e*8;if(t.getSize()>n)throw new it("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var i=0;i<4&&t.getSize()<n;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==n)throw new it("Bits size does not equal capacity")},r.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,i,o,s){if(i>=n)throw new it("Block ID too large");var a=e%n,c=n-a,u=Math.floor(e/n),l=u+1,h=Math.floor(t/n),d=h+1,p=u-h,v=l-d;if(p!==v)throw new it("EC bytes mismatch");if(n!==c+a)throw new it("RS blocks mismatch");if(e!==(h+p)*c+(d+v)*a)throw new it("Total bytes mismatch");i<c?(o[0]=h,s[0]=p):(o[0]=d,s[0]=v)},r.interleaveWithECBytes=function(e,t,n,i){var o,s,a,c;if(e.getSizeInBytes()!==n)throw new it("Number of bits and data bytes does not match");for(var u=0,l=0,h=0,d=new Array,p=0;p<i;++p){var v=new Int32Array(1),y=new Int32Array(1);r.getNumDataBytesAndNumECBytesForBlockID(t,n,i,p,v,y);var w=v[0],_=new Uint8Array(w);e.toBytes(8*u,_,0,w);var x=r.generateECBytes(_,y[0]);d.push(new nD(_,x)),l=Math.max(l,w),h=Math.max(h,x.length),u+=v[0]}if(n!==u)throw new it("Data bytes does not match offset");for(var T=new Ft,p=0;p<l;++p)try{for(var D=(o=void 0,zg(d)),F=D.next();!F.done;F=D.next()){var H=F.value,_=H.getDataBytes();p<_.length&&T.appendBits(_[p],8)}}catch(P){o={error:P}}finally{try{F&&!F.done&&(s=D.return)&&s.call(D)}finally{if(o)throw o.error}}for(var p=0;p<h;++p)try{for(var C=(a=void 0,zg(d)),A=C.next();!A.done;A=C.next()){var H=A.value,x=H.getErrorCorrectionBytes();p<x.length&&T.appendBits(x[p],8)}}catch(P){a={error:P}}finally{try{A&&!A.done&&(c=C.return)&&c.call(C)}finally{if(a)throw a.error}}if(t!==T.getSizeInBytes())throw new it("Interleaving error: "+t+" and "+T.getSizeInBytes()+" differ.");return T},r.generateECBytes=function(e,t){for(var n=e.length,i=new Int32Array(n+t),o=0;o<n;o++)i[o]=e[o]&255;new n_(Cr.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[n+o];return s},r.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},r.appendLengthInfo=function(e,t,n,i){var o=n.getCharacterCountBits(t);if(e>=1<<o)throw new it(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},r.appendBytes=function(e,t,n,i){switch(t){case ot.NUMERIC:r.appendNumericBytes(e,n);break;case ot.ALPHANUMERIC:r.appendAlphanumericBytes(e,n);break;case ot.BYTE:r.append8BitBytes(e,n,i);break;case ot.KANJI:r.appendKanjiBytes(e,n);break;default:throw new it("Invalid mode: "+t)}},r.getDigit=function(e){return e.charCodeAt(0)-48},r.isDigit=function(e){var t=r.getDigit(e);return t>=0&&t<=9},r.appendNumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getDigit(e.charAt(i));if(i+2<n){var s=r.getDigit(e.charAt(i+1)),a=r.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<n){var s=r.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},r.appendAlphanumericBytes=function(e,t){for(var n=e.length,i=0;i<n;){var o=r.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new it;if(i+1<n){var s=r.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new it;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},r.append8BitBytes=function(e,t,n){var i;try{i=Kr.encode(e,n)}catch(c){throw new it(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];t.appendBits(a,8)}},r.appendKanjiBytes=function(e,t){var n;try{n=Kr.encode(e,Rt.SJIS)}catch(h){throw new it(h)}for(var i=n.length,o=0;o<i;o+=2){var s=n[o]&255,a=n[o+1]&255,c=s<<8&4294967295|a,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new it("Invalid byte sequence");var l=(u>>8)*192+(u&255);t.appendBits(l,13)}},r.appendECI=function(e,t){t.appendBits(ot.ECI.getBits(),4),t.appendBits(e.getValue(),8)},r.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),r.DEFAULT_BYTE_MODE_ENCODING=Rt.UTF8.getName(),r})();var iD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){iD(e,r);function e(t,n,i,o,s,a,c,u){var l=r.call(this,a,c)||this;if(l.yuvData=t,l.dataWidth=n,l.dataHeight=i,l.left=o,l.top=s,o+a>n||s+c>i)throw new fe("Crop rectangle does not fit within image data.");return u&&l.reverseHorizontal(a,c),l}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return et.arraycopy(this.yuvData,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=t*n,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return et.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<n;a++){var c=a*t;et.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*n),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<n;a++){for(var c=a*t,u=0;u<t;u++){var l=o[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+u]=4278190080|l*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,n){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<n;o++,s+=this.dataWidth)for(var a=s+t/2,c=s,u=s+t-1;c<a;c++,u--){var l=i[c];i[c]=i[u],i[u]=l}},e.prototype.invert=function(){return new xl(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Xa);var oD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){oD(e,r);function e(t,n,i,o,s,a,c){var u=r.call(this,n,i)||this;if(u.dataWidth=o,u.dataHeight=s,u.left=a,u.top=c,t.BYTES_PER_ELEMENT===4){for(var l=n*i,h=new Uint8ClampedArray(l),d=0;d<l;d++){var p=t[d],v=p>>16&255,y=p>>7&510,w=p&255;h[d]=(v+y+w)/4&255}u.luminances=h}else u.luminances=t;if(o===void 0&&(u.dataWidth=n),s===void 0&&(u.dataHeight=i),a===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+n>u.dataWidth||u.top+i>u.dataHeight)throw new fe("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return et.arraycopy(this.luminances,o,n,0,i),n},e.prototype.getMatrix=function(){var t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=t*n,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return et.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<n;a++){var c=a*t;et.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+n)},e.prototype.invert=function(){return new xl(this)},e})(Xa);var sD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),aD=(function(r){sD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e})(Rt),cD=(function(){function r(){}return r.ISO_8859_1=Rt.ISO8859_1,r})(),xh,uD=301,lD=function(r,e){for(var t=1,n=0;n<255;n++)e[n]=t,r[t]=n,t*=2,t>=256&&(t^=uD);return{LOG:r,ALOG:e}};xh=lD([],[]),xh.LOG;xh.ALOG;var qg;(function(r){r[r.FORCE_NONE=0]="FORCE_NONE",r[r.FORCE_SQUARE=1]="FORCE_SQUARE",r[r.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(qg||(qg={}));var Xg=129,i_=230,fD=231,hD=235,dD=236,pD=237,gD=238,vD=239,mD=240,wf=254,yD=254,Kg="[)>05",Yg="[)>06",Qg="",Xe=0,Wt=1,gr=2,bt=3,kt=4,tr=5,wD=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Xe},r.prototype.encode=function(e){var t=on.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=on.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case tr:e.writeCodeword(fD),e.signalEncoderChange(tr);return;case Wt:e.writeCodeword(i_),e.signalEncoderChange(Wt);return;case bt:e.writeCodeword(gD),e.signalEncoderChange(bt);break;case gr:e.writeCodeword(vD),e.signalEncoderChange(gr);break;case kt:e.writeCodeword(mD),e.signalEncoderChange(kt);break;default:throw new Error("Illegal mode: "+i)}else on.isExtendedASCII(n)?(e.writeCodeword(hD),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},r.prototype.encodeASCIIDigits=function(e,t){if(on.isDigit(e)&&on.isDigit(t)){var n=(e-48)*10+(t-48);return n+130}throw new Error("not digits: "+e+t)},r})(),_D=(function(){function r(){}return r.prototype.getEncodingMode=function(){return tr},r.prototype.encode=function(e){var t=new Ce;for(t.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();t.append(n),e.pos++;var i=on.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Xe);break}}var o=t.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,Ne.getCharAt(o));else if(o<=1555)t.setCharAt(0,Ne.getCharAt(Math.floor(o/250)+249)),t.insert(1,Ne.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,n=t.length();u<n;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},r.prototype.randomize255State=function(e,t){var n=149*t%255+1,i=e+n;return i<=255?i:i-256},r})(),Jd=(function(){function r(){}return r.prototype.getEncodingMode=function(){return Wt},r.prototype.encodeMaximal=function(e){for(var t=new Ce,n=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,n=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,l=Math.floor(t.length()%3);(l===2&&u!==2||l===1&&(n>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(i_),this.handleEOD(e,t)},r.prototype.encode=function(e){for(var t=new Ce;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new Ce;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var u=t.length();if(u%3===0){var l=on.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(Xe);break}}}this.handleEOD(e,t)},r.prototype.backtrackOneCharacter=function(e,t,n,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,n),e.resetSymbolInfo(),i},r.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var n=t.toString().substring(3);t.setLengthToZero(),t.append(n)},r.prototype.handleEOD=function(e,t){var n=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+n;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(wf)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(wf),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(wf)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Xe)},r.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var n=2;return n+=this.encodeChar(e-128,t),n},r.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=t/256,i=t%256,o=new Ce;return o.append(n),o.append(i),o.toString()},r})(),xD=(function(){function r(){}return r.prototype.getEncodingMode=function(){return kt},r.prototype.encode=function(e){for(var t=new Ce;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=on.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Xe);break}}}t.append(Ne.getCharAt(31)),this.handleEOD(e,t)},r.prototype.handleEOD=function(e,t){try{var n=t.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var s=n-1,a=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),u=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(Xe)}},r.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(Ne.getCharAt(e-64)):on.illegalCharacter(Ne.getCharAt(e))},r.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,a=(n<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,u=a>>8&255,l=a&255,h=new Ce;return h.append(c),t>=2&&h.append(u),t>=3&&h.append(l),h.toString()},r})(),ED=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),AD=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ue=(function(){function r(e,t,n,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return r.lookup=function(e,t,n,i,o){var s,a;t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=AD(CD),u=c.next();!u.done;u=c.next()){var l=u.value;if(!(t===1&&l.rectangular)&&!(t===2&&!l.rectangular)&&!(n!=null&&(l.getSymbolWidth()<n.getWidth()||l.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(l.getSymbolWidth()>i.getWidth()||l.getSymbolHeight()>i.getHeight()))&&e<=l.dataCapacity)return l}}catch(h){s={error:h}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},r.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},r.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},r.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},r.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},r.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},r.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},r.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},r.prototype.getDataCapacity=function(){return this.dataCapacity},r.prototype.getErrorCodewords=function(){return this.errorCodewords},r.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},r.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},r})(),ID=(function(r){ED(e,r);function e(){return r.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e})(Ue),CD=[new Ue(!1,3,5,8,8,1),new Ue(!1,5,7,10,10,1),new Ue(!0,5,7,16,6,1),new Ue(!1,8,10,12,12,1),new Ue(!0,10,11,14,6,2),new Ue(!1,12,12,14,14,1),new Ue(!0,16,14,24,10,1),new Ue(!1,18,14,16,16,1),new Ue(!1,22,18,18,18,1),new Ue(!0,22,18,16,10,2),new Ue(!1,30,20,20,20,1),new Ue(!0,32,24,16,14,2),new Ue(!1,36,24,22,22,1),new Ue(!1,44,28,24,24,1),new Ue(!0,49,28,22,14,2),new Ue(!1,62,36,14,14,4),new Ue(!1,86,42,16,16,4),new Ue(!1,114,48,18,18,4),new Ue(!1,144,56,20,20,4),new Ue(!1,174,68,22,22,4),new Ue(!1,204,84,24,24,4,102,42),new Ue(!1,280,112,14,14,16,140,56),new Ue(!1,368,144,16,16,16,92,36),new Ue(!1,456,192,18,18,16,114,48),new Ue(!1,576,224,20,20,16,144,56),new Ue(!1,696,272,22,22,16,174,68),new Ue(!1,816,336,24,24,16,136,56),new Ue(!1,1050,408,18,18,36,175,68),new Ue(!1,1304,496,20,20,36,163,62),new ID],bD=(function(){function r(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),n=new Ce,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(s)}this.msg=n.toString(),this.shape=0,this.codewords=new Ce,this.newEncoding=-1}return r.prototype.setSymbolShape=function(e){this.shape=e},r.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},r.prototype.getMessage=function(){return this.msg},r.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},r.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},r.prototype.getCodewords=function(){return this.codewords},r.prototype.writeCodewords=function(e){this.codewords.append(e)},r.prototype.writeCodeword=function(e){this.codewords.append(e)},r.prototype.getCodewordCount=function(){return this.codewords.length()},r.prototype.getNewEncoding=function(){return this.newEncoding},r.prototype.signalEncoderChange=function(e){this.newEncoding=e},r.prototype.resetEncoderSignal=function(){this.newEncoding=-1},r.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},r.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},r.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},r.prototype.getSymbolInfo=function(){return this.symbolInfo},r.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ue.lookup(e,this.shape,this.minSize,this.maxSize,!0))},r.prototype.resetSymbolInfo=function(){this.symbolInfo=null},r})(),TD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),SD=(function(r){TD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return bt},e.prototype.encode=function(t){for(var n=new Ce;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,n);var o=n.length();if(o%3===0){this.writeNextTriplet(t,n);var s=on.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Xe);break}}}this.handleEOD(t,n)},e.prototype.encodeChar=function(t,n){switch(t){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:t>=48&&t<=57?n.append(t-48+4):t>=65&&t<=90?n.append(t-65+14):on.illegalCharacter(Ne.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,n){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=n.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(yD),t.getNewEncoding()<0&&t.signalEncoderChange(Xe)},e})(Jd),RD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),PD=(function(r){RD(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return gr},e.prototype.encodeChar=function(t,n){if(t===32)return n.append(3),1;if(t>=48&&t<=57)return n.append(t-48+4),1;if(t>=97&&t<=122)return n.append(t-97+14),1;if(t<32)return n.append(0),n.append(t),2;if(t<=47)return n.append(1),n.append(t-33),2;if(t<=64)return n.append(1),n.append(t-58+15),2;if(t>=91&&t<=95)return n.append(1),n.append(t-91+22),2;if(t===96)return n.append(2),n.append(0),2;if(t<=90)return n.append(2),n.append(t-65+1),2;if(t<=127)return n.append(2),n.append(t-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(t-128,n),i},e})(Jd),on=(function(){function r(){}return r.randomize253State=function(e){var t=149*e%253+1,n=Xg+t;return n<=254?n:n-254},r.encodeHighLevel=function(e,t,n,i,o){t===void 0&&(t=0),n===void 0&&(n=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Jd,a=[new wD,s,new PD,new SD,new xD,new _D],c=new bD(e);c.setSymbolShape(t),c.setSizeConstraints(n,i),e.startsWith(Kg)&&e.endsWith(Qg)?(c.writeCodeword(dD),c.setSkipAtEnd(2),c.pos+=Kg.length):e.startsWith(Yg)&&e.endsWith(Qg)&&(c.writeCodeword(pD),c.setSkipAtEnd(2),c.pos+=Yg.length);var u=Xe;for(o&&(s.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var l=c.getCodewordCount();c.updateSymbolInfo();var h=c.getSymbolInfo().getDataCapacity();l<h&&u!==Xe&&u!==tr&&u!==kt&&c.writeCodeword("þ");var d=c.getCodewords();for(d.length()<h&&d.append(Xg);d.length()<h;)d.append(this.randomize253State(d.length()+1));return c.getCodewords().toString()},r.lookAheadTest=function(e,t,n){var i=this.lookAheadTestIntern(e,t,n);if(n===bt&&i===bt){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Xe}else if(n===kt&&i===kt){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Xe}return i},r.lookAheadTestIntern=function(e,t,n){if(t>=e.length)return n;var i;n===Xe?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(t+o===e.length){Ot.fill(s,0),Ot.fill(a,0);var c=this.findMinimums(i,a,Te.MAX_VALUE,s),u=this.getMinimumCount(s);if(a[Xe]===c)return Xe;if(u===1){if(s[tr]>0)return tr;if(s[kt]>0)return kt;if(s[gr]>0)return gr;if(s[bt]>0)return bt}return Wt}var l=e.charCodeAt(t+o);if(o++,this.isDigit(l)?i[Xe]+=.5:this.isExtendedASCII(l)?(i[Xe]=Math.ceil(i[Xe]),i[Xe]+=2):(i[Xe]=Math.ceil(i[Xe]),i[Xe]++),this.isNativeC40(l)?i[Wt]+=2/3:this.isExtendedASCII(l)?i[Wt]+=8/3:i[Wt]+=4/3,this.isNativeText(l)?i[gr]+=2/3:this.isExtendedASCII(l)?i[gr]+=8/3:i[gr]+=4/3,this.isNativeX12(l)?i[bt]+=2/3:this.isExtendedASCII(l)?i[bt]+=13/3:i[bt]+=10/3,this.isNativeEDIFACT(l)?i[kt]+=3/4:this.isExtendedASCII(l)?i[kt]+=17/4:i[kt]+=13/4,this.isSpecialB256(l)?i[tr]+=4:i[tr]++,o>=4){if(Ot.fill(s,0),Ot.fill(a,0),this.findMinimums(i,a,Te.MAX_VALUE,s),a[Xe]<this.min(a[tr],a[Wt],a[gr],a[bt],a[kt]))return Xe;if(a[tr]<a[Xe]||a[tr]+1<this.min(a[Wt],a[gr],a[bt],a[kt]))return tr;if(a[kt]+1<this.min(a[tr],a[Wt],a[gr],a[bt],a[Xe]))return kt;if(a[gr]+1<this.min(a[tr],a[Wt],a[kt],a[bt],a[Xe]))return gr;if(a[bt]+1<this.min(a[tr],a[Wt],a[kt],a[gr],a[Xe]))return bt;if(a[Wt]+1<this.min(a[Xe],a[tr],a[kt],a[gr])){if(a[Wt]<a[bt])return Wt;if(a[Wt]===a[bt]){for(var h=t+o+1;h<e.length;){var d=e.charCodeAt(h);if(this.isX12TermSep(d))return bt;if(!this.isNativeX12(d))break;h++}return Wt}}}}},r.min=function(e,t,n,i,o){var s=Math.min(e,Math.min(t,Math.min(n,i)));return o===void 0?s:Math.min(s,o)},r.findMinimums=function(e,t,n,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);n>s&&(n=s,Ot.fill(i,0)),n===s&&(i[o]=i[o]+1)}return n},r.getMinimumCount=function(e){for(var t=0,n=0;n<6;n++)t+=e[n];return t||0},r.isDigit=function(e){return e>=48&&e<=57},r.isExtendedASCII=function(e){return e>=128&&e<=255},r.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},r.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},r.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},r.isX12TermSep=function(e){return e===13||e===42||e===62},r.isNativeEDIFACT=function(e){return e>=32&&e<=94},r.isSpecialB256=function(e){return!1},r.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var n=e.length,i=t;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-t},r.illegalCharacter=function(e){var t=Te.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},r})(),_f=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zg=(function(){function r(e){this.charset=e,this.name=e.name}return r.prototype.canEncode=function(e){try{return Kr.encode(e,this.charset)!=null}catch{return!1}},r})(),OD=(function(){function r(e,t,n){var i,o,s,a,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(b){return new Zg(aD.forName(b))}),this.encoders=[];var l=[];l.push(new Zg(cD.ISO_8859_1));for(var h=t!=null&&t.name.startsWith("UTF"),d=0;d<e.length;d++){var p=!1;try{for(var v=(i=void 0,_f(l)),y=v.next();!y.done;y=v.next()){var w=y.value,_=e.charAt(d),x=_.charCodeAt(0);if(x===n||w.canEncode(_)){p=!0;break}}}catch(b){i={error:b}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}if(!p)try{for(var T=(s=void 0,_f(this.ENCODERS)),D=T.next();!D.done;D=T.next()){var w=D.value;if(w.canEncode(e.charAt(d))){l.push(w),p=!0;break}}}catch(b){s={error:b}}finally{try{D&&!D.done&&(a=T.return)&&a.call(T)}finally{if(s)throw s.error}}p||(h=!0)}if(l.length===1&&!h)this.encoders=[l[0]];else{this.encoders=[];var F=0;try{for(var H=_f(l),C=H.next();!C.done;C=H.next()){var w=C.value;this.encoders[F++]=w}}catch(b){c={error:b}}finally{try{C&&!C.done&&(u=H.return)&&u.call(H)}finally{if(c)throw c.error}}}var A=-1;if(t!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&t.name===this.encoders[d].name){A=d;break}}this.priorityEncoderIndex=A}return r.prototype.length=function(){return this.encoders.length},r.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},r.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},r.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},r.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},r.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},r.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Kr.encode(Ne.getCharAt(e),this.encoders[t].name)},r})(),DD=3,ND=(function(){function r(e,t,n){this.fnc1=n;var i=new OD(e,t,n);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===n?1e3:s}else this.bytes=this.encodeMinimally(e,i,n)}return r.prototype.getFNC1Character=function(){return this.fnc1},r.prototype.length=function(){return this.bytes.length},r.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var n=0;n<t;n++)if(this.isECI(e+n))return!1;return!0},r.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},r.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var n=new Ce,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},r.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},r.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},r.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},r.prototype.addEdge=function(e,t,n){(e[t][n.encoderIndex]==null||e[t][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[t][n.encoderIndex]=n)},r.prototype.addEdges=function(e,t,n,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(a===s||t.canEncode(a,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),u=c+1);for(var l=c;l<u;l++)(a===s||t.canEncode(a,l))&&this.addEdge(n,i+1,new Jg(a,t,l,o,s))},r.prototype.encodeMinimally=function(e,t,n){var i=e.length,o=new Jg[i+1][t.length()];this.addEdges(e,t,o,0,null,n);for(var s=1;s<=i;s++){for(var a=0;a<t.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][a],n);for(var a=0;a<t.length();a++)o[s-1][a]=null}for(var c=-1,u=Te.MAX_VALUE,a=0;a<t.length();a++)if(o[i][a]!=null){var l=o[i][a];l.cachedTotalSize<u&&(u=l.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var h=[],d=o[i][c];d!=null;){if(d.isFNC1())h.unshift(1e3);else for(var p=t.encode(d.c,d.encoderIndex),s=p.length-1;s>=0;s--)h.unshift(p[s]&255);var v=d.previous===null?0:d.previous.encoderIndex;v!==d.encoderIndex&&h.unshift(256+t.getECIValue(d.encoderIndex)),d=d.previous}for(var y=[],s=0;s<y.length;s++)y[s]=h[s];return y},r})(),Jg=(function(){function r(e,t,n,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=n,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,n).length,a=i===null?0:i.encoderIndex;a!==n&&(s+=DD),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return r.prototype.isFNC1=function(){return this.c===1e3},r})(),MD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();var ev;(function(r){r[r.ASCII=0]="ASCII",r[r.C40=1]="C40",r[r.TEXT=2]="TEXT",r[r.X12=3]="X12",r[r.EDF=4]="EDF",r[r.B256=5]="B256"})(ev||(ev={}));(function(r){MD(e,r);function e(t,n,i,o,s){var a=r.call(this,t,n,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(ND);var kD=(function(){function r(){}return r.prototype.isCompact=function(){return this.compact},r.prototype.setCompact=function(e){this.compact=e},r.prototype.getSize=function(){return this.size},r.prototype.setSize=function(e){this.size=e},r.prototype.getLayers=function(){return this.layers},r.prototype.setLayers=function(e){this.layers=e},r.prototype.getCodeWords=function(){return this.codeWords},r.prototype.setCodeWords=function(e){this.codeWords=e},r.prototype.getMatrix=function(){return this.matrix},r.prototype.setMatrix=function(e){this.matrix=e},r})(),tv=(function(){function r(){}return r.singletonList=function(e){return[e]},r.min=function(e,t){return e.sort(t)[0]},r})(),LD=(function(){function r(e){this.previous=e}return r.prototype.getPrevious=function(){return this.previous},r})(),BD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),e0=(function(r){BD(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.value=n,o.bitCount=i,o}return e.prototype.appendTo=function(t,n){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,n){return new e(this,t,n)},e.prototype.addBinaryShift=function(t,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,n)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Te.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e})(LD),FD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),VD=(function(r){FD(e,r);function e(t,n,i){var o=r.call(this,t,0,0)||this;return o.binaryShiftStart=n,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,n){return new e(this,t,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e})(e0);function UD(r,e,t){return new VD(r,e,t)}function $s(r,e,t){return new e0(r,e,t)}var HD=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],bi=0,ku=1,qr=2,o_=3,wn=4,$D=new e0(null,0,0),xf=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],jD=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function GD(r){var e,t;try{for(var n=jD(r),i=n.next();!i.done;i=n.next()){var o=i.value;Ot.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r[bi][wn]=0,r[ku][wn]=0,r[ku][bi]=28,r[o_][wn]=0,r[qr][wn]=0,r[qr][bi]=15,r}var s_=GD(Ot.createInt32Array(6,6)),WD=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zD=(function(){function r(e,t,n,i){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=i}return r.prototype.getMode=function(){return this.mode},r.prototype.getToken=function(){return this.token},r.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},r.prototype.getBitCount=function(){return this.bitCount},r.prototype.latchAndAppend=function(e,t){var n=this.bitCount,i=this.token;if(e!==this.mode){var o=xf[this.mode][e];i=$s(i,o&65535,o>>16),n+=o>>16}var s=e===qr?4:5;return i=$s(i,t,s),new r(i,e,0,n+s)},r.prototype.shiftAndAppend=function(e,t){var n=this.token,i=this.mode===qr?4:5;return n=$s(n,s_[this.mode][e],i),n=$s(n,t,5),new r(n,this.mode,0,this.bitCount+i+5)},r.prototype.addBinaryShiftChar=function(e){var t=this.token,n=this.mode,i=this.bitCount;if(this.mode===wn||this.mode===qr){var o=xf[n][bi];t=$s(t,o&65535,o>>16),i+=o>>16,n=bi}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new r(t,n,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},r.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=UD(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new r(t,this.mode,0,this.bitCount)},r.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(xf[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=r.calculateBinaryShiftCost(e)-r.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},r.prototype.toBitArray=function(e){for(var t,n,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new Ft;try{for(var a=WD(i),c=a.next();!c.done;c=a.next()){var u=c.value;u.appendTo(s,e)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s},r.prototype.toString=function(){return Ne.format("%s bits=%d bytes=%d",HD[this.mode],this.bitCount,this.binaryShiftByteCount)},r.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},r.INITIAL_STATE=new r($D,bi,0,0),r})();function qD(r){var e=Ne.getCharCode(" "),t=Ne.getCharCode("."),n=Ne.getCharCode(",");r[bi][e]=1;for(var i=Ne.getCharCode("Z"),o=Ne.getCharCode("A"),s=o;s<=i;s++)r[bi][s]=s-o+2;r[ku][e]=1;for(var a=Ne.getCharCode("z"),c=Ne.getCharCode("a"),s=c;s<=a;s++)r[ku][s]=s-c+2;r[qr][e]=1;for(var u=Ne.getCharCode("9"),l=Ne.getCharCode("0"),s=l;s<=u;s++)r[qr][s]=s-l+2;r[qr][n]=12,r[qr][t]=13;for(var h=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],d=0;d<h.length;d++)r[o_][Ne.getCharCode(h[d])]=d;for(var p=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<p.length;d++)Ne.getCharCode(p[d])>0&&(r[wn][Ne.getCharCode(p[d])]=d);return r}var Ef=qD(Ot.createInt32Array(5,256)),Tc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},XD=(function(){function r(e){this.text=e}return r.prototype.encode=function(){for(var e=Ne.getCharCode(" "),t=Ne.getCharCode(`
`),n=tv.singletonList(zD.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case Ne.getCharCode("\r"):o=s===t?2:0;break;case Ne.getCharCode("."):o=s===e?3:0;break;case Ne.getCharCode(","):o=s===e?4:0;break;case Ne.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(n=r.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}var a=tv.min(n,function(c,u){return c.getBitCount()-u.getBitCount()});return a.toBitArray(this.text)},r.prototype.updateStateListForChar=function(e,t){var n,i,o=[];try{for(var s=Tc(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,t,o)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return r.simplifyStates(o)},r.prototype.updateStateForChar=function(e,t,n){for(var i=this.text[t]&255,o=Ef[e.getMode()][i]>0,s=null,a=0;a<=wn;a++){var c=Ef[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||a===e.getMode()||a===qr){var u=s.latchAndAppend(a,c);n.push(u)}if(!o&&s_[e.getMode()][a]>=0){var l=s.shiftAndAppend(a,c);n.push(l)}}}if(e.getBinaryShiftByteCount()>0||Ef[e.getMode()][i]===0){var h=e.addBinaryShiftChar(t);n.push(h)}},r.updateStateListForPair=function(e,t,n){var i,o,s=[];try{for(var a=Tc(e),c=a.next();!c.done;c=a.next()){var u=c.value;this.updateStateForPair(u,t,n,s)}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},r.updateStateForPair=function(e,t,n,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(wn,n)),e.getMode()!==wn&&i.push(o.shiftAndAppend(wn,n)),n===3||n===4){var s=o.latchAndAppend(qr,16-n).latchAndAppend(qr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},r.simplifyStates=function(e){var t,n,i,o,s=[];try{for(var a=Tc(e),c=a.next();!c.done;c=a.next()){var u=c.value,l=!0,h=function(w){if(w.isBetterThanOrEqualTo(u))return l=!1,"break";u.isBetterThanOrEqualTo(w)&&(s=s.filter(function(_){return _!==w}))};try{for(var d=(i=void 0,Tc(s)),p=d.next();!p.done;p=d.next()){var v=p.value,y=h(v);if(y==="break")break}}catch(w){i={error:w}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}l&&s.push(u)}}catch(w){t={error:w}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s},r})(),KD=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function r(){}return r.encodeBytes=function(e){return r.encode(e,r.DEFAULT_EC_PERCENT,r.DEFAULT_AZTEC_LAYERS)},r.encode=function(e,t,n){var i=new XD(e).encode(),o=Te.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,a,c,u,l,h;if(n!==r.DEFAULT_AZTEC_LAYERS){if(a=n<0,c=Math.abs(n),c>(a?r.MAX_NB_BITS_COMPACT:r.MAX_NB_BITS))throw new fe(Ne.format("Illegal value %s for layers",n));u=r.totalBitsInLayer(c,a),l=r.WORD_SIZE[c];var d=u-u%l;if(h=r.stuffBits(i,l),h.getSize()+o>d)throw new fe("Data to large for user specified layer");if(a&&h.getSize()>l*64)throw new fe("Data to large for user specified layer")}else{l=0,h=null;for(var p=0;;p++){if(p>r.MAX_NB_BITS)throw new fe("Data too large for an Aztec code");if(a=p<=3,c=a?p+1:p,u=r.totalBitsInLayer(c,a),!(s>u)){(h==null||l!==r.WORD_SIZE[c])&&(l=r.WORD_SIZE[c],h=r.stuffBits(i,l));var d=u-u%l;if(!(a&&h.getSize()>l*64)&&h.getSize()+o<=d)break}}}var v=r.generateCheckWords(h,u,l),y=h.getSize()/l,w=r.generateModeMessage(a,c,y),_=(a?11:14)+c*4,x=new Int32Array(_),T;if(a){T=_;for(var p=0;p<x.length;p++)x[p]=p}else{T=_+1+2*Te.truncDivision(Te.truncDivision(_,2)-1,15);for(var D=Te.truncDivision(_,2),F=Te.truncDivision(T,2),p=0;p<D;p++){var H=p+Te.truncDivision(p,15);x[D-p-1]=F-H-1,x[D+p]=F+H+1}}for(var C=new On(T),p=0,A=0;p<c;p++){for(var b=(c-p)*4+(a?9:12),P=0;P<b;P++)for(var N=P*2,M=0;M<2;M++)v.get(A+N+M)&&C.set(x[p*2+M],x[p*2+P]),v.get(A+b*2+N+M)&&C.set(x[p*2+P],x[_-1-p*2-M]),v.get(A+b*4+N+M)&&C.set(x[_-1-p*2-M],x[_-1-p*2-P]),v.get(A+b*6+N+M)&&C.set(x[_-1-p*2-P],x[p*2+M]);A+=b*8}if(r.drawModeMessage(C,a,T,w),a)r.drawBullsEye(C,Te.truncDivision(T,2),5);else{r.drawBullsEye(C,Te.truncDivision(T,2),7);for(var p=0,P=0;p<Te.truncDivision(_,2)-1;p+=15,P+=16)for(var M=Te.truncDivision(T,2)&1;M<T;M+=2)C.set(Te.truncDivision(T,2)-P,M),C.set(Te.truncDivision(T,2)+P,M),C.set(M,Te.truncDivision(T,2)-P),C.set(M,Te.truncDivision(T,2)+P)}var S=new kD;return S.setCompact(a),S.setSize(T),S.setLayers(c),S.setCodeWords(y),S.setMatrix(C),S},r.drawBullsEye=function(e,t,n){for(var i=0;i<n;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)},r.generateModeMessage=function(e,t,n){var i=new Ft;return e?(i.appendBits(t-1,2),i.appendBits(n-1,6),i=r.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(n-1,11),i=r.generateCheckWords(i,40,4)),i},r.drawModeMessage=function(e,t,n,i){var o=Te.truncDivision(n,2);if(t)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+Te.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},r.generateCheckWords=function(e,t,n){var i,o,s=e.getSize()/n,a=new n_(r.getGF(n)),c=Te.truncDivision(t,n),u=r.bitsToWords(e,n,c);a.encode(u,c-s);var l=t%n,h=new Ft;h.appendBits(0,l);try{for(var d=KD(Array.from(u)),p=d.next();!p.done;p=d.next()){var v=p.value;h.appendBits(v,n)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return h},r.bitsToWords=function(e,t,n){var i=new Int32Array(n),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var a=0,c=0;c<t;c++)a|=e.get(o*t+c)?1<<t-c-1:0;i[o]=a}return i},r.getGF=function(e){switch(e){case 4:return Cr.AZTEC_PARAM;case 6:return Cr.AZTEC_DATA_6;case 8:return Cr.AZTEC_DATA_8;case 10:return Cr.AZTEC_DATA_10;case 12:return Cr.AZTEC_DATA_12;default:throw new fe("Unsupported word size "+e)}},r.stuffBits=function(e,t){for(var n=new Ft,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var a=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(a|=1<<t-1-c);(a&o)===o?(n.appendBits(a&o,t),s--):(a&o)===0?(n.appendBits(a|1,t),s--):n.appendBits(a,t)}return n},r.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},r.DEFAULT_EC_PERCENT=33,r.DEFAULT_AZTEC_LAYERS=0,r.MAX_NB_BITS=32,r.MAX_NB_BITS_COMPACT=4,r.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),r})();var YD=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),QD=(function(r){YD(e,r);function e(t){var n=r.call(this,t.width,t.height)||this;return n.canvas=t,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(t),n}return e.makeBufferFromCanvasImageData=function(t){var n;try{n=t.getContext("2d",{willReadFrequently:!0})}catch{n=t.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,n,i){for(var o=new Uint8ClampedArray(n*i),s=0,a=0,c=t.length;s<c;s+=4,a++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var h=t[s],d=t[s+1],p=t[s+2];u=306*h+601*d+117*p+512>>10}o[a]=u}return o},e.prototype.getRow=function(t,n){if(t<0||t>=this.getHeight())throw new fe("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return n===null?n=this.buffer.slice(o,o+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(o,o+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,n,i,o){return r.prototype.crop.call(this,t,n,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new xl(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);n.width=a,n.height=c;var u=n.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(a/2,c/2),u.rotate(i),u.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e})(Xa);function a_(){return typeof navigator<"u"}function ZD(){return a_()&&!!navigator.mediaDevices}function JD(){return!!(ZD()&&navigator.mediaDevices.enumerateDevices)}var Mo=function(){return Mo=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Mo.apply(this,arguments)},ht=function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(n.next(l))}catch(h){s(h)}}function c(l){try{u(n.throw(l))}catch(h){s(h)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((n=n.apply(r,e||[])).next())})},dt=function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Af=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eN={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},As=(function(){function r(e,t,n){t===void 0&&(t=new Map),n===void 0&&(n={}),this.reader=e,this.hints=t,this.options=Mo(Mo({},eN),n)}return Object.defineProperty(r.prototype,"possibleFormats",{set:function(e){this.hints.set(tt.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),r.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},r.mediaStreamSetTorch=function(e,t){return ht(this,void 0,void 0,function(){return dt(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}})})},r.mediaStreamIsTorchCompatible=function(e){var t,n,i=e.getVideoTracks();try{for(var o=Af(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(r.mediaStreamIsTorchCompatibleTrack(a))return!0}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!1},r.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},r.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},r.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new yt("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new yt("element with id '".concat(e,"' must be an ").concat(t," element"));return n},r.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return r.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},r.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return r.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},r.prepareVideoElement=function(e){var t=r.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},r.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},r.createBinaryBitmapFromCanvas=function(e){var t=new QD(e),n=new Ww(t);return new Gw(n)},r.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},r.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},r.createCaptureCanvas=function(e){if(!e)throw new yt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),n=r.getMediaElementDimensions(e),i=n.width,o=n.height;return t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t},r.tryPlayVideo=function(e){return ht(this,void 0,void 0,function(){var t;return dt(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(r.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return t=n.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},r.createCanvasFromMediaElement=function(e){var t=r.createCaptureCanvas(e),n=t.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return r.drawImageOnCanvas(n,e),t},r.createBinaryBitmapFromMediaElem=function(e){var t=r.createCanvasFromMediaElement(e);return r.createBinaryBitmapFromCanvas(t)},r.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},r.listVideoInputDevices=function(){return ht(this,void 0,void 0,function(){var e,t,n,i,o,s,a,c,u,l,h,d;return dt(this,function(p){switch(p.label){case 0:if(!a_())throw new Error("Can't enumerate devices, navigator is not present.");if(!JD())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=p.sent(),t=[];try{for(n=Af(e),i=n.next();!i.done;i=n.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device ".concat(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(v){h={error:v}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(h)throw h.error}}return[2,t]}})})},r.findDeviceById=function(e){return ht(this,void 0,void 0,function(){var t;return dt(this,function(n){switch(n.label){case 0:return[4,r.listVideoInputDevices()];case 1:return t=n.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},r.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},r.releaseAllStreams=function(){r.streamTracker.length!==0&&r.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),r.streamTracker=[]},r.playVideoOnLoadAsync=function(e,t){return ht(this,void 0,void 0,function(){var n;return dt(this,function(i){switch(i.label){case 0:return[4,r.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(o,s){var a=setTimeout(function(){r.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",c))},t),c=function(){r.tryPlayVideo(e).then(function(u){clearTimeout(a),e.removeEventListener("canplay",c),o(u)})};e.addEventListener("canplay",c)})]}})})},r.attachStreamToVideo=function(e,t,n){return n===void 0&&(n=5e3),ht(this,void 0,void 0,function(){var i;return dt(this,function(o){switch(o.label){case 0:return i=r.prepareVideoElement(t),r.addVideoSource(i,e),[4,r.playVideoOnLoadAsync(i,n)];case 1:return o.sent(),[2,i]}})})},r._waitImageLoad=function(e){return new Promise(function(t,n){var i=1e4,o=setTimeout(function(){r.isImageLoaded(e)||(e.removeEventListener("load",s),n())},i),s=function(){clearTimeout(o),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},r.checkCallbackFnOrThrow=function(e){if(!e)throw new yt("`callbackFn` is a required parameter, you cannot capture results without it.")},r.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},r.prototype.decode=function(e){var t=r.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},r.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},r.prototype.decodeFromCanvas=function(e){var t=r.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},r.prototype.decodeFromImageElement=function(e){return ht(this,void 0,void 0,function(){var t;return dt(this,function(n){switch(n.label){case 0:if(!e)throw new yt("An image element must be provided.");return t=r.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,n.sent()]}})})},r.prototype.decodeFromImageUrl=function(e){return ht(this,void 0,void 0,function(){var t;return dt(this,function(n){switch(n.label){case 0:if(!e)throw new yt("An URL must be provided.");t=r.prepareImageElement(),t.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,n.sent()];case 3:return r.destroyImageElement(t),[7];case 4:return[2]}})})},r.prototype.decodeFromConstraints=function(e,t,n){return ht(this,void 0,void 0,function(){var i,o;return dt(this,function(s){switch(s.label){case 0:return r.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,n)];case 3:return[2,s.sent()];case 4:throw o=s.sent(),r.disposeMediaStream(i),o;case 5:return[2]}})})},r.prototype.decodeFromStream=function(e,t,n){return ht(this,void 0,void 0,function(){var i,o,s,a,c,u,l,h,d,p=this;return dt(this,function(v){switch(v.label){case 0:return r.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,r.attachStreamToVideo(e,t,i)];case 1:return o=v.sent(),s=function(){r.disposeMediaStream(e),r.cleanVideoSource(o)},a=this.scan(o,n,s),c=e.getVideoTracks(),u=Mo(Mo({},a),{stop:function(){a.stop()},streamVideoConstraintsApply:function(y,w){return ht(this,void 0,void 0,function(){var _,x,T,D,F,H,C;return dt(this,function(A){switch(A.label){case 0:_=w?c.filter(w):c,A.label=1;case 1:A.trys.push([1,6,7,8]),x=Af(_),T=x.next(),A.label=2;case 2:return T.done?[3,5]:(D=T.value,[4,D.applyConstraints(y)]);case 3:A.sent(),A.label=4;case 4:return T=x.next(),[3,2];case 5:return[3,8];case 6:return F=A.sent(),H={error:F},[3,8];case 7:try{T&&!T.done&&(C=x.return)&&C.call(x)}finally{if(H)throw H.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(y){return c.find(y).getConstraints()},streamVideoSettingsGet:function(y){return c.find(y).getSettings()},streamVideoCapabilitiesGet:function(y){return c.find(y).getCapabilities()}}),l=r.mediaStreamIsTorchCompatible(e),l&&(h=c?.find(function(y){return r.mediaStreamIsTorchCompatibleTrack(y)}),d=function(y){return ht(p,void 0,void 0,function(){return dt(this,function(w){switch(w.label){case 0:return[4,r.mediaStreamSetTorch(h,y)];case 1:return w.sent(),[2]}})})},u.switchTorch=d,u.stop=function(){return ht(p,void 0,void 0,function(){return dt(this,function(y){switch(y.label){case 0:return a.stop(),[4,d(!1)];case 1:return y.sent(),[2]}})})}),[2,u]}})})},r.prototype.decodeFromVideoDevice=function(e,t,n){return ht(this,void 0,void 0,function(){var i,o;return dt(this,function(s){switch(s.label){case 0:return r.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,n)];case 1:return[2,s.sent()]}})})},r.prototype.decodeFromVideoElement=function(e,t){return ht(this,void 0,void 0,function(){var n,i;return dt(this,function(o){switch(o.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new yt("A video element must be provided.");return n=r.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,i)];case 1:return o.sent(),[2,this.scan(n,t)]}})})},r.prototype.decodeFromVideoUrl=function(e,t){return ht(this,void 0,void 0,function(){var n,i,o,s;return dt(this,function(a){switch(a.label){case 0:if(r.checkCallbackFnOrThrow(t),!e)throw new yt("An URL must be provided.");return n=r.prepareVideoElement(),n.src=e,i=function(){r.cleanVideoSource(n)},o=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(n,o)];case 1:return a.sent(),s=this.scan(n,t,i),[2,s]}})})},r.prototype.decodeOnceFromConstraints=function(e,t){return ht(this,void 0,void 0,function(){var n;return dt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromStream=function(e,t){return ht(this,void 0,void 0,function(){var n,i,o;return dt(this,function(s){switch(s.label){case 0:return n=!!t,[4,r.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=s.sent(),[2,o];case 4:return n||r.cleanVideoSource(i),[7];case 5:return[2]}})})},r.prototype.decodeOnceFromVideoDevice=function(e,t){return ht(this,void 0,void 0,function(){var n,i;return dt(this,function(o){switch(o.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},r.prototype.decodeOnceFromVideoElement=function(e){return ht(this,void 0,void 0,function(){var t,n;return dt(this,function(i){switch(i.label){case 0:if(!e)throw new yt("A video element must be provided.");return t=r.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,r.playVideoOnLoadAsync(t,n)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},r.prototype.decodeOnceFromVideoUrl=function(e){return ht(this,void 0,void 0,function(){var t,n;return dt(this,function(i){switch(i.label){case 0:if(!e)throw new yt("An URL must be provided.");t=r.prepareVideoElement(),t.src=e,n=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return r.cleanVideoSource(t),[7];case 4:return[2]}})})},r.prototype.scanOneResult=function(e,t,n,i){var o=this;return t===void 0&&(t=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(s,a){o.scan(e,function(c,u,l){if(c){s(c),l.stop();return}if(u){if(u instanceof $&&t||u instanceof Et&&n||u instanceof Z&&i)return;l.stop(),a(u)}})})},r.prototype.scan=function(e,t,n){var i=this;r.checkCallbackFnOrThrow(t);var o=r.createCaptureCanvas(e),s;try{s=o.getContext("2d",{willReadFrequently:!0})}catch{s=o.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var a=function(){s=void 0,o=void 0},c=!1,u,l=function(){c=!0,clearTimeout(u),a(),n&&n()},h={stop:l},d=function(){if(!c)try{r.drawImageOnCanvas(s,e);var p=i.decodeFromCanvas(o);t(p,void 0,h),u=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(_){t(void 0,_,h);var v=_ instanceof Et,y=_ instanceof Z,w=_ instanceof $;if(v||y||w){u=setTimeout(d,i.options.delayBetweenScanAttempts);return}a(),n&&n(_)}};return d(),h},r.prototype._decodeOnLoadImage=function(e){return ht(this,void 0,void 0,function(){var t;return dt(this,function(n){switch(n.label){case 0:return t=r.isImageLoaded(e),t?[3,2]:[4,r._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},r.prototype.getUserMedia=function(e){return ht(this,void 0,void 0,function(){var t;return dt(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=n.sent(),r.streamTracker.push(t),[2,t]}})})},r.streamTracker=[],r})(),tN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){tN(e,r);function e(t,n){return r.call(this,new Pu,t,n)||this}return e})(As);var rN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){rN(e,r);function e(t,n){return r.call(this,new Do(t),t,n)||this}return e})(As);var nN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){nN(e,r);function e(t,n){return r.call(this,new Du,t,n)||this}return e})(As);var iN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})(),rv=(function(r){iN(e,r);function e(t,n){var i=this,o=new r_;return o.setHints(t),i=r.call(this,o,t,n)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(tt.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e})(As),oN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){oN(e,r);function e(t,n){return r.call(this,new Mu,t,n)||this}return e})(As);var sN=(function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}})();(function(r){sN(e,r);function e(t,n){return r.call(this,new Nu,t,n)||this}return e})(As);const aN={class:"fixed inset-0 bg-gray-200 bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50"},cN={class:"bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative animate-fadeIn"},uN={class:"flex justify-between items-center border-b pb-2 mb-4"},lN={class:"text-lg font-bold"},fN=["value"],hN=["value"],dN=["value"],pN=["value"],gN={class:"flex gap-2"},vN={key:0,class:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center"},mN={class:"bg-white p-4 rounded-lg"},yN=["disabled"],wN={key:0},_N={key:1},xN=ls({__name:"form",props:{editData:{}},emits:["close","saved"],setup(r,{emit:e}){const t=r,n=e,i=sn({kategori:"",nama:"",satuan:"",unit:1,hargaBeli:0,hargaBeliPerUnit:0,hargaJualPerUnit:0,hargaJualReal:0,barcode:""}),o=sn(!1),s=Td(eo,"produk");Uo([()=>i.value.hargaBeli,()=>i.value.unit],()=>{i.value.unit>0&&(i.value.hargaBeliPerUnit=Math.round(i.value.hargaBeli/i.value.unit),i.value.hargaJualPerUnit=Math.round(i.value.hargaBeliPerUnit*1.15))});const a=async()=>{if(i.value.nama){o.value=!0;try{if(t.editData?.id){const w=Sa(eo,"produk",t.editData.id);await z2(w,{...i.value})}else await X2(s,{...i.value});n("saved"),n("close")}catch(w){console.error("Error simpan produk:",w)}finally{o.value=!1}}};Wu(()=>{t.editData&&(i.value={...t.editData})});const c=w=>w?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(w):"",u=(w,_)=>{const x=_.target.value.replace(/[^\d]/g,"");i.value[w]=x?parseInt(x):0};let l=null;const h=sn(!1),d=sn(null);let p=null;const v=async()=>{h.value=!0,l=new rv;try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(T=>T.stop());const _=await rv.listVideoInputDevices();if(_.length===0){alert("Kamera tidak ditemukan. Pastikan izin kamera diizinkan di browser."),h.value=!1;return}const x=_[0].deviceId;d.value&&l.decodeFromVideoDevice(x,d.value,(T,D,F)=>{T&&(i.value.barcode=T.getText(),p=d.value?.srcObject,y())})}catch(w){console.error("Error starting scanner:",w),alert("Gagal mengakses kamera. Pastikan sudah mengizinkan akses kamera."),h.value=!1}},y=()=>{d.value&&d.value.srcObject&&(d.value.srcObject.getTracks().forEach(_=>_.stop()),d.value.srcObject=null),p&&(p.getTracks().forEach(w=>w.stop()),p=null),h.value=!1};return(w,_)=>(br(),zr("div",aN,[X("div",cN,[X("div",uN,[X("h2",lN,Tt(w.editData?"Edit Produk":"Tambah Produk"),1),X("button",{onClick:_[0]||(_[0]=x=>w.$emit("close")),class:"text-gray-500 hover:text-black text-xl font-bold cursor-pointer"}," × ")]),X("form",{onSubmit:hm(a,["prevent"]),class:"grid gap-3"},[_[9]||(_[9]=X("label",{for:""},"Kategori",-1)),jr(X("input",{"onUpdate:modelValue":_[1]||(_[1]=x=>i.value.kategori=x),placeholder:"Kategori",class:"input"},null,512),[[Gr,i.value.kategori]]),_[10]||(_[10]=X("label",{for:""},"Nama Produk",-1)),jr(X("input",{"onUpdate:modelValue":_[2]||(_[2]=x=>i.value.nama=x),placeholder:"Nama Produk",class:"input"},null,512),[[Gr,i.value.nama]]),_[11]||(_[11]=X("label",{for:""},"Satuan",-1)),jr(X("input",{"onUpdate:modelValue":_[3]||(_[3]=x=>i.value.satuan=x),placeholder:"Satuan",class:"input"},null,512),[[Gr,i.value.satuan]]),_[12]||(_[12]=X("label",{for:""},"Unit",-1)),jr(X("input",{"onUpdate:modelValue":_[4]||(_[4]=x=>i.value.unit=x),type:"number",placeholder:"Unit",class:"input"},null,512),[[Gr,i.value.unit]]),_[13]||(_[13]=X("label",{for:""},"Harga Beli",-1)),X("input",{value:c(i.value.hargaBeli),onInput:_[5]||(_[5]=x=>u("hargaBeli",x)),type:"text",placeholder:"Harga Beli",class:"input"},null,40,fN),_[14]||(_[14]=X("label",{for:""},"Harga Beli per Unit",-1)),X("input",{value:c(i.value.hargaBeliPerUnit),type:"text",disabled:"",class:"input"},null,8,hN),_[15]||(_[15]=X("label",{for:""},"Harga Jual per Unit",-1)),X("input",{value:c(i.value.hargaJualPerUnit),type:"text",disabled:"",class:"input"},null,8,dN),_[16]||(_[16]=X("label",{for:""},"Harga Jual",-1)),X("input",{value:c(i.value.hargaJualReal),onInput:_[6]||(_[6]=x=>u("hargaJualReal",x)),type:"text",class:"input"},null,40,pN),_[17]||(_[17]=X("label",{for:""},"Barcode",-1)),X("div",gN,[jr(X("input",{"onUpdate:modelValue":_[7]||(_[7]=x=>i.value.barcode=x),type:"text",placeholder:"Scan / input barcode",class:"input flex-1"},null,512),[[Gr,i.value.barcode]]),X("button",{type:"button",onClick:v,class:"bg-green-500 text-white px-3 rounded"},"📷")]),h.value?(br(),zr("div",vN,[X("div",mN,[_[8]||(_[8]=X("h3",{class:"font-semibold mb-2"},"Arahkan barcode ke kamera",-1)),X("video",{ref_key:"videoRef",ref:d,class:"border w-72 h-48"},null,512),X("div",{class:"mt-2 flex justify-end"},[X("button",{onClick:y,class:"bg-red-500 text-white px-3 py-1 rounded"},"Tutup")])])])):am("",!0),X("button",{type:"submit",disabled:o.value,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition disabled:opacity-50 cursor-pointer"},[o.value?(br(),zr("span",wN,"⏳ Menyimpan...")):(br(),zr("span",_N,Tt(w.editData?"Update":"Tambah")+" Produk",1))],8,yN)],32)])]))}}),EN=$h(xN,[["__scopeId","data-v-8c854c30"]]),AN={class:"max-w-5xl mx-auto p-6 bg-white -lg shadow mt-8"},IN={class:"w-full border"},CN={class:"border"},bN={class:"border"},TN={class:"border"},SN={class:"border"},RN={class:"border"},PN={class:"border"},ON={class:"border"},DN={class:"border"},NN={class:"border px-2 py-1 text-center"},MN=["onClick"],kN=["onClick"],LN=ls({__name:"index",setup(r){const e=sn([]),t=Td(eo,"produk"),n=sn(!1),i=sn(null),o=async()=>{const h=await W2(t);e.value=h.docs.map(d=>({id:d.id,...d.data()}))},s=async h=>{(await Ko.fire({title:"Yakin hapus produk?",text:"Data tidak bisa dikembalikan",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, hapus",cancelButtonText:"Batal"})).isConfirmed&&(await q2(Sa(eo,"produk",h)),await o(),Ko.fire("Terhapus!","Produk berhasil dihapus","success"))},a=(h=null)=>{i.value=h,n.value=!0},c=()=>{n.value=!1,i.value=null},u=async()=>{await o(),Ko.fire("Berhasil!","Produk berhasil disimpan","success")};Wu(()=>{o()});const l=h=>h?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Number(h)):"-";return(h,d)=>(br(),zr("div",AN,[d[2]||(d[2]=X("h2",{class:"text-xl font-bold mb-4"},"Daftar Produk",-1)),X("button",{onClick:d[0]||(d[0]=p=>a()),class:"mb-4 bg-green-500 hover:bg-green-600 text-white px-4 py-2 -lg transition cursor-pointer"}," Tambah Produk "),X("table",IN,[d[1]||(d[1]=X("thead",{class:"bg-gray-100"},[X("tr",null,[X("th",{class:"border"},"Kategori"),X("th",{class:"border"},"Nama"),X("th",{class:"border"},"Satuan"),X("th",{class:"border"},"Unit"),X("th",{class:"border"},"Harga Beli"),X("th",{class:"border"},"Harga Beli/Unit"),X("th",{class:"border"},"Harga Jual/Unit"),X("th",{class:"border"},"Harga Jual Real"),X("th",{class:"border"},"Aksi")])],-1)),X("tbody",null,[(br(!0),zr(tn,null,Uv(e.value,p=>(br(),zr("tr",{key:p.id,class:"border-t"},[X("td",CN,Tt(p.kategori),1),X("td",bN,Tt(p.nama),1),X("td",TN,Tt(p.satuan),1),X("td",SN,Tt(p.unit),1),X("td",RN,Tt(l(p.hargaBeli)),1),X("td",PN,Tt(l(p.hargaBeliPerUnit)),1),X("td",ON,Tt(l(p.hargaJualPerUnit)),1),X("td",DN,Tt(l(p.hargaJualReal)),1),X("td",NN,[X("button",{onClick:v=>a(p),class:"px-2 py-1 text-white bg-blue-500 hover:bg-blue-600 rounded cursor-pointer"}," Edit ",8,MN),X("button",{onClick:v=>s(p.id),class:"ml-2 px-2 py-1 text-white bg-red-500 hover:bg-red-600 rounded cursor-pointer"}," Hapus ",8,kN)])]))),128))])]),n.value?(br(),om(EN,{key:0,editData:i.value,onClose:c,onSaved:u},null,8,["editData"])):am("",!0)]))}}),BN=[{path:"/",name:"Welcome",component:V1},{path:"/warung-sembako",name:"Welcome",component:V1},{path:"/produk-view",name:"Produk View",component:C8},{path:"/produk",name:"Produk",component:LN}],FN=ZA({history:RA(),routes:BN});YE(oI).use(FN).mount("#app");
